(self.webpackChunkneo_webphone=self.webpackChunkneo_webphone||[]).push([[179],{984:(Ri,js,rc)=>{"use strict";function So(n,e,t,r,i,s,o){try{var l=n[s](o),u=l.value}catch(d){return void t(d)}l.done?e(u):Promise.resolve(u).then(r,i)}function E(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(u){So(s,r,i,o,l,"next",u)}function l(u){So(s,r,i,o,l,"throw",u)}o(void 0)})}}function Ze(n){return"function"==typeof n}function Ha(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}rc.d(js,{G:()=>si});const Zu=Ha(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function kn(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class fn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Ze(r))try{r()}catch(s){e=s instanceof Zu?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Ua(s)}catch(o){e=e??[],o instanceof Zu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Zu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ua(e);else{if(e instanceof fn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&kn(t,e)}remove(e){const{_finalizers:t}=this;t&&kn(t,e),e instanceof fn&&e._removeParent(this)}}fn.EMPTY=(()=>{const n=new fn;return n.closed=!0,n})();const ic=fn.EMPTY;function op(n){return n instanceof fn||n&&"closed"in n&&Ze(n.remove)&&Ze(n.add)&&Ze(n.unsubscribe)}function Ua(n){Ze(n)?n():n.unsubscribe()}const Wn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ja={setTimeout(n,e,...t){const{delegate:r}=ja;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ja;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function qs(n){ja.setTimeout(()=>{const{onUnhandledError:e}=Wn;if(!e)throw n;e(n)})}function ss(){}const sc=oc("C",void 0,void 0);function oc(n,e,t){return{kind:n,value:e,error:t}}let En=null;function Oi(n){if(Wn.useDeprecatedSynchronousErrorHandling){const e=!En;if(e&&(En={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=En;if(En=null,t)throw r}}else n()}class os extends fn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,op(e)&&e.add(this)):this.destination=ap}static create(e,t,r){return new qa(e,t,r)}next(e){this.isStopped?Xu(function zs(n){return oc("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Xu(function Er(n){return oc("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xu(sc,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Pi=Function.prototype.bind;function Gs(n,e){return Pi.call(n,e)}class Qu{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ac(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ac(r)}else ac(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ac(t)}}}class qa extends os{constructor(e,t,r){let i;if(super(),Ze(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Wn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Gs(e.next,s),error:e.error&&Gs(e.error,s),complete:e.complete&&Gs(e.complete,s)}):i=e}this.destination=new Qu(i)}}function ac(n){Wn.useDeprecatedSynchronousErrorHandling?function oi(n){Wn.useDeprecatedSynchronousErrorHandling&&En&&(En.errorThrown=!0,En.error=n)}(n):qs(n)}function Xu(n,e){const{onStoppedNotification:t}=Wn;t&&ja.setTimeout(()=>t(n,e))}const ap={closed:!0,next:ss,error:function Qy(n){throw n},complete:ss},Ju="function"==typeof Symbol&&Symbol.observable||"@@observable";function as(n){return n}function ki(n){return 0===n.length?as:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let wt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Xy(n){return n&&n instanceof os||function ai(n){return n&&Ze(n.next)&&Ze(n.error)&&Ze(n.complete)}(n)&&op(n)}(t)?t:new qa(t,r,i);return Oi(()=>{const{operator:o,source:l}=this;s.add(o?o.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=za(r))((i,s)=>{const o=new qa({next:l=>{try{t(l)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Ju](){return this}pipe(...t){return ki(t)(this)}toPromise(t){return new(t=za(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function za(n){var e;return null!==(e=n??Wn.Promise)&&void 0!==e?e:Promise}const Jy=Ha(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let gt=(()=>{class n extends wt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Ks(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Jy}next(t){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?ic:(this.currentObservers=null,s.push(t),new fn(()=>{this.currentObservers=null,kn(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new wt;return t.source=this,t}}return n.create=(e,t)=>new Ks(e,t),n})();class Ks extends gt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:ic}}function Ga(n){return Ze(n?.lift)}function Pt(n){return e=>{if(Ga(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function st(n,e,t,r,i){return new Wa(n,e,t,r,i)}class Wa extends os{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(l){try{t(l)}catch(u){e.error(u)}}:super._next,this._error=i?function(l){try{i(l)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Fe(n,e){return Pt((t,r)=>{let i=0;t.subscribe(st(r,s=>{r.next(n.call(e,s,i++))}))})}function $r(n){return this instanceof $r?(this.v=n,this):new $r(n)}function Mo(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(y){r[y]&&(i[y]=function(v){return new Promise(function(b,I){s.push([y,v,b,I])>1||l(y,v)})})}function l(y,v){try{!function u(y){y.value instanceof $r?Promise.resolve(y.value.v).then(d,f):p(s[0][2],y)}(r[y](v))}catch(b){p(s[0][3],b)}}function d(y){l("next",y)}function f(y){l("throw",y)}function p(y,v){y(v),s.shift(),s.length&&l(s[0][0],s[0][1])}}function nd(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Io(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(l,u){!function i(s,o,l,u){Promise.resolve(u).then(function(d){s({value:d,done:l})},o)}(l,u,(o=n[s](o)).done,o.value)})}}}const id=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function mp(n){return Ze(n?.then)}function _p(n){return Ze(n[Ju])}function sd(n){return Symbol.asyncIterator&&Ze(n?.[Symbol.asyncIterator])}function od(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const yp=function ev(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function vp(n){return Ze(n?.[yp])}function wp(n){return Mo(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield $r(t.read());if(i)return yield $r(void 0);yield yield $r(r)}}finally{t.releaseLock()}})}function ad(n){return Ze(n?.getReader)}function Kn(n){if(n instanceof wt)return n;if(null!=n){if(_p(n))return function tv(n){return new wt(e=>{const t=n[Ju]();if(Ze(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(id(n))return function nv(n){return new wt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(mp(n))return function ld(n){return new wt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,qs)})}(n);if(sd(n))return dc(n);if(vp(n))return function rv(n){return new wt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(ad(n))return function iv(n){return dc(wp(n))}(n)}throw od(n)}function dc(n){return new wt(e=>{(function sv(n,e){var t,r,i,s;return function lp(n,e,t,r){return new(t||(t=Promise))(function(s,o){function l(f){try{d(r.next(f))}catch(p){o(p)}}function u(f){try{d(r.throw(f))}catch(p){o(p)}}function d(f){f.done?s(f.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(f.value).then(l,u)}d((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=nd(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Fi(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function nn(n,e,t=1/0){return Ze(e)?nn((r,i)=>Fe((s,o)=>e(r,s,i,o))(Kn(n(r,i))),t):("number"==typeof e&&(t=e),Pt((r,i)=>function ov(n,e,t,r,i,s,o,l){const u=[];let d=0,f=0,p=!1;const y=()=>{p&&!u.length&&!d&&e.complete()},v=I=>d<r?b(I):u.push(I),b=I=>{s&&e.next(I),d++;let L=!1;Kn(t(I,f++)).subscribe(st(e,V=>{i?.(V),s?v(V):e.next(V)},()=>{L=!0},void 0,()=>{if(L)try{for(d--;u.length&&d<r;){const V=u.shift();o?Fi(e,o,()=>b(V)):b(V)}y()}catch(V){e.error(V)}}))};return n.subscribe(st(e,v,()=>{p=!0,y()})),()=>{l?.()}}(r,i,n,t)))}function xo(n=1/0){return nn(as,n)}const Ni=new wt(n=>n.complete());function bp(n){return n&&Ze(n.schedule)}function cd(n){return n[n.length-1]}function Ep(n){return Ze(cd(n))?n.pop():void 0}function Ka(n){return bp(cd(n))?n.pop():void 0}function Dp(n,e=0){return Pt((t,r)=>{t.subscribe(st(r,i=>Fi(r,n,()=>r.next(i),e),()=>Fi(r,n,()=>r.complete(),e),i=>Fi(r,n,()=>r.error(i),e)))})}function Ya(n,e=0){return Pt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Sp(n,e){if(!n)throw new Error("Iterable cannot be null");return new wt(t=>{Fi(t,e,()=>{const r=n[Symbol.asyncIterator]();Fi(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function $t(n,e){return e?function Ap(n,e){if(null!=n){if(_p(n))return function lv(n,e){return Kn(n).pipe(Ya(e),Dp(e))}(n,e);if(id(n))return function cv(n,e){return new wt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(mp(n))return function hc(n,e){return Kn(n).pipe(Ya(e),Dp(e))}(n,e);if(sd(n))return Sp(n,e);if(vp(n))return function uv(n,e){return new wt(t=>{let r;return Fi(t,e,()=>{r=n[yp](),Fi(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>Ze(r?.return)&&r.return()})}(n,e);if(ad(n))return function Tp(n,e){return Sp(wp(n),e)}(n,e)}throw od(n)}(n,e):Kn(n)}function Ip(...n){const e=Ka(n),t=function av(n,e){return"number"==typeof cd(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Kn(r[0]):xo(t)($t(r,e)):Ni}function ud(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new qa({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function dt(n){for(let e in n)if(n[e]===dt)return e;throw Error("Could not find renamed property on target object.")}function fc(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ot(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ot).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function pc(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const dd=dt({__forward_ref__:dt});function at(n){return n.__forward_ref__=at,n.toString=function(){return ot(this())},n}function pe(n){return Ro(n)?n():n}function Ro(n){return"function"==typeof n&&n.hasOwnProperty(dd)&&n.__forward_ref__===at}class U extends Error{constructor(e,t){super(function Za(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function ye(n){return"string"==typeof n?n:null==n?"":String(n)}function Oo(n,e){throw new U(-201,!1)}function dr(n,e){null==n&&function Qe(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function lt(n){return{providers:n.providers||[],imports:n.imports||[]}}function gc(n){return ht(n,mc)||ht(n,Pp)}function ht(n,e){return n.hasOwnProperty(e)?n[e]:null}function Op(n){return n&&(n.hasOwnProperty(fd)||n.hasOwnProperty(kp))?n[fd]:null}const mc=dt({\u0275prov:dt}),fd=dt({\u0275inj:dt}),Pp=dt({ngInjectableDef:dt}),kp=dt({ngInjectorDef:dt});var ue=(()=>((ue=ue||{})[ue.Default=0]="Default",ue[ue.Host=1]="Host",ue[ue.Self=2]="Self",ue[ue.SkipSelf=4]="SkipSelf",ue[ue.Optional=8]="Optional",ue))();let Yt;function Dn(n){const e=Yt;return Yt=n,e}function pd(n,e,t){const r=gc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ue.Optional?null:void 0!==e?e:void Oo(ot(n))}function Zt(n){return{toString:n}.toString()}var Dr=(()=>((Dr=Dr||{})[Dr.OnPush=0]="OnPush",Dr[Dr.Default=1]="Default",Dr))(),Sr=(()=>{return(n=Sr||(Sr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Sr;var n})();const ft=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Po={},Se=[],_c=dt({\u0275cmp:dt}),yc=dt({\u0275dir:dt}),di=dt({\u0275pipe:dt}),Qa=dt({\u0275mod:dt}),Vr=dt({\u0275fac:dt}),ct=dt({__NG_ELEMENT_ID__:dt});let cs=0;function Fn(n){return Zt(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Dr.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Se,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Sr.Emulated,id:"c"+cs++,styles:n.styles||Se,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.dependencies,o=n.features;return i.inputs=gd(n.inputs,r),i.outputs=gd(n.outputs),o&&o.forEach(l=>l(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(vc).filter($p):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(Tn).filter($p):null,i})}function vc(n){return nt(n)||Sn(n)}function $p(n){return null!==n}function pt(n){return Zt(()=>({type:n.type,bootstrap:n.bootstrap||Se,declarations:n.declarations||Se,imports:n.imports||Se,exports:n.exports||Se,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function gd(n,e){if(null==n)return Po;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const ie=Fn;function nt(n){return n[_c]||null}function Sn(n){return n[yc]||null}function Tn(n){return n[di]||null}function Nn(n,e){const t=n[Qa]||null;if(!t&&!0===e)throw new Error(`Type ${ot(n)} does not have '\u0275mod' property.`);return t}function Yn(n){return Array.isArray(n)&&"object"==typeof n[1]}function Br(n){return Array.isArray(n)&&!0===n[1]}function $o(n){return 0!=(8&n.flags)}function O(n){return 2==(2&n.flags)}function B(n){return 1==(1&n.flags)}function N(n){return null!==n.template}function te(n){return 0!=(256&n[2])}function fs(n,e){return n.hasOwnProperty(Vr)?n[Vr]:null}class bc{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function gr(){return Dd}function Dd(n){return n.type.prototype.ngOnChanges&&(n.setInput=Hp),Ec}function Ec(){const n=ps(this),e=n?.current;if(e){const t=n.previous;if(t===Po)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Hp(n,e,t,r){const i=ps(n)||function Dc(n,e){return n[Vo]=e}(n,{previous:Po,current:null}),s=i.current||(i.current={}),o=i.previous,l=this.declaredInputs[t],u=o[l];s[l]=new bc(u&&u.currentValue,e,o===Po),n[r]=e}gr.ngInherit=!0;const Vo="__ngSimpleChanges__";function ps(n){return n[Vo]||null}function Ut(n){for(;Array.isArray(n);)n=n[0];return n}function Jt(n,e){return Ut(e[n])}function mr(n,e){return Ut(e[n.index])}function Tc(n,e){return n.data[e]}function $n(n,e){const t=e[n];return Yn(t)?t:t[0]}function Uo(n){return 64==(64&n[2])}function Ir(n,e){return null==e?null:n[e]}function qo(n){n[18]=0}function zo(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const fe={lFrame:Zp(null),bindingsEnabled:!0};function rl(){return fe.bindingsEnabled}function m(){return fe.lFrame.lView}function Oe(){return fe.lFrame.tView}function kt(n){return fe.lFrame.contextLView=n,n[8]}function Je(n){return fe.lFrame.contextLView=null,n}function le(){let n=qp();for(;null!==n&&64===n.type;)n=n.parent;return n}function qp(){return fe.lFrame.currentTNode}function hi(n,e){const t=fe.lFrame;t.currentTNode=n,t.isParent=e}function Vi(){return fe.lFrame.isParent}function Td(){fe.lFrame.isParent=!1}function Go(){return fe.lFrame.bindingIndex++}function Hi(n){const e=fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Bv(n,e){const t=fe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ad(e)}function Ad(n){fe.lFrame.currentDirectiveIndex=n}function Id(n){const e=fe.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function Wp(){return fe.lFrame.currentQueryIndex}function Ui(n){fe.lFrame.currentQueryIndex=n}function Uv(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Kp(n,e,t){if(t&ue.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&ue.Host||(i=Uv(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=fe.lFrame=Yp();return r.currentTNode=e,r.lView=n,!0}function _r(n){const e=Yp(),t=n[1];fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Yp(){const n=fe.lFrame,e=null===n?null:n.child;return null===e?Zp(n):e}function Zp(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Qp(){const n=fe.lFrame;return fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Xp=Qp;function Md(){const n=Qp();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Vn(){return fe.lFrame.selectedIndex}function gs(n){fe.lFrame.selectedIndex=n}function bt(){const n=fe.lFrame;return Tc(n.tView,n.selectedIndex)}function ms(){fe.lFrame.currentNamespace="svg"}function Wo(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),l&&((n.contentHooks||(n.contentHooks=[])).push(t,l),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,l)),u&&(n.viewHooks||(n.viewHooks=[])).push(-t,u),d&&((n.viewHooks||(n.viewHooks=[])).push(t,d),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,d)),null!=f&&(n.destroyHooks||(n.destroyHooks=[])).push(t,f)}}function pi(n,e,t){Rd(n,e,3,t)}function Bn(n,e,t,r){(3&n[2])===t&&Rd(n,e,t,r)}function xd(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Rd(n,e,t,r){const s=r??-1,o=e.length-1;let l=0;for(let u=void 0!==r?65535&n[18]:0;u<o;u++)if("number"==typeof e[u+1]){if(l=e[u],null!=r&&l>=r)break}else e[u]<0&&(n[18]+=65536),(l<s||-1==s)&&(ng(n,t,e,u),n[18]=(4294901760&n[18])+u+2),u++}function ng(n,e,t,r){const i=t[r]<0,s=t[r+1],l=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(l)}finally{}}}else try{s.call(l)}finally{}}class xr{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function yr(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],l=t[r++];n.setAttribute(e,o,l,s)}else{const s=i,o=t[++r];ol(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Ic(n){return 3===n||4===n||6===n}function ol(n){return 64===n.charCodeAt(0)}function gi(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Pd(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Pd(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const l=n[s++];if("number"==typeof l){if(l===e){o=-1;break}if(l>e){o=s-1;break}}}for(;s<n.length;){const l=n[s];if("number"==typeof l)break;if(l===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function In(n){return-1!==n}function ys(n){return 32767&n}function Ko(n,e){let t=function Wv(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let kd=!0;function Yo(n){const e=kd;return kd=n,e}let Kv=0;const mi={};function ll(n,e){const t=cl(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Nd(r.data,n),Nd(e,null),Nd(r.blueprint,null));const i=ul(n,e),s=n.injectorIndex;if(In(i)){const o=ys(i),l=Ko(i,e),u=l[1].data;for(let d=0;d<8;d++)e[s+d]=l[o+d]|u[o+d]}return e[s+8]=i,s}function Nd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function cl(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function ul(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Oc(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Mc(n,e,t){!function al(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ct)&&(r=t[ct]),null==r&&(r=t[ct]=Kv++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function og(n,e,t){if(t&ue.Optional||void 0!==n)return n;Oo()}function Ld(n,e,t,r){if(t&ue.Optional&&void 0===r&&(r=null),!(t&(ue.Self|ue.Host))){const i=n[9],s=Dn(void 0);try{return i?i.get(e,r,t&ue.Optional):pd(e,r,t&ue.Optional)}finally{Dn(s)}}return og(r,0,t)}function xc(n,e,t,r=ue.Default,i){if(null!==n){if(1024&e[2]){const o=function Zv(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const l=ag(s,o,t,r|ue.Self,mi);if(l!==mi)return l;let u=s.parent;if(!u){const d=o[21];if(d){const f=d.get(t,mi,r);if(f!==mi)return f}u=Oc(o),o=o[15]}s=u}return i}(n,e,t,r,mi);if(o!==mi)return o}const s=ag(n,e,t,r,mi);if(s!==mi)return s}return Ld(e,t,r,i)}function ag(n,e,t,r,i){const s=function lg(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ct)?n[ct]:void 0;return"number"==typeof e?e>=0?255&e:ug:e}(t);if("function"==typeof s){if(!Kp(e,n,r))return r&ue.Host?og(i,0,r):Ld(e,t,r,i);try{const o=s(r);if(null!=o||r&ue.Optional)return o;Oo()}finally{Xp()}}else if("number"==typeof s){let o=null,l=cl(n,e),u=-1,d=r&ue.Host?e[16][6]:null;for((-1===l||r&ue.SkipSelf)&&(u=-1===l?ul(n,e):e[l+8],-1!==u&&cg(r,!1)?(o=e[1],l=ys(u),e=Ko(u,e)):l=-1);-1!==l;){const f=e[1];if(hl(s,l,f.data)){const p=$d(l,e,t,o,r,d);if(p!==mi)return p}u=e[l+8],-1!==u&&cg(r,e[1].data[l+8]===d)&&hl(s,l,e)?(o=f,l=ys(u),e=Ko(u,e)):l=-1}}return i}function $d(n,e,t,r,i,s){const o=e[1],l=o.data[n+8],f=dl(l,o,t,null==r?O(l)&&kd:r!=o&&0!=(3&l.type),i&ue.Host&&s===l);return null!==f?Qo(e,o,f,l):mi}function dl(n,e,t,r,i){const s=n.providerIndexes,o=e.data,l=1048575&s,u=n.directiveStart,f=s>>20,y=i?l+f:n.directiveEnd;for(let v=r?l:l+f;v<y;v++){const b=o[v];if(v<u&&t===b||v>=u&&b.type===t)return v}if(i){const v=o[u];if(v&&N(v)&&v.type===t)return u}return null}function Qo(n,e,t,r){let i=n[t];const s=e.data;if(function rg(n){return n instanceof xr}(i)){const o=i;o.resolving&&function fv(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new U(-200,`Circular dependency in DI detected for ${n}${t}`)}(function je(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ye(n)}(s[t]));const l=Yo(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Dn(o.injectImpl):null;Kp(n,r,ue.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function ji(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Dd(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==u&&Dn(u),Yo(l),o.resolving=!1,Xp()}}return i}function hl(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function cg(n,e){return!(n&ue.Self||n&ue.Host&&e)}class Js{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return xc(this._tNode,this._lView,e,r,t)}}function ug(){return new Js(le(),m())}function on(n){return Zt(()=>{const e=n.prototype.constructor,t=e[Vr]||Rc(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Vr]||Rc(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Rc(n){return Ro(n)?()=>{const e=Rc(pe(n));return e&&e()}:fs(n)}function Oc(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const Xo="__parameters__";function Jo(n,e,t){return Zt(()=>{const r=function Vd(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return l.annotation=o,l;function l(u,d,f){const p=u.hasOwnProperty(Xo)?u[Xo]:Object.defineProperty(u,Xo,{value:[]})[Xo];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class X{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Hn(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),Hn(r,e)):e!==n&&e.push(r)}return e}function jr(n,e){n.forEach(t=>Array.isArray(t)?jr(t,e):e(t))}function qi(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function kc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Zn(n,e,t){let r=na(n,e);return r>=0?n[1|r]=t:(r=~r,function Ud(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Fc(n,e){const t=na(n,e);if(t>=0)return n[1|t]}function na(n,e){return function jd(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const ia={},Cs="__NG_DI_FLAG__",bs="ngTempTokenPath",yg=/\n/gm,pl="__source";let sa;function zi(n){const e=sa;return sa=n,e}function qd(n,e=ue.Default){if(void 0===sa)throw new U(-203,!1);return null===sa?pd(n,void 0,e):sa.get(n,e&ue.Optional?null:void 0,e)}function k(n,e=ue.Default){return(function Fp(){return Yt}()||qd)(pe(n),e)}function St(n,e=ue.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),k(n,e)}function oa(n){const e=[];for(let t=0;t<n.length;t++){const r=pe(n[t]);if(Array.isArray(r)){if(0===r.length)throw new U(900,!1);let i,s=ue.Default;for(let o=0;o<r.length;o++){const l=r[o],u=zd(l);"number"==typeof u?-1===u?i=l.token:s|=u:i=l}e.push(k(i,s))}else e.push(k(r))}return e}function aa(n,e){return n[Cs]=e,n.prototype[Cs]=e,n}function zd(n){return n[Cs]}const la=aa(Jo("Optional"),8),gl=aa(Jo("SkipSelf"),4);var Xn=(()=>((Xn=Xn||{})[Xn.Important=1]="Important",Xn[Xn.DashCase=2]="DashCase",Xn))();const jc=new Map;let Pg=0;const nh="__ngContext__";function Rn(n,e){Yn(e)?(n[nh]=e[20],function kg(n){jc.set(n[20],n)}(e)):n[nh]=e}function sh(n,e){return undefined(n,e)}function wl(n){const e=n[3];return Br(e)?e[3]:e}function oh(n){return jg(n[13])}function Jn(n){return jg(n[4])}function jg(n){for(;null!==n&&!Br(n);)n=n[4];return n}function ca(n,e,t,r,i){if(null!=r){let s,o=!1;Br(r)?s=r:Yn(r)&&(o=!0,r=r[0]);const l=Ut(r);0===n&&null!==t?null==i?Yg(e,t,l):io(e,t,l,i||null,!0):1===n&&null!==t?io(e,t,l,i||null,!0):2===n?function ph(n,e,t){const r=Gc(n,e);r&&function Sw(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,l,o):3===n&&e.destroyNode(l),null!=s&&function Iw(n,e,t,r,i){const s=t[7];s!==Ut(t)&&ca(e,n,r,s,i);for(let l=10;l<t.length;l++){const u=t[l];ua(u[1],u,n,e,r,s)}}(e,n,s,t,i)}}function ah(n,e,t){return n.createElement(e,t)}function zg(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,zo(i,-1)),t.splice(r,1)}function ch(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&zg(i,r),e>0&&(n[t-1][4]=r[4]);const s=kc(n,10+e);!function yw(n,e){ua(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Gg(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&ua(n,e,t,3,null,null),function ww(n){let e=n[13];if(!e)return uh(n[1],n);for(;e;){let t=null;if(Yn(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Yn(e)&&uh(e[1],e),e=e[3];null===e&&(e=n),Yn(e)&&uh(e[1],e),t=e&&e[4]}e=t}}(e)}}function uh(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function Dw(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof xr)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const l=i[s[o]],u=s[o+1];try{u.call(l)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function Ew(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],l="function"==typeof o?o(e):Ut(e[o]),u=r[i=t[s+2]],d=t[s+3];"boolean"==typeof d?l.removeEventListener(t[s],u,d):d>=0?r[i=d]():r[i=-d].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Br(e[3])){t!==e[3]&&zg(t,e);const r=e[19];null!==r&&r.detachView(n)}!function ro(n){jc.delete(n[20])}(e)}}function Wg(n,e,t){return function Kg(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Sr.None||i===Sr.Emulated)return null}return mr(r,t)}(n,e.parent,t)}function io(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Yg(n,e,t){n.appendChild(e,t)}function Zg(n,e,t,r,i){null!==r?io(n,e,t,r,i):Yg(n,e,t)}function Gc(n,e){return n.parentNode(e)}let Zc,yh,Qc,dh=function Wc(n,e,t){return 40&n.type?mr(n,t):null};function Kc(n,e,t,r){const i=Wg(n,r,e),s=e[11],l=function Qg(n,e,t){return dh(n,e,t)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)Zg(s,i,t[u],l,!1);else Zg(s,i,t,l,!1)}function Yc(n,e){if(null!==e){const t=e.type;if(3&t)return mr(e,n);if(4&t)return fh(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Yc(n,r);{const i=n[e.index];return Br(i)?fh(-1,i):Ut(i)}}if(32&t)return sh(e,n)()||Ut(n[e.index]);{const r=Jg(n,e);return null!==r?Array.isArray(r)?r[0]:Yc(wl(n[16]),r):Yc(n,e.next)}}return null}function Jg(n,e){return null!==e?n[16][6].projection[e.projection]:null}function fh(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Yc(r,i)}return e[7]}function gh(n,e,t,r,i,s,o){for(;null!=t;){const l=r[t.index],u=t.type;if(o&&0===e&&(l&&Rn(Ut(l),r),t.flags|=4),64!=(64&t.flags))if(8&u)gh(n,e,t.child,r,i,s,!1),ca(e,n,i,l,s);else if(32&u){const d=sh(t,r);let f;for(;f=d();)ca(e,n,i,f,s);ca(e,n,i,l,s)}else 16&u?Cl(n,e,r,t,i,s):ca(e,n,i,l,s);t=o?t.projectionNext:t.next}}function ua(n,e,t,r,i,s){gh(t,r,n.firstChild,e,i,s,!1)}function Cl(n,e,t,r,i,s){const o=t[16],u=o[6].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)ca(e,n,i,u[d],s);else gh(n,e,u,o[3],i,s,!0)}function em(n,e,t){n.setAttribute(e,"style",t)}function mh(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function so(n){return function _h(){if(void 0===Zc&&(Zc=null,ft.trustedTypes))try{Zc=ft.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zc}()?.createHTML(n)||n}function wh(n){return function vh(){if(void 0===Qc&&(Qc=null,ft.trustedTypes))try{Qc=ft.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qc}()?.createHTML(n)||n}class rm{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Es(n){return n instanceof rm?n.changingThisBreaksApplicationSecurity:n}function bl(n,e){const t=function $w(n){return n instanceof rm&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class Jc{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(so(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class Vw{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=so(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=so(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const o=t.item(i).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const om=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function El(n){return(n=String(n)).match(om)?n:"unsafe:"+n}function vi(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function da(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const bh=vi("area,br,col,hr,img,wbr"),Eh=vi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),am=vi("rp,rt"),ha=da(bh,da(Eh,vi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),da(am,vi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),da(am,Eh)),Sh=vi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Th=da(Sh,vi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),vi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Bw=vi("script,style,template");class Hw{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!ha.hasOwnProperty(t))return this.sanitizedSomething=!0,!Bw.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,l=o.toLowerCase();if(!Th.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let u=s.value;Sh[l]&&(u=El(u)),this.buf.push(" ",o,'="',cm(u),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();ha.hasOwnProperty(t)&&!bh.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(cm(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Uw=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jw=/([^\#-~ |!])/g;function cm(n){return n.replace(/&/g,"&amp;").replace(Uw,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(jw,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let eu;function Ah(n){return"content"in n&&function zw(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var qt=(()=>((qt=qt||{})[qt.NONE=0]="NONE",qt[qt.HTML=1]="HTML",qt[qt.STYLE=2]="STYLE",qt[qt.SCRIPT=3]="SCRIPT",qt[qt.URL=4]="URL",qt[qt.RESOURCE_URL=5]="RESOURCE_URL",qt))();function um(n){const e=Pr();return e?wh(e.sanitize(qt.HTML,n)||""):bl(n,"HTML")?wh(Es(n)):function qw(n,e){let t=null;try{eu=eu||function im(n){const e=new Vw(n);return function sm(){try{return!!(new window.DOMParser).parseFromString(so(""),"text/html")}catch{return!1}}()?new Jc(e):e}(n);let r=e?String(e):"";t=eu.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=eu.getInertBodyElement(r)}while(r!==s);return so((new Hw).sanitizeChildren(Ah(t)||t))}finally{if(t){const r=Ah(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}(function tm(){return void 0!==yh?yh:typeof document<"u"?document:void 0}(),ye(n))}function er(n){const e=Pr();return e?e.sanitize(qt.URL,n)||"":bl(n,"URL")?Es(n):El(ye(n))}function Pr(){const n=m();return n&&n[12]}const Ih=new X("ENVIRONMENT_INITIALIZER"),hm=new X("INJECTOR",-1),fm=new X("INJECTOR_DEF_TYPES");class pm{get(e,t=ia){if(t===ia){const r=new Error(`NullInjectorError: No provider for ${ot(e)}!`);throw r.name="NullInjectorError",r}return t}}function Yw(...n){return{\u0275providers:tu(0,n)}}function tu(n,...e){const t=[],r=new Set;let i;return jr(e,s=>{const o=s;Gr(o,t,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&gm(i,t),t}function gm(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];jr(i,s=>{e.push(s)})}}function Gr(n,e,t,r){if(!(n=pe(n)))return!1;let i=null,s=Op(n);const o=!s&&nt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Op(u),!s)return!1;i=u}const l=r.has(i);if(o){if(l)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)Gr(d,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!l){let d;r.add(i);try{jr(s.imports,f=>{Gr(f,e,t,r)&&(d||(d=[]),d.push(f))})}finally{}void 0!==d&&gm(d,e)}if(!l){const d=fs(i)||(()=>new i);e.push({provide:i,useFactory:d,deps:Se},{provide:fm,useValue:i,multi:!0},{provide:Ih,useValue:()=>k(i),multi:!0})}const u=s.providers;null==u||l||jr(u,f=>{e.push(f)})}}return i!==n&&void 0!==n.providers}const nu=dt({provide:String,useValue:dt});function Et(n){return null!==n&&"object"==typeof n&&nu in n}function ao(n){return"function"==typeof n}const xh=new X("Set Injector scope."),ru={},Xw={};let Rh;function Dl(){return void 0===Rh&&(Rh=new pm),Rh}class kr{}class iu extends kr{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ph(e,o=>this.processProvider(o)),this.records.set(hm,Wr(void 0,this)),i.has("environment")&&this.records.set(kr,Wr(void 0,this));const s=this.records.get(xh);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(fm.multi,Se,ue.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=zi(this),r=Dn(void 0);try{return e()}finally{zi(t),Dn(r)}}get(e,t=ia,r=ue.Default){this.assertNotDestroyed();const i=zi(this),s=Dn(void 0);try{if(!(r&ue.SkipSelf)){let l=this.records.get(e);if(void 0===l){const u=function tC(n){return"function"==typeof n||"object"==typeof n&&n instanceof X}(e)&&gc(e);l=u&&this.injectableDefInScope(u)?Wr(Oh(e),ru):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&ue.Self?Dl():this.parent).get(e,t=r&ue.Optional&&t===ia?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[bs]=o[bs]||[]).unshift(ot(e)),i)throw o;return function rw(n,e,t,r){const i=n[bs];throw e[pl]&&i.unshift(e[pl]),n.message=function Cg(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=ot(e);if(Array.isArray(e))i=e.map(ot).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let l=e[o];s.push(o+":"+("string"==typeof l?JSON.stringify(l):ot(l)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(yg,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[bs]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Dn(s),zi(i)}}resolveInjectorInitializers(){const e=zi(this),t=Dn(void 0);try{const r=this.get(Ih.multi,Se,ue.Self);for(const i of r)i()}finally{zi(e),Dn(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(ot(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new U(205,!1)}processProvider(e){let t=ao(e=pe(e))?e:pe(e&&e.provide);const r=function su(n){return Et(n)?Wr(void 0,n.useValue):Wr(nr(n),ru)}(e);if(ao(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Wr(void 0,ru,!0),i.factory=()=>oa(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===ru&&(t.value=Xw,t.value=t.factory()),"object"==typeof t.value&&t.value&&function eC(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=pe(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Oh(n){const e=gc(n),t=null!==e?e.factory:fs(n);if(null!==t)return t;if(n instanceof X)throw new U(204,!1);if(n instanceof Function)return function mm(n){const e=n.length;if(e>0)throw function Rr(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new U(204,!1);const t=function wv(n){const e=n&&(n[mc]||n[Pp]);if(e){const t=function Cv(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new U(204,!1)}function nr(n,e,t){let r;if(ao(n)){const i=pe(n);return fs(i)||Oh(i)}if(Et(n))r=()=>pe(n.useValue);else if(function Mh(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...oa(n.deps||[]));else if(function Mt(n){return!(!n||!n.useExisting)}(n))r=()=>k(pe(n.useExisting));else{const i=pe(n&&(n.useClass||n.provide));if(!function Jw(n){return!!n.deps}(n))return fs(i)||Oh(i);r=()=>new i(...oa(n.deps))}return r}function Wr(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function nC(n){return!!n.\u0275providers}function Ph(n,e){for(const t of n)Array.isArray(t)?Ph(t,e):nC(t)?Ph(t.\u0275providers,e):e(t)}class wi{}class ym{resolveComponentFactory(e){throw function Ie(n){const e=Error(`No component factory found for ${ot(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let lo=(()=>{class n{}return n.NULL=new ym,n})();function et(){return fa(le(),m())}function fa(n,e){return new Ft(mr(n,e))}let Ft=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=et,n})();function ou(n){return n instanceof Ft?n.nativeElement:n}class Sl{}let Ki=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function rC(){const n=m(),t=$n(le().index,n);return(Yn(t)?t:n)[11]}(),n})(),iC=(()=>{class n{}return n.\u0275prov=K({token:n,providedIn:"root",factory:()=>null}),n})();class co{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const sC=new co("14.2.12"),Fh={};function Lh(n){return n.ngOriginalError}class pa{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Lh(e);for(;t&&Lh(t);)t=Lh(t);return t||null}}function Nt(n){return n instanceof Function?n():n}function wm(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const Cm="ng-template";function mC(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==wm(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function bm(n){return 4===n.type&&n.value!==Cm}function Em(n,e,t){return e===(4!==n.type||t?n.value:Cm)}function Dm(n,e,t){let r=4;const i=n.attrs||[],s=function ga(n){for(let e=0;e<n.length;e++)if(Ic(n[e]))return e;return n.length}(i);let o=!1;for(let l=0;l<e.length;l++){const u=e[l];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Em(n,u,t)||""===u&&1===e.length){if(Yr(r))return!1;o=!0}}else{const d=8&r?u:e[++l];if(8&r&&null!==n.attrs){if(!mC(n.attrs,d,t)){if(Yr(r))return!1;o=!0}continue}const p=_C(8&r?"class":u,i,bm(n),t);if(-1===p){if(Yr(r))return!1;o=!0;continue}if(""!==d){let y;y=p>s?"":i[p+1].toLowerCase();const v=8&r?y:null;if(v&&-1!==wm(v,d,0)||2&r&&d!==y){if(Yr(r))return!1;o=!0}}}}else{if(!o&&!Yr(r)&&!Yr(u))return!1;if(o&&Yr(u))continue;o=!1,r=u|1&r}}return Yr(r)||o}function Yr(n){return 0==(1&n)}function _C(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let l=e[++i];for(;"string"==typeof l;)l=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function vC(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Sm(n,e,t=!1){for(let r=0;r<e.length;r++)if(Dm(n,e[r],t))return!0;return!1}function Tm(n,e){return n?":not("+e.trim()+")":e}function CC(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const l=n[++t];i+="["+o+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Yr(o)&&(e+=Tm(s,i),i=""),r=o,s=s||!Yr(r);t++}return""!==i&&(e+=Tm(s,i)),e}const ve={};function Ne(n){Im(Oe(),m(),Vn()+n,!1)}function Im(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&pi(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Bn(e,s,0,t)}gs(t)}function Om(n,e=null,t=null,r){const i=Pm(n,e,t,r);return i.resolveInjectorInitializers(),i}function Pm(n,e=null,t=null,r,i=new Set){const s=[t||Se,Yw(n)];return r=r||("object"==typeof n?void 0:ot(n)),new iu(s,e||Dl(),r||null,i)}let an=(()=>{class n{static create(t,r){if(Array.isArray(t))return Om({name:""},r,t,"");{const i=t.name??"";return Om({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=ia,n.NULL=new pm,n.\u0275prov=K({token:n,providedIn:"any",factory:()=>k(hm)}),n.__NG_ELEMENT_ID__=-1,n})();function F(n,e=ue.Default){const t=m();return null===t?k(n,e):xc(le(),t,pe(n),e)}function cu(){throw new Error("invalid")}function Tl(n,e){return n<<17|e<<2}function Zr(n){return n>>17&32767}function Al(n){return 2|n}function Qr(n){return(131068&n)>>2}function Wh(n,e){return-131069&n|e<<2}function Kh(n){return 1|n}function Xh(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];Ui(i),o.contentQueries(2,e[s],s)}}}function Gm(n,e,t,r,i,s,o,l,u,d,f){const p=e.blueprint.slice();return p[0]=i,p[2]=76|r,(null!==f||n&&1024&n[2])&&(p[2]|=1024),qo(p),p[3]=p[15]=n,p[8]=t,p[10]=o||n&&n[10],p[11]=l||n&&n[11],p[12]=u||n&&n[12]||null,p[9]=d||n&&n[9]||null,p[6]=s,p[20]=function qc(){return Pg++}(),p[21]=f,p[16]=2==e.type?n[16]:p,p}function hu(n,e,t,r,i){let s=n.data[e];if(null===s)s=function jC(n,e,t,r,i){const s=qp(),o=Vi(),u=n.data[e]=function TP(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u)),u}(n,e,t,r,i),function Vv(){return fe.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function sl(){const n=fe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return hi(s,!0),s}function fu(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function qC(n,e,t){_r(e);try{const r=n.viewQuery;null!==r&&XC(1,r,t);const i=n.template;null!==i&&RS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Xh(n,e),n.staticViewQueries&&XC(2,n.viewQuery,t);const s=n.components;null!==s&&function EP(n,e){for(let t=0;t<e.length;t++)UP(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Md()}}function Wm(n,e,t,r){const i=e[2];if(128!=(128&i)){_r(e);try{qo(e),function Gp(n){return fe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&RS(n,e,t,2,r);const o=3==(3&i);if(o){const d=n.preOrderCheckHooks;null!==d&&pi(e,d,null)}else{const d=n.preOrderHooks;null!==d&&Bn(e,d,0,null),xd(e,0)}if(function BP(n){for(let e=oh(n);null!==e;e=Jn(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];512&i[2]||zo(s,1),i[2]|=512}}}(e),function VP(n){for(let e=oh(n);null!==e;e=Jn(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Uo(r)&&Wm(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&Xh(n,e),o){const d=n.contentCheckHooks;null!==d&&pi(e,d)}else{const d=n.contentHooks;null!==d&&Bn(e,d,1),xd(e,1)}!function Yi(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)gs(~i);else{const s=i,o=t[++r],l=t[++r];Bv(o,s),l(2,e[s])}}}finally{gs(-1)}}(n,e);const l=n.components;null!==l&&function bP(n,e){for(let t=0;t<e.length;t++)HP(n,e[t])}(e,l);const u=n.viewQuery;if(null!==u&&XC(2,u,r),o){const d=n.viewCheckHooks;null!==d&&pi(e,d)}else{const d=n.viewHooks;null!==d&&Bn(e,d,2),xd(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,zo(e[3],-1))}finally{Md()}}}function RS(n,e,t,r,i){const s=Vn(),o=2&r;try{gs(-1),o&&e.length>22&&Im(n,e,22,!1),t(r,i)}finally{gs(s)}}function OS(n,e,t){if($o(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function zC(n,e,t){rl()&&(function RP(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||ll(t,e),Rn(r,e);const o=t.initialInputs;for(let l=i;l<s;l++){const u=n.data[l],d=N(u);d&&NP(e,t,u);const f=Qo(e,n,l,t);Rn(f,e),null!==o&&LP(0,l-i,f,u,0,o),d&&($n(t.index,e)[8]=f)}}(n,e,t,mr(t,e)),128==(128&t.flags)&&function OP(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Hv(){return fe.lFrame.currentDirectiveIndex}();try{gs(s);for(let l=r;l<i;l++){const u=n.data[l],d=e[l];Ad(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&VS(u,d)}}finally{gs(-1),Ad(o)}}(n,e,t))}function GC(n,e,t=mr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],l=-1===o?t(e,n):n[o];n[i++]=l}}}function PS(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=WC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function WC(n,e,t,r,i,s,o,l,u,d){const f=22+r,p=f+i,y=function DP(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:ve);return t}(f,p),v="function"==typeof d?d():d;return y[1]={type:n,blueprint:y,template:t,queries:null,viewQuery:l,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:v,incompleteFirstPass:!1}}function kS(n,e,t,r){const i=qS(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&zS(n).push(r,i.length-1))}function FS(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function NS(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let l=null,u=null;for(let d=e.directiveStart;d<r;d++){const f=i[d],p=f.inputs,y=null===s||bm(e)?null:$P(p,s);o.push(y),l=FS(p,d,l),u=FS(f.outputs,d,u)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=16),l.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=l,e.outputs=u}function Jr(n,e,t,r,i,s,o,l){const u=mr(e,t);let f,d=e.inputs;!l&&null!=d&&(f=d[r])?(JC(n,t,f,r,i),O(e)&&LS(t,e.index)):3&e.type&&(r=function AP(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function LS(n,e){const t=$n(e,n);16&t[2]||(t[2]|=32)}function KC(n,e,t,r){let i=!1;if(rl()){const s=function PP(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Sm(t,o.selectors,!1)&&(i||(i=[]),Mc(ll(t,e),n,o.type),N(o)?(BS(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,HS(t,n.data.length,s.length);for(let f=0;f<s.length;f++){const p=s[f];p.providersResolver&&p.providersResolver(p)}let l=!1,u=!1,d=fu(n,e,s.length,null);for(let f=0;f<s.length;f++){const p=s[f];t.mergedAttrs=gi(t.mergedAttrs,p.hostAttrs),US(n,t,e,d,p),FP(d,p,o),null!==p.contentQueries&&(t.flags|=8),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(t.flags|=128);const y=p.type.prototype;!l&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),l=!0),!u&&(y.ngOnChanges||y.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),u=!0),d++}NS(n,t)}o&&function kP(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new U(-301,!1);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=gi(t.mergedAttrs,t.attrs),i}function $S(n,e,t,r,i,s){const o=s.hostBindings;if(o){let l=n.hostBindingOpCodes;null===l&&(l=n.hostBindingOpCodes=[]);const u=~e.index;(function xP(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(l)!=u&&l.push(u),l.push(r,i,o)}}function VS(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function BS(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function FP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;N(e)&&(t[""]=n)}}function HS(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function US(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=fs(i.type)),o=new xr(s,N(i),F);n.blueprint[r]=o,t[r]=o,$S(n,e,0,r,fu(n,t,i.hostVars,ve),i)}function NP(n,e,t){const r=mr(e,n),i=PS(t),s=n[10],o=Km(n,Gm(n,i,null,t.onPush?32:16,r,e,s,s.createRenderer(r,t),null,null,null));n[e.index]=o}function Ss(n,e,t,r,i,s){const o=mr(n,e);!function YC(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const l=null==o?ye(s):o(s,r||"",i);n.setAttribute(e,i,l,t)}}(e[11],o,s,n.value,t,r,i)}function LP(n,e,t,r,i,s){const o=s[e];if(null!==o){const l=r.setInput;for(let u=0;u<o.length;){const d=o[u++],f=o[u++],p=o[u++];null!==l?r.setInput(t,p,d,f):t[f]=p}}}function $P(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function jS(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function HP(n,e){const t=$n(e,n);if(Uo(t)){const r=t[1];48&t[2]?Wm(r,t,r.template,t[8]):t[5]>0&&ZC(t)}}function ZC(n){for(let r=oh(n);null!==r;r=Jn(r))for(let i=10;i<r.length;i++){const s=r[i];if(Uo(s))if(512&s[2]){const o=s[1];Wm(o,s,o.template,s[8])}else s[5]>0&&ZC(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=$n(t[r],n);Uo(i)&&i[5]>0&&ZC(i)}}function UP(n,e){const t=$n(e,n),r=t[1];(function jP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),qC(r,t,t[8])}function Km(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function QC(n){for(;n;){n[2]|=32;const e=wl(n);if(te(n)&&!e)return n;n=e}return null}function Ym(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{Wm(n,e,n.template,t)}catch(o){throw r&&WS(e,o),o}finally{i.end&&i.end()}}function XC(n,e,t){Ui(0),e(n,t)}function qS(n){return n[7]||(n[7]=[])}function zS(n){return n.cleanup||(n.cleanup=[])}function GS(n,e,t){return(null===n||N(n))&&(t=function Pv(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function WS(n,e){const t=n[9],r=t?t.get(pa,null):null;r&&r.handleError(e)}function JC(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],l=t[s++],u=e[o],d=n.data[o];null!==d.setInput?d.setInput(u,i,r,l):u[l]=i}}function Zm(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const l=e[o];"number"==typeof l?s=l:1==s?i=pc(i,l):2==s&&(r=pc(r,l+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Qm(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(Ut(s)),Br(s))for(let l=10;l<s.length;l++){const u=s[l],d=u[1].firstChild;null!==d&&Qm(u[1],u,d,r)}const o=t.type;if(8&o)Qm(n,e,t.child,r);else if(32&o){const l=sh(t,e);let u;for(;u=l();)r.push(u)}else if(16&o){const l=Jg(e,t);if(Array.isArray(l))r.push(...l);else{const u=wl(e[16]);Qm(u[1],u,l,r,!0)}}t=i?t.projectionNext:t.next}return r}class Jh{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Qm(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Br(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(ch(e,r),kc(t,r))}this._attachedToViewContainer=!1}Gg(this._lView[1],this._lView)}onDestroy(e){kS(this._lView[1],this._lView,null,e)}markForCheck(){QC(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ym(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vw(n,e){ua(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e}}class qP extends Jh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Ym(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class e0 extends lo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=nt(e);return new ef(t,this.ngModule)}}function KS(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class GP{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){const i=this.injector.get(e,Fh,r);return i!==Fh||t===Fh?i:this.parentInjector.get(e,t,r)}}class ef extends wi{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function bC(n){return n.map(CC).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return KS(this.componentDef.inputs)}get outputs(){return KS(this.componentDef.outputs)}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof kr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new GP(e,s):e,l=o.get(Sl,null);if(null===l)throw new U(407,!1);const u=o.get(iC,null),d=l.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function SP(n,e,t){return n.selectRootElement(e,t===Sr.ShadowDom)}(d,r,this.componentDef.encapsulation):ah(d,f,function zP(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),y=this.componentDef.onPush?288:272,v=WC(0,null,null,1,0,null,null,null,null,null),b=Gm(null,v,null,y,null,null,l,d,u,o,null);let I,L;_r(b);try{const V=function YP(n,e,t,r,i,s){const o=t[1];t[22]=n;const u=hu(o,22,2,"#host",null),d=u.mergedAttrs=e.hostAttrs;null!==d&&(Zm(u,d,!0),null!==n&&(yr(i,n,d),null!==u.classes&&mh(i,n,u.classes),null!==u.styles&&em(i,n,u.styles)));const f=r.createRenderer(n,e),p=Gm(t,PS(e),null,e.onPush?32:16,t[22],u,r,f,s||null,null,null);return o.firstCreatePass&&(Mc(ll(u,t),o,e.type),BS(o,u),HS(u,t.length,1)),Km(t,p),t[22]=p}(p,this.componentDef,b,l,d);if(p)if(r)yr(d,p,["ng-version",sC.full]);else{const{attrs:G,classes:C}=function Am(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Yr(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);G&&yr(d,p,G),C&&C.length>0&&mh(d,p,C.join(" "))}if(L=Tc(v,22),void 0!==t){const G=L.projection=[];for(let C=0;C<this.ngContentSelectors.length;C++){const W=t[C];G.push(null!=W?Array.from(W):null)}}I=function ZP(n,e,t,r){const i=t[1],s=function MP(n,e,t){const r=le();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),US(n,r,e,fu(n,e,1,null),t),NS(n,r));const i=Qo(e,n,r.directiveStart,r);Rn(i,e);const s=mr(r,e);return s&&Rn(s,e),i}(i,t,e);if(n[8]=t[8]=s,null!==r)for(const l of r)l(s,e);if(e.contentQueries){const l=le();e.contentQueries(1,s,l.directiveStart)}const o=le();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(gs(o.index),$S(t[1],o,0,o.directiveStart,o.directiveEnd,e),VS(e,s)),s}(V,this.componentDef,b,[QP]),qC(v,b,null)}finally{Md()}return new KP(this.componentType,I,fa(L,b),b,L)}}class KP extends class _m{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new qP(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;JC(s[1],s,i,e,t),LS(s,this._tNode.index)}}get injector(){return new Js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function QP(){const n=le();Wo(m()[1],n)}function qe(n){let e=function YS(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(N(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=t0(n.inputs),o.declaredInputs=t0(n.declaredInputs),o.outputs=t0(n.outputs);const l=i.hostBindings;l&&tk(n,l);const u=i.viewQuery,d=i.contentQueries;if(u&&JP(n,u),d&&ek(n,d),fc(n.inputs,i.inputs),fc(n.declaredInputs,i.declaredInputs),fc(n.outputs,i.outputs),N(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const l=s[o];l&&l.ngInherit&&l(n),l===qe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function XP(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=gi(i.hostAttrs,t=gi(t,i.hostAttrs))}}(r)}function t0(n){return n===Po?{}:n===Se?[]:n}function JP(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function ek(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function tk(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let Xm=null;function Il(){if(!Xm){const n=ft.Symbol;if(n&&n.iterator)Xm=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Xm=r)}}}return Xm}function tf(n){return!!n0(n)&&(Array.isArray(n)||!(n instanceof Map)&&Il()in n)}function n0(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ir(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function _n(n,e,t,r){const i=m();return ir(i,Go(),e)&&(Oe(),Ss(bt(),i,n,e,t,r)),_n}function yn(n,e,t,r,i,s,o,l){const u=m(),d=Oe(),f=n+22,p=d.firstCreatePass?function ck(n,e,t,r,i,s,o,l,u){const d=e.consts,f=hu(e,n,4,o||null,Ir(d,l));KC(e,t,f,Ir(d,u)),Wo(e,f);const p=f.tViews=WC(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d);return null!==e.queries&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}(f,d,u,e,t,r,i,s,o):d.data[f];hi(p,!1);const y=u[11].createComment("");Kc(d,u,y,p),Rn(y,u),Km(u,u[f]=jS(y,u,y,p)),B(p)&&zC(d,u,p),null!=o&&GC(u,p,l)}function Eu(n){return function Ho(n,e){return n[e]}(function $v(){return fe.lFrame.contextLView}(),22+n)}function Ye(n,e,t){const r=m();return ir(r,Go(),e)&&Jr(Oe(),bt(),r,n,e,r[11],t,!1),Ye}function r0(n,e,t,r,i){const o=i?"class":"style";JC(n,t,e.inputs[o],o,r)}function se(n,e,t,r){const i=m(),s=Oe(),o=22+n,l=i[11],u=i[o]=ah(l,e,function qv(){return fe.lFrame.currentNamespace}()),d=s.firstCreatePass?function dk(n,e,t,r,i,s,o){const l=e.consts,d=hu(e,n,2,i,Ir(l,s));return KC(e,t,d,Ir(l,o)),null!==d.attrs&&Zm(d,d.attrs,!1),null!==d.mergedAttrs&&Zm(d,d.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,d),d}(o,s,i,0,e,t,r):s.data[o];hi(d,!0);const f=d.mergedAttrs;null!==f&&yr(l,u,f);const p=d.classes;null!==p&&mh(l,u,p);const y=d.styles;return null!==y&&em(l,u,y),64!=(64&d.flags)&&Kc(s,i,u,d),0===function Fv(){return fe.lFrame.elementDepthCount}()&&Rn(u,i),function Nv(){fe.lFrame.elementDepthCount++}(),B(d)&&(zC(s,i,d),OS(s,d,i)),null!==r&&GC(i,d),se}function oe(){let n=le();Vi()?Td():(n=n.parent,hi(n,!1));const e=n;!function Lv(){fe.lFrame.elementDepthCount--}();const t=Oe();return t.firstCreatePass&&(Wo(t,n),$o(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function ig(n){return 0!=(16&n.flags)}(e)&&r0(t,e,m(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function pn(n){return 0!=(32&n.flags)}(e)&&r0(t,e,m(),e.stylesWithoutHost,!1),oe}function Wt(n,e,t,r){return se(n,e,t,r),oe(),Wt}function e_(n,e,t){const r=m(),i=Oe(),s=n+22,o=i.firstCreatePass?function hk(n,e,t,r,i){const s=e.consts,o=Ir(s,r),l=hu(e,n,8,"ng-container",o);return null!==o&&Zm(l,o,!0),KC(e,t,l,Ir(s,i)),null!==e.queries&&e.queries.elementStart(e,l),l}(s,i,r,e,t):i.data[s];hi(o,!0);const l=r[s]=r[11].createComment("");return Kc(i,r,l,o),Rn(l,r),B(o)&&(zC(i,r,o),OS(i,o,r)),null!=t&&GC(r,o),e_}function t_(){let n=le();const e=Oe();return Vi()?Td():(n=n.parent,hi(n,!1)),e.firstCreatePass&&(Wo(e,n),$o(n)&&e.queries.elementEnd(n)),t_}function As(){return m()}function rf(n){return!!n&&"function"==typeof n.then}const s0=function oT(n){return!!n&&"function"==typeof n.subscribe};function Ge(n,e,t,r){const i=m(),s=Oe(),o=le();return aT(s,i,i[11],o,n,e,0,r),Ge}function o0(n,e){const t=le(),r=m(),i=Oe();return aT(i,r,GS(Id(i.data),t,r),t,n,e),o0}function aT(n,e,t,r,i,s,o,l){const u=B(r),f=n.firstCreatePass&&zS(n),p=e[8],y=qS(e);let v=!0;if(3&r.type||l){const L=mr(r,e),V=l?l(L):L,G=y.length,C=l?Re=>l(Ut(Re[r.index])):r.index;let W=null;if(!l&&u&&(W=function fk(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const l=e[7],u=i[s+2];return l.length>u?l[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==W)(W.__ngLastListenerFn__||W).__ngNextListenerFn__=s,W.__ngLastListenerFn__=s,v=!1;else{s=cT(r,e,p,s,!1);const Re=t.listen(V,i,s);y.push(s,Re),f&&f.push(i,C,G,G+1)}}else s=cT(r,e,p,s,!1);const b=r.outputs;let I;if(v&&null!==b&&(I=b[i])){const L=I.length;if(L)for(let V=0;V<L;V+=2){const He=e[I[V]][I[V+1]].subscribe(s),Rt=y.length;y.push(s,He),f&&f.push(i,r.index,Rt,-(Rt+1))}}}function lT(n,e,t,r){try{return!1!==t(r)}catch(i){return WS(n,i),!1}}function cT(n,e,t,r,i){return function s(o){if(o===Function)return r;QC(2&n.flags?$n(n.index,e):e);let u=lT(e,0,r,o),d=s.__ngNextListenerFn__;for(;d;)u=lT(e,0,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function Dt(n=1){return function Jp(n){return(fe.lFrame.contextLView=function eg(n,e){for(;n>0;)e=e[15],n--;return e}(n,fe.lFrame.contextLView))[8]}(n)}function CT(n,e,t,r,i){const s=n[t+1],o=null===e;let l=r?Zr(s):Qr(s),u=!1;for(;0!==l&&(!1===u||o);){const f=n[l+1];_k(n[l],e)&&(u=!0,n[l+1]=r?Kh(f):Al(f)),l=r?Zr(f):Qr(f)}u&&(n[t+1]=r?Al(s):Kh(s))}function _k(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&na(n,e)>=0}const vn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function bT(n){return n.substring(vn.key,vn.keyEnd)}function ET(n,e){const t=vn.textEnd;return t===e?-1:(e=vn.keyEnd=function Ck(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,vn.key=e,t),Du(n,e,t))}function Du(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Su(n,e,t){return Zi(n,e,t,!1),Su}function ma(n,e){return Zi(n,e,null,!0),ma}function IT(n){!function Qi(n,e,t,r){const i=Oe(),s=Hi(2);i.firstUpdatePass&&xT(i,null,s,r);const o=m();if(t!==ve&&ir(o,s,t)){const l=i.data[Vn()];if(kT(l,r)&&!MT(i,s)){let u=r?l.classesWithoutHost:l.stylesWithoutHost;null!==u&&(t=pc(u,t||"")),r0(i,l,o,t,r)}else!function xk(n,e,t,r,i,s,o,l){i===ve&&(i=Se);let u=0,d=0,f=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;null!==f||null!==p;){const y=u<i.length?i[u+1]:void 0,v=d<s.length?s[d+1]:void 0;let I,b=null;f===p?(u+=2,d+=2,y!==v&&(b=p,I=v)):null===p||null!==f&&f<p?(u+=2,b=f):(d+=2,b=p,I=v),null!==b&&OT(n,e,t,r,b,I,o,l),f=u<i.length?i[u]:null,p=d<s.length?s[d]:null}}(i,l,o,o[11],o[s+1],o[s+1]=function Mk(n,e,t){if(null==t||""===t)return Se;const r=[],i=Es(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(Zn,Ms,n,!0)}function Ms(n,e){for(let t=function vk(n){return function ST(n){vn.key=0,vn.keyEnd=0,vn.value=0,vn.valueEnd=0,vn.textEnd=n.length}(n),ET(n,Du(n,0,vn.textEnd))}(e);t>=0;t=ET(e,t))Zn(n,bT(e),!0)}function Zi(n,e,t,r){const i=m(),s=Oe(),o=Hi(2);s.firstUpdatePass&&xT(s,n,o,r),e!==ve&&ir(i,o,e)&&OT(s,s.data[Vn()],i,i[11],n,i[o+1]=function Rk(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ot(Es(n)))),n}(e,t),r,o)}function MT(n,e){return e>=n.expandoStartIndex}function xT(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Vn()],o=MT(n,t);kT(s,r)&&null===e&&!o&&(e=!1),e=function Sk(n,e,t,r){const i=Id(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=sf(t=l0(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=l0(i,n,e,t,r),null===s){let u=function Tk(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Qr(r))return n[Zr(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=l0(null,n,e,u[1],r),u=sf(u,e.attrs,r),function Ak(n,e,t,r){n[Zr(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function Ik(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=sf(r,n[s].hostAttrs,t);return sf(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function gk(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,l=Zr(o),u=Qr(o);n[r]=t;let f,d=!1;if(Array.isArray(t)){const p=t;f=p[1],(null===f||na(p,f)>0)&&(d=!0)}else f=t;if(i)if(0!==u){const y=Zr(n[l+1]);n[r+1]=Tl(y,l),0!==y&&(n[y+1]=Wh(n[y+1],r)),n[l+1]=function LC(n,e){return 131071&n|e<<17}(n[l+1],r)}else n[r+1]=Tl(l,0),0!==l&&(n[l+1]=Wh(n[l+1],r)),l=r;else n[r+1]=Tl(u,0),0===l?l=r:n[u+1]=Wh(n[u+1],r),u=r;d&&(n[r+1]=Al(n[r+1])),CT(n,f,r,!0),CT(n,f,r,!1),function mk(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&na(s,e)>=0&&(t[r+1]=Kh(t[r+1]))}(e,f,n,r,s),o=Tl(l,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function l0(n,e,t,r,i){let s=null;const o=t.directiveEnd;let l=t.directiveStylingLast;for(-1===l?l=t.directiveStart:l++;l<o&&(s=e[l],r=sf(r,s.hostAttrs,i),s!==n);)l++;return null!==n&&(t.directiveStylingLast=l),r}function sf(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Zn(n,o,!!t||e[++s]))}return void 0===n?null:n}function OT(n,e,t,r,i,s,o,l){if(!(3&e.type))return;const u=n.data,d=u[l+1];n_(function Um(n){return 1==(1&n)}(d)?PT(u,e,t,i,Qr(d),o):void 0)||(n_(s)||function Hm(n){return 2==(2&n)}(d)&&(s=PT(u,null,t,i,l,o)),function Mw(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Xn.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Xn.Important),n.setStyle(t,r,i,s))}}(r,o,Jt(Vn(),t),i,s))}function PT(n,e,t,r,i,s){const o=null===e;let l;for(;i>0;){const u=n[i],d=Array.isArray(u),f=d?u[1]:u,p=null===f;let y=t[i+1];y===ve&&(y=p?Se:void 0);let v=p?Fc(y,r):f===r?y:void 0;if(d&&!n_(v)&&(v=Fc(u,r)),n_(v)&&(l=v,o))return l;const b=n[i+1];i=o?Zr(b):Qr(b)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(l=Fc(u,r))}return l}function n_(n){return void 0!==n}function kT(n,e){return 0!=(n.flags&(e?16:32))}function Ue(n,e=""){const t=m(),r=Oe(),i=n+22,s=r.firstCreatePass?hu(r,i,1,e,null):r.data[i],o=t[i]=function zc(n,e){return n.createText(e)}(t[11],e);Kc(r,t,o,s),hi(s,!1)}function c0(n){return _a("",n,""),c0}function _a(n,e,t){const r=m(),i=function gu(n,e,t,r){return ir(n,Go(),t)?e+ye(t)+r:ve}(r,n,e,t);return i!==ve&&function uo(n,e,t){const r=Jt(e,n);!function qg(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,Vn(),i),_a}function r_(n,e,t){const r=m();return ir(r,Go(),e)&&Jr(Oe(),bt(),r,n,e,r[11],t,!0),r_}function u0(n,e,t){const r=m();if(ir(r,Go(),e)){const s=Oe(),o=bt();Jr(s,o,r,n,e,GS(Id(s.data),o,r),t,!0)}return u0}const Au="en-US";let eA=Au;function f0(n,e,t,r,i){if(n=pe(n),Array.isArray(n))for(let s=0;s<n.length;s++)f0(n[s],e,t,r,i);else{const s=Oe(),o=m();let l=ao(n)?n:pe(n.provide),u=nr(n);const d=le(),f=1048575&d.providerIndexes,p=d.directiveStart,y=d.providerIndexes>>20;if(ao(n)||!n.multi){const v=new xr(u,i,F),b=g0(l,e,i?f:f+y,p);-1===b?(Mc(ll(d,o),s,l),p0(s,n,e.length),e.push(l),d.directiveStart++,d.directiveEnd++,i&&(d.providerIndexes+=1048576),t.push(v),o.push(v)):(t[b]=v,o[b]=v)}else{const v=g0(l,e,f+y,p),b=g0(l,e,f,f+y),I=v>=0&&t[v],L=b>=0&&t[b];if(i&&!L||!i&&!I){Mc(ll(d,o),s,l);const V=function YF(n,e,t,r,i){const s=new xr(n,t,F);return s.multi=[],s.index=e,s.componentProviders=0,SA(s,i,r&&!t),s}(i?KF:WF,t.length,i,r,u);!i&&L&&(t[b].providerFactory=V),p0(s,n,e.length,0),e.push(l),d.directiveStart++,d.directiveEnd++,i&&(d.providerIndexes+=1048576),t.push(V),o.push(V)}else p0(s,n,v>-1?v:b,SA(t[i?b:v],u,!i&&r));!i&&r&&L&&t[b].componentProviders++}}}function p0(n,e,t,r){const i=ao(e),s=function Qw(n){return!!n.useClass}(e);if(i||s){const u=(s?pe(e.useClass):e).prototype.ngOnDestroy;if(u){const d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=d.indexOf(t);-1===f?d.push(t,[r,u]):d[f+1].push(r,u)}else d.push(t,u)}}}function SA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function g0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function WF(n,e,t,r){return m0(this.multi,[])}function KF(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,l=Qo(t,t[1],this.providerFactory.index,r);s=l.slice(0,o),m0(i,s);for(let u=o;u<l.length;u++)s.push(l[u])}else s=[],m0(i,s);return s}function m0(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Tt(n,e=[]){return t=>{t.providersResolver=(r,i)=>function GF(n,e,t){const r=Oe();if(r.firstCreatePass){const i=N(n);f0(t,r.data,r.blueprint,i,!0),f0(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Rl{}class TA{}class AA extends Rl{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new e0(this);const r=Nn(e);this._bootstrapComponents=Nt(r.bootstrap),this._r3Injector=Pm(e,t,[{provide:Rl,useValue:this},{provide:lo,useValue:this.componentFactoryResolver}],ot(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class _0 extends TA{constructor(e){super(),this.moduleType=e}create(e){return new AA(this.moduleType,e)}}class QF extends Rl{constructor(e,t,r){super(),this.componentFactoryResolver=new e0(this),this.instance=null;const i=new iu([...e,{provide:Rl,useValue:this},{provide:lo,useValue:this.componentFactoryResolver}],t||Dl(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function l_(n,e,t=null){return new QF(n,e,t).injector}let XF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=tu(0,t.type),i=r.length>0?l_([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=K({token:n,providedIn:"environment",factory:()=>new n(k(kr))}),n})();function IA(n){n.getStandaloneInjector=e=>e.get(XF).getOrCreateStandaloneInjector(n)}function Iu(n,e,t,r){return function FA(n,e,t,r,i,s){const o=e+t;return ir(n,o,i)?function Ts(n,e,t){return n[e]=t}(n,o+1,s?r.call(s,i):r(i)):function hf(n,e){const t=n[e];return t===ve?void 0:t}(n,o+1)}(m(),function It(){const n=fe.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r)}function v0(n){return e=>{setTimeout(n,void 0,e)}}const it=class EN extends gt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=v0(s),i&&(i=v0(i)),o&&(o=v0(o)));const l=super.subscribe({next:i,error:s,complete:o});return e instanceof fn&&e.add(l),l}};function DN(){return this._results[Il()]()}class w0{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Il(),r=w0.prototype;r[t]||(r[t]=DN)}get changes(){return this._changes||(this._changes=new it)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=Hn(e);(this._changesDetected=!function gg(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let xs=(()=>{class n{}return n.__NG_ELEMENT_ID__=AN,n})();const SN=xs,TN=class extends SN{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=Gm(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),qC(r,i,e),new Jh(i)}};function AN(){return c_(le(),m())}function c_(n,e){return 4&n.type?new TN(e,n,fa(n,e)):null}let bi=(()=>{class n{}return n.__NG_ELEMENT_ID__=IN,n})();function IN(){return UA(le(),m())}const MN=bi,BA=class extends MN{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return fa(this._hostTNode,this._hostLView)}get injector(){return new Js(this._hostTNode,this._hostLView)}get parentInjector(){const e=ul(this._hostTNode,this._hostLView);if(In(e)){const t=Ko(e,this._hostLView),r=ys(e);return new Js(t[1].data[r+8],t)}return new Js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=HA(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,i),o}createComponent(e,t,r,i,s){const o=e&&!function ta(n){return"function"==typeof n}(e);let l;if(o)l=t;else{const p=t||{};l=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}const u=o?e:new ef(nt(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const y=(o?d:this.parentInjector).get(kr,null);y&&(s=y)}const f=u.create(d,i,void 0,s);return this.insert(f.hostView,l),f}insert(e,t){const r=e._lView,i=r[1];if(function jo(n){return Br(n[3])}(r)){const f=this.indexOf(e);if(-1!==f)this.detach(f);else{const p=r[3],y=new BA(p,p[6],p[3]);y.detach(y.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function Cw(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],qi(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function bw(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const l=e[19];null!==l&&l.insertView(n),e[2]|=64}(i,r,o,s);const l=fh(s,o),u=r[11],d=Gc(u,o[7]);return null!==d&&function lh(n,e,t,r,i,s){r[0]=i,r[6]=e,ua(n,r,t,1,i,s)}(i,o[6],u,r,d,l),e.attachToViewContainerRef(),qi(C0(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=HA(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=ch(this._lContainer,t);r&&(kc(C0(this._lContainer),t),Gg(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=ch(this._lContainer,t);return r&&null!=kc(C0(this._lContainer),t)?new Jh(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function HA(n){return n[8]}function C0(n){return n[8]||(n[8]=[])}function UA(n,e){let t;const r=e[n.index];if(Br(r))t=r;else{let i;if(8&n.type)i=Ut(r);else{const s=e[11];i=s.createComment("");const o=mr(n,e);io(s,Gc(s,o),i,function Tw(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=jS(r,e,i,n),Km(e,t)}return new BA(t,n,e)}class b0{constructor(e){this.queryList=e,this.matches=null}clone(){return new b0(this.queryList)}setDirty(){this.queryList.setDirty()}}class E0{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new E0(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==WA(e,t).matches&&this.queries[t].setDirty()}}class jA{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class D0{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new D0(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class S0{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new S0(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,ON(t,s)),this.matchTNodeWithReadOption(e,t,dl(t,e,s,!1,!1))}else r===xs?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,dl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Ft||i===bi||i===xs&&4&t.type)this.addMatch(t.index,-2);else{const s=dl(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function ON(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function kN(n,e,t,r){return-1===t?function PN(n,e){return 11&n.type?fa(n,e):4&n.type?c_(n,e):null}(e,n):-2===t?function FN(n,e,t){return t===Ft?fa(e,n):t===xs?c_(e,n):t===bi?UA(e,n):void 0}(n,e,r):Qo(n,n[1],t,e)}function qA(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,l=[];for(let u=0;u<o.length;u+=2){const d=o[u];l.push(d<0?null:kN(e,s[d],o[u+1],t.metadata.read))}i.matches=l}return i.matches}function T0(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=qA(n,e,i,t);for(let l=0;l<s.length;l+=2){const u=s[l];if(u>0)r.push(o[l/2]);else{const d=s[l+1],f=e[-u];for(let p=10;p<f.length;p++){const y=f[p];y[17]===y[3]&&T0(y[1],y,d,r)}if(null!==f[9]){const p=f[9];for(let y=0;y<p.length;y++){const v=p[y];T0(v[1],v,d,r)}}}}}return r}function ya(n){const e=m(),t=Oe(),r=Wp();Ui(r+1);const i=WA(t,r);if(n.dirty&&function nl(n){return 4==(4&n[2])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?T0(t,e,r,[]):qA(t,e,i,r);n.reset(s,ou),n.notifyOnChanges()}return!0}return!1}function Mu(n,e,t){const r=Oe();r.firstCreatePass&&(function GA(n,e,t){null===n.queries&&(n.queries=new D0),n.queries.track(new S0(e,t))}(r,new jA(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function zA(n,e,t){const r=new w0(4==(4&t));kS(n,e,r,r.destroy),null===e[19]&&(e[19]=new E0),e[19].queries.push(new b0(r))}(r,m(),e)}function va(){return function NN(n,e){return n[19].queries[e].queryList}(m(),Wp())}function WA(n,e){return n.queries.getByIndex(e)}function KA(n,e){return c_(n,e)}function d_(...n){}const h_=new X("Application Initializer");let f_=(()=>{class n{constructor(t){this.appInits=t,this.resolve=d_,this.reject=d_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(rf(s))t.push(s);else if(s0(s)){const o=new Promise((l,u)=>{s.subscribe({complete:l,error:u})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(k(h_,8))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gf=new X("AppId",{providedIn:"root",factory:function fI(){return`${O0()}${O0()}${O0()}`}});function O0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pI=new X("Platform Initializer"),p_=new X("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),gI=new X("appBootstrapListener"),Ou=new X("AnimationModuleType");let rL=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Rs=new X("LocaleId",{providedIn:"root",factory:()=>St(Rs,ue.Optional|ue.SkipSelf)||function iL(){return typeof $localize<"u"&&$localize.locale||Au}()});class oL{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let P0=(()=>{class n{compileModuleSync(t){return new _0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Nt(Nn(t).declarations).reduce((o,l)=>{const u=nt(l);return u&&o.push(new ef(u)),o},[]);return new oL(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cL=(()=>Promise.resolve(0))();function k0(n){typeof Zone>"u"?cL.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class We{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1),typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function uL(){let n=ft.requestAnimationFrame,e=ft.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function fL(n){const e=()=>{!function hL(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ft,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,N0(n),n.isCheckStableRunning=!0,F0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),N0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,l)=>{try{return yI(n),t.invokeTask(i,s,o,l)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),vI(n)}},onInvoke:(t,r,i,s,o,l,u)=>{try{return yI(n),t.invoke(i,s,o,l,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),vI(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,N0(n),F0(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!We.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(We.isInAngularZone())throw new U(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,dL,d_,d_);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const dL={};function F0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function N0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function yI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function vI(n){n._nesting--,F0(n)}class pL{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new it,this.onMicrotaskEmpty=new it,this.onStable=new it,this.onError=new it}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const wI=new X(""),g_=new X("");let V0,L0=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,V0||(function gL(n){V0=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{We.assertNotInAngularZone(),k0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())k0(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(k(We),k($0),k(g_))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})(),$0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return V0?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),wa=null;const CI=new X("AllowMultipleToken"),B0=new X("PlatformDestroyListeners");class bI{constructor(e,t){this.name=e,this.token=t}}function DI(n,e,t=[]){const r=`Platform: ${e}`,i=new X(r);return(s=[])=>{let o=H0();if(!o||o.injector.get(CI,!1)){const l=[...t,...s,{provide:i,useValue:!0}];n?n(l):function yL(n){if(wa&&!wa.get(CI,!1))throw new U(400,!1);wa=n;const e=n.get(TI);(function EI(n){const e=n.get(pI,null);e&&e.forEach(t=>t())})(n)}(function SI(n=[],e){return an.create({name:e,providers:[{provide:xh,useValue:"platform"},{provide:B0,useValue:new Set([()=>wa=null])},...n]})}(l,r))}return function wL(n){const e=H0();if(!e)throw new U(401,!1);return e}()}}function H0(){return wa?.get(TI)??null}let TI=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function II(n,e){let t;return t="noop"===n?new pL:("zone.js"===n?void 0:n)||new We(e),t}(r?.ngZone,function AI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:We,useValue:i}];return i.run(()=>{const o=an.create({providers:s,parent:this.injector,name:t.moduleType.name}),l=t.create(o),u=l.injector.get(pa,null);if(!u)throw new U(402,!1);return i.runOutsideAngular(()=>{const d=i.onError.subscribe({next:f=>{u.handleError(f)}});l.onDestroy(()=>{m_(this._modules,l),d.unsubscribe()})}),function MI(n,e,t){try{const r=t();return rf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(u,i,()=>{const d=l.injector.get(f_);return d.runInitializers(),d.donePromise.then(()=>(function tA(n){dr(n,"Expected localeId to be defined"),"string"==typeof n&&(eA=n.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Rs,Au)||Au),this._moduleDoBootstrap(l),l))})})}bootstrapModule(t,r=[]){const i=xI({},r);return function mL(n,e,t){const r=new _0(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Pu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new U(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new U(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(B0,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(k(an))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function xI(n,e){return Array.isArray(e)?e.reduce(xI,n):{...n,...e}}let Pu=(()=>{class n{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new wt(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),o=new wt(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{We.assertNotInAngularZone(),k0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{We.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=Ip(s,o.pipe(function dv(n={}){const{connector:e=(()=>new gt),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,l,u,d=0,f=!1,p=!1;const y=()=>{l?.unsubscribe(),l=void 0},v=()=>{y(),o=u=void 0,f=p=!1},b=()=>{const I=o;v(),I?.unsubscribe()};return Pt((I,L)=>{d++,!p&&!f&&y();const V=u=u??e();L.add(()=>{d--,0===d&&!p&&!f&&(l=ud(b,i))}),V.subscribe(L),!o&&d>0&&(o=new qa({next:G=>V.next(G),error:G=>{p=!0,y(),l=ud(v,t,G),V.error(G)},complete:()=>{f=!0,y(),l=ud(v,r),V.complete()}}),Kn(I).subscribe(o))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof wi;if(!this._injector.get(f_).done)throw!i&&function us(n){const e=nt(n)||Sn(n)||Tn(n);return null!==e&&e.standalone}(t),new U(405,false);let o;o=i?t:this._injector.get(lo).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const l=function _L(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Rl),d=o.create(an.NULL,[],r||o.selector,l),f=d.location.nativeElement,p=d.injector.get(wI,null);return p?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),m_(this.components,d),p?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new U(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;m_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(gI,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>m_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new U(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(k(We),k(kr),k(pa))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function m_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let OI=!0,Ca=(()=>{class n{}return n.__NG_ELEMENT_ID__=EL,n})();function EL(n){return function DL(n,e,t){if(O(n)&&!t){const r=$n(n.index,e);return new Jh(r,r)}return 47&n.type?new Jh(e[16],e):null}(le(),m(),16==(16&n))}class LI{constructor(){}supports(e){return tf(e)}create(e){return new xL(e)}}const ML=(n,e)=>e;class xL{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ML}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<VI(r,i,s)?t:r,l=VI(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const d=l-i,f=u-i;if(d!=f){for(let y=0;y<d;y++){const v=y<s.length?s[y]:s[y]=0,b=v+y;f<=b&&b<d&&(s[y]=v+1)}s[o.previousIndex]=f-d}}l!==u&&e(o,l,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!tf(e))throw new U(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)s=e[l],o=this._trackByFn(l,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,l)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,l),r=!0),t=t._next}else i=0,function ok(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Il()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,l=>{o=this._trackByFn(i,l),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,l,o,i)),Object.is(t.item,l)||this._addIdentityChange(t,l)):(t=this._mismatch(t,l,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new RL(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new $I),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $I),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class RL{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OL{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class $I{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new OL,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VI(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class BI{constructor(){}supports(e){return e instanceof Map||n0(e)}create(){return new PL}}class PL{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||n0(e)))throw new U(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new kL(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class kL{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function HI(){return new v_([new LI])}let v_=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||HI()),deps:[[n,new gl,new la]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new U(901,!1)}}return n.\u0275prov=K({token:n,providedIn:"root",factory:HI}),n})();function UI(){return new mf([new BI])}let mf=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||UI()),deps:[[n,new gl,new la]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new U(901,!1)}}return n.\u0275prov=K({token:n,providedIn:"root",factory:UI}),n})();const LL=DI(null,"core",[]);let $L=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(k(Pu))},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({}),n})(),w_=null;function Os(){return w_}const ze=new X("DocumentToken");let G0=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:function(){return function UL(){return k(jI)}()},providedIn:"platform"}),n})();const jL=new X("Location Initialized");let jI=(()=>{class n extends G0{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Os().getBaseHref(this._doc)}onPopState(t){const r=Os().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Os().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){qI()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){qI()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(k(ze))},n.\u0275prov=K({token:n,factory:function(){return function qL(){return new jI(k(ze))}()},providedIn:"platform"}),n})();function qI(){return!!window.history.pushState}function W0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function zI(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function po(n){return n&&"?"!==n[0]?"?"+n:n}let Ps=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:function(){return St(WI)},providedIn:"root"}),n})();const GI=new X("appBaseHref");let WI=(()=>{class n extends Ps{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??St(ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return W0(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+po(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+po(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+po(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(k(G0),k(GI,8))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zL=(()=>{class n extends Ps{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=W0(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+po(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+po(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(k(G0),k(GI,8))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})(),_f=(()=>{class n{constructor(t){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=zI(KI(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+po(r))}normalize(t){return n.stripTrailingSlash(function WL(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,KI(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+po(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+po(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=po,n.joinWithSlash=W0,n.stripTrailingSlash=zI,n.\u0275fac=function(t){return new(t||n)(k(Ps))},n.\u0275prov=K({token:n,factory:function(){return function GL(){return new _f(k(Ps))}()},providedIn:"root"}),n})();function KI(n){return n.replace(/\/index.html$/,"")}function rM(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let x_=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(tf(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ot(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(F(v_),F(mf),F(Ft),F(Ki))},n.\u0275dir=ie({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class O2{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let oM=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new O2(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const l=r.get(s);r.move(l,o),aM(l,i)}});for(let i=0,s=r.length;i<s;i++){const l=r.get(i).context;l.index=i,l.count=s,l.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{aM(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(F(bi),F(xs),F(v_))},n.\u0275dir=ie({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function aM(n,e){n.context.$implicit=e.item}let R_=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new k2,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lM("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lM("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(F(bi),F(xs))},n.\u0275dir=ie({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class k2{constructor(){this.$implicit=null,this.ngIf=null}}function lM(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ot(e)}'.`)}class rb{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let O_=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ie({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),cM=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new rb(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(F(bi),F(xs),F(O_,9))},n.\u0275dir=ie({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),dM=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:Xn.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(F(Ft),F(mf),F(Ki))},n.\u0275dir=ie({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),ob=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({}),n})();const fM="browser";let c$=(()=>{class n{}return n.\u0275prov=K({token:n,providedIn:"root",factory:()=>new u$(k(ze),window)}),n})();class u${constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function d$(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=pM(this.window.history)||pM(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function pM(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class gM{}class cb extends class M$ extends class HL{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function BL(n){w_||(w_=n)}(new cb)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function x$(){return Cf=Cf||document.querySelector("base"),Cf?Cf.getAttribute("href"):null}();return null==t?null:function R$(n){k_=k_||document.createElement("a"),k_.setAttribute("href",n);const e=k_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Cf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rM(document.cookie,e)}}let k_,Cf=null;const vM=new X("TRANSITION_ID"),P$=[{provide:h_,useFactory:function O$(n,e,t){return()=>{t.get(f_).donePromise.then(()=>{const r=Os(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[vM,ze,an],multi:!0}];let F$=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();const F_=new X("EventManagerPlugins");let N_=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(k(F_),k(We))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();class wM{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Os().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let CM=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})(),bf=(()=>{class n extends CM{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(bM),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(bM))}}return n.\u0275fac=function(t){return new(t||n)(k(ze))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();function bM(n){Os().remove(n)}const ub={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},db=/%COMP%/g;function L_(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?L_(n,i,t):(i=i.replace(db,n),t.push(i))}return t}function SM(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let $_=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new hb(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Sr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new H$(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Sr.ShadowDom:return new U$(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=L_(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(k(N_),k(bf),k(gf))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();class hb{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ub[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(AM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(AM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ub[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ub[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Xn.DashCase|Xn.Important)?e.style.setProperty(t,r,i&Xn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Xn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,SM(r)):this.eventManager.addEventListener(e,t,SM(r))}}function AM(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class H$ extends hb{constructor(e,t,r,i){super(e),this.component=r;const s=L_(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function $$(n){return"_ngcontent-%COMP%".replace(db,n)}(i+"-"+r.id),this.hostAttr=function V$(n){return"_nghost-%COMP%".replace(db,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class U$ extends hb{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=L_(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const l=document.createElement("style");l.textContent=s[o],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let j$=(()=>{class n extends wM{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(k(ze))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();const IM=["alt","control","meta","shift"],q$={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let G$=(()=>{class n extends wM{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Os().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),o="code."),IM.forEach(d=>{const f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=q$[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),IM.forEach(o=>{o!==i&&(0,z$[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(k(ze))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();const xM=[{provide:p_,useValue:fM},{provide:pI,useValue:function W$(){cb.makeCurrent()},multi:!0},{provide:ze,useFactory:function Y$(){return function Pw(n){yh=n}(document),document},deps:[]}],Z$=DI(LL,"browser",xM),RM=new X(""),OM=[{provide:g_,useClass:class k${addToWindow(e){ft.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},ft.getAllAngularTestabilities=()=>e.getAllTestabilities(),ft.getAllAngularRootElements=()=>e.getAllRootElements(),ft.frameworkStabilizers||(ft.frameworkStabilizers=[]),ft.frameworkStabilizers.push(r=>{const i=ft.getAllAngularTestabilities();let s=i.length,o=!1;const l=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(function(u){u.whenStable(l)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Os().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:wI,useClass:L0,deps:[We,$0,g_]},{provide:L0,useClass:L0,deps:[We,$0,g_]}],PM=[{provide:xh,useValue:"root"},{provide:pa,useFactory:function K$(){return new pa},deps:[]},{provide:F_,useClass:j$,multi:!0,deps:[ze,We,p_]},{provide:F_,useClass:G$,multi:!0,deps:[ze]},{provide:$_,useClass:$_,deps:[N_,bf,gf]},{provide:Sl,useExisting:$_},{provide:CM,useExisting:bf},{provide:bf,useClass:bf,deps:[ze]},{provide:N_,useClass:N_,deps:[F_,We]},{provide:gM,useClass:F$,deps:[]},[]];let kM=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:gf,useValue:t.appId},{provide:vM,useExisting:gf},P$]}}}return n.\u0275fac=function(t){return new(t||n)(k(RM,12))},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({providers:[...PM,...OM],imports:[ob,$L]}),n})(),FM=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(k(ze))},n.\u0275prov=K({token:n,factory:function(t){let r=null;return r=t?new t:function X$(){return new FM(k(ze))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const Ef=Ha(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Pl(n,e){const t="object"==typeof e;return new Promise((r,i)=>{let o,s=!1;n.subscribe({next:l=>{o=l,s=!0},error:i,complete:()=>{s?r(o):t?r(e.defaultValue):i(new Ef)}})})}function ae(...n){return $t(n,Ka(n))}function Ea(n,e){return Ze(e)?nn(n,e,1):nn(n,1)}function Cr(n,e){return Pt((t,r)=>{let i=0;t.subscribe(st(r,s=>n.call(e,s,i++)&&r.next(s)))})}class $M{}class VM{}class mo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof mo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new mo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof mo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(l=>-1===s.indexOf(l)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class oV{encodeKey(e){return BM(e)}encodeValue(e){return BM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const lV=/%(\d[a-f0-9])/gi,cV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function BM(n){return encodeURIComponent(n).replace(lV,(e,t)=>cV[t]??e)}function V_(n){return`${n}`}class _o{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new oV,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function aV(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,l]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(l),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(V_):[V_(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new _o({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(V_(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(V_(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class uV{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function HM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function UM(n){return typeof Blob<"u"&&n instanceof Blob}function jM(n){return typeof FormData<"u"&&n instanceof FormData}class Df{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function dV(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new mo),this.context||(this.context=new uV),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const l=t.indexOf("?");this.urlWithParams=t+(-1===l?"?":l<t.length-1?"&":"")+o}}else this.params=new _o,this.urlWithParams=t}serializeBody(){return null===this.body?null:HM(this.body)||UM(this.body)||jM(this.body)||function hV(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof _o?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||jM(this.body)?null:UM(this.body)?this.body.type||null:HM(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof _o?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,d=e.params||this.params;const f=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((p,y)=>p.set(y,e.setHeaders[y]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((p,y)=>p.set(y,e.setParams[y]),d)),new Df(t,r,s,{params:d,headers:u,context:f,reportProgress:l,responseType:i,withCredentials:o})}}var un=(()=>((un=un||{})[un.Sent=0]="Sent",un[un.UploadProgress=1]="UploadProgress",un[un.ResponseHeader=2]="ResponseHeader",un[un.DownloadProgress=3]="DownloadProgress",un[un.Response=4]="Response",un[un.User=5]="User",un))();class gb{constructor(e,t=200,r="OK"){this.headers=e.headers||new mo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class mb extends gb{constructor(e={}){super(e),this.type=un.ResponseHeader}clone(e={}){return new mb({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class B_ extends gb{constructor(e={}){super(e),this.type=un.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new B_({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class qM extends gb{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function _b(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let kl=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Df)s=t;else{let u,d;u=i.headers instanceof mo?i.headers:new mo(i.headers),i.params&&(d=i.params instanceof _o?i.params:new _o({fromObject:i.params})),s=new Df(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=ae(s).pipe(Ea(u=>this.handler.handle(u)));if(t instanceof Df||"events"===i.observe)return o;const l=o.pipe(Cr(u=>u instanceof B_));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(Fe(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(Fe(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(Fe(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return l.pipe(Fe(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new _o).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,_b(i,r))}post(t,r,i={}){return this.request("POST",t,_b(i,r))}put(t,r,i={}){return this.request("PUT",t,_b(i,r))}}return n.\u0275fac=function(t){return new(t||n)(k($M))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();class zM{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const yb=new X("HTTP_INTERCEPTORS");let fV=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();const pV=/^\)\]\}',?\n/;let GM=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new wt(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((v,b)=>i.setRequestHeader(v,b.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const v=t.detectContentTypeHeader();null!==v&&i.setRequestHeader("Content-Type",v)}if(t.responseType){const v=t.responseType.toLowerCase();i.responseType="json"!==v?v:"text"}const s=t.serializeBody();let o=null;const l=()=>{if(null!==o)return o;const v=i.statusText||"OK",b=new mo(i.getAllResponseHeaders()),I=function gV(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return o=new mb({headers:b,status:i.status,statusText:v,url:I}),o},u=()=>{let{headers:v,status:b,statusText:I,url:L}=l(),V=null;204!==b&&(V=typeof i.response>"u"?i.responseText:i.response),0===b&&(b=V?200:0);let G=b>=200&&b<300;if("json"===t.responseType&&"string"==typeof V){const C=V;V=V.replace(pV,"");try{V=""!==V?JSON.parse(V):null}catch(W){V=C,G&&(G=!1,V={error:W,text:V})}}G?(r.next(new B_({body:V,headers:v,status:b,statusText:I,url:L||void 0})),r.complete()):r.error(new qM({error:V,headers:v,status:b,statusText:I,url:L||void 0}))},d=v=>{const{url:b}=l(),I=new qM({error:v,status:i.status||0,statusText:i.statusText||"Unknown Error",url:b||void 0});r.error(I)};let f=!1;const p=v=>{f||(r.next(l()),f=!0);let b={type:un.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(b.total=v.total),"text"===t.responseType&&i.responseText&&(b.partialText=i.responseText),r.next(b)},y=v=>{let b={type:un.UploadProgress,loaded:v.loaded};v.lengthComputable&&(b.total=v.total),r.next(b)};return i.addEventListener("load",u),i.addEventListener("error",d),i.addEventListener("timeout",d),i.addEventListener("abort",d),t.reportProgress&&(i.addEventListener("progress",p),null!==s&&i.upload&&i.upload.addEventListener("progress",y)),i.send(s),r.next({type:un.Sent}),()=>{i.removeEventListener("error",d),i.removeEventListener("abort",d),i.removeEventListener("load",u),i.removeEventListener("timeout",d),t.reportProgress&&(i.removeEventListener("progress",p),null!==s&&i.upload&&i.upload.removeEventListener("progress",y)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(k(gM))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();const vb=new X("XSRF_COOKIE_NAME"),wb=new X("XSRF_HEADER_NAME");class WM{}let mV=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=rM(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(k(ze),k(p_),k(vb))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})(),Cb=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(k(WM),k(wb))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})(),_V=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(yb,[]);this.chain=r.reduceRight((i,s)=>new zM(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(k(VM),k(an))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})(),yV=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Cb,useClass:fV}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:vb,useValue:t.cookieName}:[],t.headerName?{provide:wb,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({providers:[Cb,{provide:yb,useExisting:Cb,multi:!0},{provide:WM,useClass:mV},{provide:vb,useValue:"XSRF-TOKEN"},{provide:wb,useValue:"X-XSRF-TOKEN"}]}),n})(),vV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({providers:[kl,{provide:$M,useClass:_V},GM,{provide:VM,useExisting:GM}],imports:[yV.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),ku=(()=>{class n{constructor(t,r){this.env=t,this.http=r}request(t,r,i,s,o){return this.http.request(t,`${this.env.base_url}${r}`,{params:s,body:i,observe:"body",headers:o})}get(t,r={},i){let s=new _o;return void 0!==r&&Object.getOwnPropertyNames(r).forEach(o=>{s=s.set(o,r[o])}),this.http.get(`${this.env.base_url}${t}`,{headers:i,params:s})}handleError(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.message):console.error(`Backend returned code ${t.status}, body was: ${t.message}`),new Error(t.error.message)}}return n.\u0275fac=function(t){return new(t||n)(k(si),k(kl))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Fl=(()=>{return(n=Fl||(Fl={})).GET="GET",n.POST="POST",n.PATCH="PATCH",n.DELETE="DELETE",n.PUT="PUT",Fl;var n})();let Nl=(()=>{class n{constructor(){}getCookie(t){let o,r=document.cookie.split(";"),i=r.length,s=`${t}=`;for(let l=0;l<i;l+=1)if(o=r[l].replace(/^\s+/g,""),0==o.indexOf(s))return o.substring(s.length,o.length);return""}deleteCookie(t){this.setCookie(t,"",-1)}clearCookie(){const t=document.cookie.split(";");for(let r=0;r<t.length;r++){const i=t[r],s=i.indexOf("="),o=s>-1?i.substr(0,s):i;document.cookie=o+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}setCookie(t,r,i){var s=new Date,o=s.getTime();s.setTime(o+1e3*i*60),document.cookie=`${t}=${r};expires=${s.toUTCString()};path=/`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wV=(()=>{class n extends ku{constructor(t,r,i){super(t,r),this.env=t,this.http=r,this.cookie=i}resendOTP(){const t=this.cookie.getCookie("session_id");return Pl(this.request(Fl.POST,"/webrtc/sent-otp",{session_id:t}))}verifyOTP(t){const r=this.cookie.getCookie("session_id");return Pl(this.request(Fl.POST,"/webrtc/verify-otp",{session_id:r,otp:t}))}}return n.\u0275fac=function(t){return new(t||n)(k(si),k(kl),k(Nl))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ei extends gt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}class KM{constructor(e){this.parameters={};for(const t in e)e.hasOwnProperty(t)&&this.setParam(t,e[t])}setParam(e,t){e&&(this.parameters[e.toLowerCase()]=typeof t>"u"||null===t?null:t.toString())}getParam(e){if(e)return this.parameters[e.toLowerCase()]}hasParam(e){return!(!e||void 0===this.parameters[e.toLowerCase()])}deleteParam(e){if(e=e.toLowerCase(),this.hasParam(e)){const t=this.parameters[e];return delete this.parameters[e],t}}clearParams(){this.parameters={}}}class Nr extends KM{constructor(e,t,r){super(r),this.uri=e,this._displayName=t}get friendlyName(){return this.displayName||this.uri.aor}get displayName(){return this._displayName}set displayName(e){this._displayName=e}clone(){return new Nr(this.uri.clone(),this._displayName,JSON.parse(JSON.stringify(this.parameters)))}toString(){let e=this.displayName||"0"===this.displayName?'"'+this.displayName+'" ':"";e+="<"+this.uri.toString()+">";for(const t in this.parameters)this.parameters.hasOwnProperty(t)&&(e+=";"+t,null!==this.parameters[t]&&(e+="="+this.parameters[t]));return e}}class ks extends KM{constructor(e="sip",t,r,i,s,o){if(super(s||{}),this.headers={},!r)throw new TypeError('missing or invalid "host" parameter');for(const l in o)o.hasOwnProperty(l)&&this.setHeader(l,o[l]);this.raw={scheme:e,user:t,host:r,port:i},this.normal={scheme:e.toLowerCase(),user:t,host:r.toLowerCase(),port:i}}get scheme(){return this.normal.scheme}set scheme(e){this.raw.scheme=e,this.normal.scheme=e.toLowerCase()}get user(){return this.normal.user}set user(e){this.normal.user=this.raw.user=e}get host(){return this.normal.host}set host(e){this.raw.host=e,this.normal.host=e.toLowerCase()}get aor(){return this.normal.user+"@"+this.normal.host}get port(){return this.normal.port}set port(e){this.normal.port=this.raw.port=e}setHeader(e,t){this.headers[this.headerize(e)]=t instanceof Array?t:[t]}getHeader(e){if(e)return this.headers[this.headerize(e)]}hasHeader(e){return!!e&&!!this.headers.hasOwnProperty(this.headerize(e))}deleteHeader(e){if(e=this.headerize(e),this.headers.hasOwnProperty(e)){const t=this.headers[e];return delete this.headers[e],t}}clearHeaders(){this.headers={}}clone(){return new ks(this._raw.scheme,this._raw.user||"",this._raw.host,this._raw.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))}toRaw(){return this._toString(this._raw)}toString(){return this._toString(this._normal)}get _normal(){return this.normal}get _raw(){return this.raw}_toString(e){let t=e.scheme+":";e.scheme.toLowerCase().match("^sips?$")||(t+="//"),e.user&&(t+=this.escapeUser(e.user)+"@"),t+=e.host,(e.port||0===e.port)&&(t+=":"+e.port);for(const i in this.parameters)this.parameters.hasOwnProperty(i)&&(t+=";"+i,null!==this.parameters[i]&&(t+="="+this.parameters[i]));const r=[];for(const i in this.headers)if(this.headers.hasOwnProperty(i))for(const s in this.headers[i])this.headers[i].hasOwnProperty(s)&&r.push(i+"="+this.headers[i][s]);return r.length>0&&(t+="?"+r.join("&")),t}escapeUser(e){let t;try{t=decodeURIComponent(e)}catch(r){throw r}return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}headerize(e){const t={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),i=r.length;let s="";for(let o=0;o<i;o++)0!==o&&(s+="-"),s+=r[o].charAt(0).toUpperCase()+r[o].substring(1);return t[s]&&(s=t[s]),s}}function YM(n,e){if(n.scheme!==e.scheme||n.user!==e.user||n.host!==e.host||n.port!==e.port)return!1;if(!function t(s,o){const l=Object.keys(s.parameters),u=Object.keys(o.parameters);return!(!l.filter(f=>u.includes(f)).every(f=>s.parameters[f]===o.parameters[f])||!["user","ttl","method","transport"].every(f=>s.hasParam(f)&&o.hasParam(f)||!s.hasParam(f)&&!o.hasParam(f))||!["maddr"].every(f=>s.hasParam(f)&&o.hasParam(f)||!s.hasParam(f)&&!o.hasParam(f)))}(n,e))return!1;const r=Object.keys(n.headers),i=Object.keys(e.headers);if(0!==r.length||0!==i.length){if(r.length!==i.length)return!1;const s=r.filter(o=>i.includes(o));if(s.length!==i.length||!s.every(o=>n.headers[o].length&&e.headers[o].length&&n.headers[o][0]===e.headers[o][0]))return!1}return!0}function bb(n,e,t){return t=t||" ",n.length>e?n:n+(t+=t.repeat(e-=n.length)).slice(0,e)}class Ll extends Error{constructor(e,t,r,i){super(),this.message=e,this.expected=t,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(this,Ll.prototype):this.__proto__=Ll.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Ll)}static buildMessage(e,t){function r(d){return d.charCodeAt(0).toString(16).toUpperCase()}function i(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,f=>"\\x0"+r(f)).replace(/[\x10-\x1F\x7F-\x9F]/g,f=>"\\x"+r(f))}function s(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,f=>"\\x0"+r(f)).replace(/[\x10-\x1F\x7F-\x9F]/g,f=>"\\x"+r(f))}function o(d){switch(d.type){case"literal":return'"'+i(d.text)+'"';case"class":const f=d.parts.map(p=>Array.isArray(p)?s(p[0])+"-"+s(p[1]):s(p));return"["+(d.inverted?"^":"")+f+"]";case"any":return"any character";case"end":return"end of input";case"other":return d.description}}return"Expected "+function l(d){const f=d.map(o);let p,y;if(f.sort(),f.length>0){for(p=1,y=1;p<f.length;p++)f[p-1]!==f[p]&&(f[y]=f[p],y++);f.length=y}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}(e)+" but "+function u(d){return d?'"'+i(d)+'"':"end of input"}(t)+" found."}format(e){let t="Error: "+this.message;if(this.location){let i,r=null;for(i=0;i<e.length;i++)if(e[i].source===this.location.source){r=e[i].text.split(/\r\n|\n|\r/g);break}let s=this.location.start,o=this.location.source+":"+s.line+":"+s.column;if(r){let l=this.location.end,u=bb("",s.line.toString().length," "),d=r[s.line-1],f=s.line===l.line?l.column:d.length+1;t+="\n --\x3e "+o+"\n"+u+" |\n"+s.line+" | "+d+"\n"+u+" | "+bb("",s.column-1," ")+bb("",f-s.column,"^")}else t+="\n at "+o}return t}}var Cn,n;(n=Cn=Cn||(Cn={})).parse=function e(i,s){const o={startRule:s};try{!function CV(n,e){const t={},r=(e=void 0!==e?e:{}).grammarSource,i={Contact:119,Name_Addr_Header:156,Record_Route:176,Request_Response:81,SIP_URI:45,Subscription_State:186,Supported:191,Require:182,Via:194,absoluteURI:84,Call_ID:118,Content_Disposition:130,Content_Length:135,Content_Type:136,CSeq:146,displayName:122,Event:149,From:151,host:52,Max_Forwards:154,Min_SE:213,Proxy_Authenticate:157,quoted_string:40,Refer_To:178,Replaces:179,Session_Expires:210,stun_URI:217,To:192,turn_URI:223,uuid:226,WWW_Authenticate:209,challenge:158,sipfrag:230,Referred_By:231};let s=119;const o=["\r\n",C("\r\n",!1),/^[0-9]/,W([["0","9"]],!1,!1),/^[a-zA-Z]/,W([["a","z"],["A","Z"]],!1,!1),/^[0-9a-fA-F]/,W([["0","9"],["a","f"],["A","F"]],!1,!1),/^[\0-\xFF]/,W([["\0","\xff"]],!1,!1),/^["]/,W(['"'],!1,!1)," ",C(" ",!1),"\t",C("\t",!1),/^[a-zA-Z0-9]/,W([["a","z"],["A","Z"],["0","9"]],!1,!1),";",C(";",!1),"/",C("/",!1),"?",C("?",!1),":",C(":",!1),"@",C("@",!1),"&",C("&",!1),"=",C("=",!1),"+",C("+",!1),"$",C("$",!1),",",C(",",!1),"-",C("-",!1),"_",C("_",!1),".",C(".",!1),"!",C("!",!1),"~",C("~",!1),"*",C("*",!1),"'",C("'",!1),"(",C("(",!1),")",C(")",!1),"%",C("%",!1),function(){return" "},function(){return":"},/^[!-~]/,W([["!","~"]],!1,!1),/^[\x80-\uFFFF]/,W([["\x80","\uffff"]],!1,!1),/^[\x80-\xBF]/,W([["\x80","\xbf"]],!1,!1),/^[a-f]/,W([["a","f"]],!1,!1),"`",C("`",!1),"<",C("<",!1),">",C(">",!1),"\\",C("\\",!1),"[",C("[",!1),"]",C("]",!1),"{",C("{",!1),"}",C("}",!1),function(){return"*"},function(){return"/"},function(){return"="},function(){return"("},function(){return")"},function(){return">"},function(){return"<"},function(){return","},function(){return";"},function(){return":"},function(){return'"'},/^[!-']/,W([["!","'"]],!1,!1),/^[*-[]/,W([["*","["]],!1,!1),/^[\]-~]/,W([["]","~"]],!1,!1),function(S){return S},/^[#-[]/,W([["#","["]],!1,!1),/^[\0-\t]/,W([["\0","\t"]],!1,!1),/^[\v-\f]/,W([["\v","\f"]],!1,!1),/^[\x0E-\x7F]/,W([["\x0e","\x7f"]],!1,!1),function(){(e=e||{data:{}}).data.uri=new ks(e.data.scheme,e.data.user,e.data.host,e.data.port),delete e.data.scheme,delete e.data.user,delete e.data.host,delete e.data.host_type,delete e.data.port},function(){(e=e||{data:{}}).data.uri=new ks(e.data.scheme,e.data.user,e.data.host,e.data.port,e.data.uri_params,e.data.uri_headers),delete e.data.scheme,delete e.data.user,delete e.data.host,delete e.data.host_type,delete e.data.port,delete e.data.uri_params,"SIP_URI"===e.startRule&&(e.data=e.data.uri)},"sips",C("sips",!0),"sip",C("sip",!0),function(S){(e=e||{data:{}}).data.scheme=S},function(){(e=e||{data:{}}).data.user=decodeURIComponent(I().slice(0,-1))},function(){(e=e||{data:{}}).data.password=I()},function(){return(e=e||{data:{}}).data.host=I(),e.data.host},function(){return(e=e||{data:{}}).data.host_type="domain",I()},/^[a-zA-Z0-9_\-]/,W([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),/^[a-zA-Z0-9\-]/,W([["a","z"],["A","Z"],["0","9"],"-"],!1,!1),function(){return(e=e||{data:{}}).data.host_type="IPv6",I()},"::",C("::",!1),function(){return(e=e||{data:{}}).data.host_type="IPv6",I()},function(){return(e=e||{data:{}}).data.host_type="IPv4",I()},"25",C("25",!1),/^[0-5]/,W([["0","5"]],!1,!1),"2",C("2",!1),/^[0-4]/,W([["0","4"]],!1,!1),"1",C("1",!1),/^[1-9]/,W([["1","9"]],!1,!1),function(S){return e=e||{data:{}},S=parseInt(S.join("")),e.data.port=S,S},"transport=",C("transport=",!0),"udp",C("udp",!0),"tcp",C("tcp",!0),"sctp",C("sctp",!0),"tls",C("tls",!0),function(S){(e=e||{data:{}}).data.uri_params||(e.data.uri_params={}),e.data.uri_params.transport=S.toLowerCase()},"user=",C("user=",!0),"phone",C("phone",!0),"ip",C("ip",!0),function(S){(e=e||{data:{}}).data.uri_params||(e.data.uri_params={}),e.data.uri_params.user=S.toLowerCase()},"method=",C("method=",!0),function(S){(e=e||{data:{}}).data.uri_params||(e.data.uri_params={}),e.data.uri_params.method=S},"ttl=",C("ttl=",!0),function(S){(e=e||{data:{}}).data.params||(e.data.params={}),e.data.params.ttl=S},"maddr=",C("maddr=",!0),function(S){(e=e||{data:{}}).data.uri_params||(e.data.uri_params={}),e.data.uri_params.maddr=S},"lr",C("lr",!0),function(){(e=e||{data:{}}).data.uri_params||(e.data.uri_params={}),e.data.uri_params.lr=void 0},function(S,R){(e=e||{data:{}}).data.uri_params||(e.data.uri_params={}),R=null===R?void 0:R[1],e.data.uri_params[S.toLowerCase()]=R},function(S,R){S=S.join("").toLowerCase(),R=R.join(""),(e=e||{data:{}}).data.uri_headers||(e.data.uri_headers={}),e.data.uri_headers[S]?e.data.uri_headers[S].push(R):e.data.uri_headers[S]=[R]},function(){"Refer_To"===(e=e||{data:{}}).startRule&&(e.data.uri=new ks(e.data.scheme,e.data.user,e.data.host,e.data.port,e.data.uri_params,e.data.uri_headers),delete e.data.scheme,delete e.data.user,delete e.data.host,delete e.data.host_type,delete e.data.port,delete e.data.uri_params)},"//",C("//",!1),function(){(e=e||{data:{}}).data.scheme=I()},C("SIP",!0),function(){(e=e||{data:{}}).data.sip_version=I()},"INVITE",C("INVITE",!1),"ACK",C("ACK",!1),"VXACH",C("VXACH",!1),"OPTIONS",C("OPTIONS",!1),"BYE",C("BYE",!1),"CANCEL",C("CANCEL",!1),"REGISTER",C("REGISTER",!1),"SUBSCRIBE",C("SUBSCRIBE",!1),"NOTIFY",C("NOTIFY",!1),"REFER",C("REFER",!1),"PUBLISH",C("PUBLISH",!1),function(){return(e=e||{data:{}}).data.method=I(),e.data.method},function(S){(e=e||{data:{}}).data.status_code=parseInt(S.join(""))},function(){(e=e||{data:{}}).data.reason_phrase=I()},function(){(e=e||{data:{}}).data=I()},function(){var S,R;for(R=(e=e||{data:{}}).data.multi_header.length,S=0;S<R;S++)if(null===e.data.multi_header[S].parsed){e.data=null;break}e.data=null!==e.data?e.data.multi_header:-1},function(){var S;(e=e||{data:{}}).data.multi_header||(e.data.multi_header=[]);try{S=new Nr(e.data.uri,e.data.displayName,e.data.params),delete e.data.uri,delete e.data.displayName,delete e.data.params}catch{S=null}e.data.multi_header.push({position:u,offset:L().start.offset,parsed:S})},function(S){'"'===(S=I().trim())[0]&&(S=S.substring(1,S.length-1)),(e=e||{data:{}}).data.displayName=S},"q",C("q",!0),function(S){(e=e||{data:{}}).data.params||(e.data.params={}),e.data.params.q=S},"expires",C("expires",!0),function(S){(e=e||{data:{}}).data.params||(e.data.params={}),e.data.params.expires=S},function(S){return parseInt(S.join(""))},"0",C("0",!1),function(){return parseFloat(I())},function(S,R){(e=e||{data:{}}).data.params||(e.data.params={}),R=null===R?void 0:R[1],e.data.params[S.toLowerCase()]=R},"render",C("render",!0),"session",C("session",!0),"icon",C("icon",!0),"alert",C("alert",!0),function(){"Content_Disposition"===(e=e||{data:{}}).startRule&&(e.data.type=I().toLowerCase())},"handling",C("handling",!0),"optional",C("optional",!0),"required",C("required",!0),function(S){(e=e||{data:{}}).data=parseInt(S.join(""))},function(){(e=e||{data:{}}).data=I()},"text",C("text",!0),"image",C("image",!0),"audio",C("audio",!0),"video",C("video",!0),"application",C("application",!0),"message",C("message",!0),"multipart",C("multipart",!0),"x-",C("x-",!0),function(S){(e=e||{data:{}}).data.value=parseInt(S.join(""))},function(S){(e=e||{data:{}}).data=S},function(S){(e=e||{data:{}}).data.event=S.toLowerCase()},function(){var S=(e=e||{data:{}}).data.tag;e.data=new Nr(e.data.uri,e.data.displayName,e.data.params),S&&e.data.setParam("tag",S)},"tag",C("tag",!0),function(S){(e=e||{data:{}}).data.tag=S},function(S){(e=e||{data:{}}).data=parseInt(S.join(""))},function(S){(e=e||{data:{}}).data=S},function(){(e=e||{data:{}}).data=new Nr(e.data.uri,e.data.displayName,e.data.params)},"digest",C("Digest",!0),"realm",C("realm",!0),function(S){(e=e||{data:{}}).data.realm=S},"domain",C("domain",!0),"nonce",C("nonce",!0),function(S){(e=e||{data:{}}).data.nonce=S},"opaque",C("opaque",!0),function(S){(e=e||{data:{}}).data.opaque=S},"stale",C("stale",!0),"true",C("true",!0),function(){(e=e||{data:{}}).data.stale=!0},"false",C("false",!0),function(){(e=e||{data:{}}).data.stale=!1},"algorithm",C("algorithm",!0),"md5",C("MD5",!0),"md5-sess",C("MD5-sess",!0),function(S){(e=e||{data:{}}).data.algorithm=S.toUpperCase()},"qop",C("qop",!0),"auth-int",C("auth-int",!0),"auth",C("auth",!0),function(S){(e=e||{data:{}}).data.qop||(e.data.qop=[]),e.data.qop.push(S.toLowerCase())},function(S){(e=e||{data:{}}).data.value=parseInt(S.join(""))},function(){var S,R;for(R=(e=e||{data:{}}).data.multi_header.length,S=0;S<R;S++)if(null===e.data.multi_header[S].parsed){e.data=null;break}e.data=null!==e.data?e.data.multi_header:-1},function(){var S;(e=e||{data:{}}).data.multi_header||(e.data.multi_header=[]);try{S=new Nr(e.data.uri,e.data.displayName,e.data.params),delete e.data.uri,delete e.data.displayName,delete e.data.params}catch{S=null}e.data.multi_header.push({position:u,offset:L().start.offset,parsed:S})},function(){(e=e||{data:{}}).data=new Nr(e.data.uri,e.data.displayName,e.data.params)},function(){(e=e||{data:{}}).data.replaces_from_tag&&e.data.replaces_to_tag||(e.data=-1)},function(){(e=e||{data:{}}).data={call_id:e.data}},"from-tag",C("from-tag",!0),function(S){(e=e||{data:{}}).data.replaces_from_tag=S},"to-tag",C("to-tag",!0),function(S){(e=e||{data:{}}).data.replaces_to_tag=S},"early-only",C("early-only",!0),function(){(e=e||{data:{}}).data.early_only=!0},function(S,R){return R},function(S,R){return function Ba(S,R){return[S].concat(R)}(S,R)},function(S){"Require"===(e=e||{data:{}}).startRule&&(e.data=S||[])},function(S){(e=e||{data:{}}).data.value=parseInt(S.join(""))},"active",C("active",!0),"pending",C("pending",!0),"terminated",C("terminated",!0),function(){(e=e||{data:{}}).data.state=I()},"reason",C("reason",!0),function(S){e=e||{data:{}},typeof S<"u"&&(e.data.reason=S)},function(S){e=e||{data:{}},typeof S<"u"&&(e.data.expires=S)},"retry_after",C("retry_after",!0),function(S){e=e||{data:{}},typeof S<"u"&&(e.data.retry_after=S)},"deactivated",C("deactivated",!0),"probation",C("probation",!0),"rejected",C("rejected",!0),"timeout",C("timeout",!0),"giveup",C("giveup",!0),"noresource",C("noresource",!0),"invariant",C("invariant",!0),function(S){"Supported"===(e=e||{data:{}}).startRule&&(e.data=S||[])},function(){var S=(e=e||{data:{}}).data.tag;e.data=new Nr(e.data.uri,e.data.displayName,e.data.params),S&&e.data.setParam("tag",S)},"ttl",C("ttl",!0),function(S){(e=e||{data:{}}).data.ttl=S},"maddr",C("maddr",!0),function(S){(e=e||{data:{}}).data.maddr=S},"received",C("received",!0),function(S){(e=e||{data:{}}).data.received=S},"branch",C("branch",!0),function(S){(e=e||{data:{}}).data.branch=S},"rport",C("rport",!0),function(S){e=e||{data:{}},typeof S<"u"&&(e.data.rport=S.join(""))},function(S){(e=e||{data:{}}).data.protocol=S},C("UDP",!0),C("TCP",!0),C("TLS",!0),C("SCTP",!0),function(S){(e=e||{data:{}}).data.transport=S},function(){(e=e||{data:{}}).data.host=I()},function(S){(e=e||{data:{}}).data.port=parseInt(S.join(""))},function(S){return parseInt(S.join(""))},function(S){"Session_Expires"===(e=e||{data:{}}).startRule&&(e.data.deltaSeconds=S)},"refresher",C("refresher",!1),"uas",C("uas",!1),"uac",C("uac",!1),function(S){"Session_Expires"===(e=e||{data:{}}).startRule&&(e.data.refresher=S)},function(S){"Min_SE"===(e=e||{data:{}}).startRule&&(e.data=S)},"stuns",C("stuns",!0),"stun",C("stun",!0),function(S){(e=e||{data:{}}).data.scheme=S},function(S){(e=e||{data:{}}).data.host=S},"?transport=",C("?transport=",!1),"turns",C("turns",!0),"turn",C("turn",!0),function(S){(e=e||{data:{}}).data.transport=S},function(){(e=e||{data:{}}).data=I()},"Referred-By",C("Referred-By",!1),"b",C("b",!1),"cid",C("cid",!1)],l=[D('2 ""6 7!'),D('4"""5!7#'),D('4$""5!7%'),D('4&""5!7\''),D(";'.# &;("),D('4(""5!7)'),D('4*""5!7+'),D('2,""6,7-'),D('2.""6.7/'),D('40""5!71'),D('22""6273.\x89 &24""6475.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),D(";).# &;,"),D('2F""6F7G.} &2H""6H7I.q &2J""6J7K.e &2L""6L7M.Y &2N""6N7O.M &2P""6P7Q.A &2R""6R7S.5 &2T""6T7U.) &2V""6V7W'),D('%%2X""6X7Y/5#;#/,$;#/#$+#)(#\'#("\'#&\'#/"!&,)'),D('%%$;$0#*;$&/,#; /#$+")("\'#&\'#." &"/=#$;$/&#0#*;$&&&#/\'$8":Z" )("\'#&\'#'),D(';.." &"'),D("%$;'.# &;(0)*;'.# &;(&/?#28\"\"6879/0$;//'$8#:[# )(#'#(\"'#&'#"),D('%%$;2/&#0#*;2&&&#/g#$%$;.0#*;.&/,#;2/#$+")("\'#&\'#0=*%$;.0#*;.&/,#;2/#$+")("\'#&\'#&/#$+")("\'#&\'#/"!&,)'),D('4\\""5!7].# &;3'),D('4^""5!7_'),D('4`""5!7a'),D(';!.) &4b""5!7c'),D('%$;).\x95 &2F""6F7G.\x89 &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/\x9e#0\x9b*;).\x95 &2F""6F7G.\x89 &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)'),D('%$;).\x89 &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/\x92#0\x8f*;).\x89 &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)'),D('2T""6T7U.\xe3 &2V""6V7W.\xd7 &2f""6f7g.\xcb &2h""6h7i.\xbf &2:""6:7;.\xb3 &2D""6D7E.\xa7 &22""6273.\x9b &28""6879.\x8f &2j""6j7k.\x83 &;&.} &24""6475.q &2l""6l7m.e &2n""6n7o.Y &26""6677.M &2>""6>7?.A &2p""6p7q.5 &2r""6r7s.) &;\'.# &;('),D('%$;).\u012b &2F""6F7G.\u011f &2J""6J7K.\u0113 &2L""6L7M.\u0107 &2X""6X7Y.\xfb &2P""6P7Q.\xef &2H""6H7I.\xe3 &2@""6@7A.\xd7 &2d""6d7e.\xcb &2R""6R7S.\xbf &2N""6N7O.\xb3 &2T""6T7U.\xa7 &2V""6V7W.\x9b &2f""6f7g.\x8f &2h""6h7i.\x83 &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s/\u0134#0\u0131*;).\u012b &2F""6F7G.\u011f &2J""6J7K.\u0113 &2L""6L7M.\u0107 &2X""6X7Y.\xfb &2P""6P7Q.\xef &2H""6H7I.\xe3 &2@""6@7A.\xd7 &2d""6d7e.\xcb &2R""6R7S.\xbf &2N""6N7O.\xb3 &2T""6T7U.\xa7 &2V""6V7W.\x9b &2f""6f7g.\x8f &2h""6h7i.\x83 &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s&&&#/"!&,)'),D("%;//?#2P\"\"6P7Q/0$;//'$8#:t# )(#'#(\"'#&'#"),D("%;//?#24\"\"6475/0$;//'$8#:u# )(#'#(\"'#&'#"),D("%;//?#2>\"\"6>7?/0$;//'$8#:v# )(#'#(\"'#&'#"),D("%;//?#2T\"\"6T7U/0$;//'$8#:w# )(#'#(\"'#&'#"),D("%;//?#2V\"\"6V7W/0$;//'$8#:x# )(#'#(\"'#&'#"),D('%2h""6h7i/0#;//\'$8":y" )("\'#&\'#'),D('%;//6#2f""6f7g/\'$8":z" )("\'#&\'#'),D("%;//?#2D\"\"6D7E/0$;//'$8#:{# )(#'#(\"'#&'#"),D("%;//?#22\"\"6273/0$;//'$8#:|# )(#'#(\"'#&'#"),D("%;//?#28\"\"6879/0$;//'$8#:}# )(#'#(\"'#&'#"),D("%;//0#;&/'$8\":~\" )(\"'#&'#"),D("%;&/0#;//'$8\":~\" )(\"'#&'#"),D("%;=/T#$;G.) &;K.# &;F0/*;G.) &;K.# &;F&/,$;>/#$+#)(#'#(\"'#&'#"),D('4\x7f""5!7\x80.A &4\x81""5!7\x82.5 &4\x83""5!7\x84.) &;3.# &;.'),D("%%;//Q#;&/H$$;J.# &;K0)*;J.# &;K&/,$;&/#$+$)($'#(#'#(\"'#&'#/\"!&,)"),D("%;//]#;&/T$%$;J.# &;K0)*;J.# &;K&/\"!&,)/1$;&/($8$:\x85$!!)($'#(#'#(\"'#&'#"),D(';..G &2L""6L7M.; &4\x86""5!7\x87./ &4\x83""5!7\x84.# &;3'),D('%2j""6j7k/J#4\x88""5!7\x89.5 &4\x8a""5!7\x8b.) &4\x8c""5!7\x8d/#$+")("\'#&\'#'),D("%;N/M#28\"\"6879/>$;O.\" &\"/0$;S/'$8$:\x8e$ )($'#(#'#(\"'#&'#"),D("%;N/d#28\"\"6879/U$;O.\" &\"/G$;S/>$;_/5$;l.\" &\"/'$8&:\x8f& )(&'#(%'#($'#(#'#(\"'#&'#"),D('%3\x90""5$7\x91.) &3\x92""5#7\x93/\' 8!:\x94!! )'),D('%;P/]#%28""6879/,#;R/#$+")("\'#&\'#." &"/6$2:""6:7;/\'$8#:\x95# )(#\'#("\'#&\'#'),D("$;+.) &;-.# &;Q/2#0/*;+.) &;-.# &;Q&&&#"),D('2<""6<7=.q &2>""6>7?.e &2@""6@7A.Y &2B""6B7C.M &2D""6D7E.A &22""6273.5 &26""6677.) &24""6475'),D('%$;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E0e*;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E&/& 8!:\x96! )'),D('%;T/J#%28""6879/,#;^/#$+")("\'#&\'#." &"/#$+")("\'#&\'#'),D("%;U.) &;\\.# &;X/& 8!:\x97! )"),D('%$%;V/2#2J""6J7K/#$+")("\'#&\'#0<*%;V/2#2J""6J7K/#$+")("\'#&\'#&/D#;W/;$2J""6J7K." &"/\'$8#:\x98# )(#\'#("\'#&\'#'),D('$4\x99""5!7\x9a/,#0)*4\x99""5!7\x9a&&&#'),D('%4$""5!7%/?#$4\x9b""5!7\x9c0)*4\x9b""5!7\x9c&/#$+")("\'#&\'#'),D('%2l""6l7m/?#;Y/6$2n""6n7o/\'$8#:\x9d# )(#\'#("\'#&\'#'),D('%%;Z/\xb3#28""6879/\xa4$;Z/\x9b$28""6879/\x8c$;Z/\x83$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+-)(-\'#(,\'#(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u0790 &%2\x9e""6\x9e7\x9f/\xa4#;Z/\x9b$28""6879/\x8c$;Z/\x83$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+,)(,\'#(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u06f9 &%2\x9e""6\x9e7\x9f/\x8c#;Z/\x83$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u067a &%2\x9e""6\x9e7\x9f/t#;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u0613 &%2\x9e""6\x9e7\x9f/\\#;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+&)(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u05c4 &%2\x9e""6\x9e7\x9f/D#;Z/;$28""6879/,$;[/#$+$)($\'#(#\'#("\'#&\'#.\u058d &%2\x9e""6\x9e7\x9f/,#;[/#$+")("\'#&\'#.\u056e &%2\x9e""6\x9e7\x9f/,#;Z/#$+")("\'#&\'#.\u054f &%;Z/\x9b#2\x9e""6\x9e7\x9f/\x8c$;Z/\x83$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$++)(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u04c7 &%;Z/\xaa#%28""6879/,#;Z/#$+")("\'#&\'#." &"/\x83$2\x9e""6\x9e7\x9f/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u0430 &%;Z/\xb9#%28""6879/,#;Z/#$+")("\'#&\'#." &"/\x92$%28""6879/,#;Z/#$+")("\'#&\'#." &"/k$2\x9e""6\x9e7\x9f/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+))()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u038a &%;Z/\xc8#%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xa1$%28""6879/,#;Z/#$+")("\'#&\'#." &"/z$%28""6879/,#;Z/#$+")("\'#&\'#." &"/S$2\x9e""6\x9e7\x9f/D$;Z/;$28""6879/,$;[/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u02d5 &%;Z/\xd7#%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xb0$%28""6879/,#;Z/#$+")("\'#&\'#." &"/\x89$%28""6879/,#;Z/#$+")("\'#&\'#." &"/b$%28""6879/,#;Z/#$+")("\'#&\'#." &"/;$2\x9e""6\x9e7\x9f/,$;[/#$+\')(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u0211 &%;Z/\xfe#%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xd7$%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xb0$%28""6879/,#;Z/#$+")("\'#&\'#." &"/\x89$%28""6879/,#;Z/#$+")("\'#&\'#." &"/b$%28""6879/,#;Z/#$+")("\'#&\'#." &"/;$2\x9e""6\x9e7\x9f/,$;Z/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u0126 &%;Z/\u011c#%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xf5$%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xce$%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xa7$%28""6879/,#;Z/#$+")("\'#&\'#." &"/\x80$%28""6879/,#;Z/#$+")("\'#&\'#." &"/Y$%28""6879/,#;Z/#$+")("\'#&\'#." &"/2$2\x9e""6\x9e7\x9f/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#/& 8!:\xa0! )'),D('%;#/M#;#." &"/?$;#." &"/1$;#." &"/#$+$)($\'#(#\'#("\'#&\'#'),D("%;Z/;#28\"\"6879/,$;Z/#$+#)(#'#(\"'#&'#.# &;\\"),D("%;]/o#2J\"\"6J7K/`$;]/W$2J\"\"6J7K/H$;]/?$2J\"\"6J7K/0$;]/'$8':\xa1' )(''#(&'#(%'#($'#(#'#(\"'#&'#"),D('%2\xa2""6\xa27\xa3/2#4\xa4""5!7\xa5/#$+")("\'#&\'#.\x98 &%2\xa6""6\xa67\xa7/;#4\xa8""5!7\xa9/,$;!/#$+#)(#\'#("\'#&\'#.j &%2\xaa""6\xaa7\xab/5#;!/,$;!/#$+#)(#\'#("\'#&\'#.B &%4\xac""5!7\xad/,#;!/#$+")("\'#&\'#.# &;!'),D('%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%\'#($\'#(#\'#("\'#&\'#/\' 8!:\xae!! )'),D('$%22""6273/,#;`/#$+")("\'#&\'#0<*%22""6273/,#;`/#$+")("\'#&\'#&'),D(";a.A &;b.; &;c.5 &;d./ &;e.) &;f.# &;g"),D('%3\xaf""5*7\xb0/a#3\xb1""5#7\xb2.G &3\xb3""5#7\xb4.; &3\xb5""5$7\xb6./ &3\xb7""5#7\xb8.# &;6/($8":\xb9"! )("\'#&\'#'),D('%3\xba""5%7\xbb/I#3\xbc""5%7\xbd./ &3\xbe""5"7\xbf.# &;6/($8":\xc0"! )("\'#&\'#'),D('%3\xc1""5\'7\xc2/1#;\x90/($8":\xc3"! )("\'#&\'#'),D('%3\xc4""5$7\xc5/1#;\xf0/($8":\xc6"! )("\'#&\'#'),D('%3\xc7""5&7\xc8/1#;T/($8":\xc9"! )("\'#&\'#'),D('%3\xca""5"7\xcb/N#%2>""6>7?/,#;6/#$+")("\'#&\'#." &"/\'$8":\xcc" )("\'#&\'#'),D('%;h/P#%2>""6>7?/,#;i/#$+")("\'#&\'#." &"/)$8":\xcd""! )("\'#&\'#'),D('%$;j/&#0#*;j&&&#/"!&,)'),D('%$;j/&#0#*;j&&&#/"!&,)'),D(";k.) &;+.# &;-"),D('2l""6l7m.e &2n""6n7o.Y &24""6475.M &28""6879.A &2<""6<7=.5 &2@""6@7A.) &2B""6B7C'),D('%26""6677/n#;m/e$$%2<""6<7=/,#;m/#$+")("\'#&\'#0<*%2<""6<7=/,#;m/#$+")("\'#&\'#&/#$+#)(#\'#("\'#&\'#'),D('%;n/A#2>""6>7?/2$;o/)$8#:\xce#"" )(#\'#("\'#&\'#'),D("$;p.) &;+.# &;-/2#0/*;p.) &;+.# &;-&&&#"),D("$;p.) &;+.# &;-0/*;p.) &;+.# &;-&"),D('2l""6l7m.e &2n""6n7o.Y &24""6475.M &26""6677.A &28""6879.5 &2@""6@7A.) &2B""6B7C'),D(";\x91.# &;r"),D("%;\x90/G#;'/>$;s/5$;'/,$;\x84/#$+%)(%'#($'#(#'#(\"'#&'#"),D(";M.# &;t"),D("%;\x7f/E#28\"\"6879/6$;u.# &;x/'$8#:\xcf# )(#'#(\"'#&'#"),D('%;v.# &;w/J#%26""6677/,#;\x83/#$+")("\'#&\'#." &"/#$+")("\'#&\'#'),D('%2\xd0""6\xd07\xd1/:#;\x80/1$;w." &"/#$+#)(#\'#("\'#&\'#'),D('%24""6475/,#;{/#$+")("\'#&\'#'),D("%;z/3#$;y0#*;y&/#$+\")(\"'#&'#"),D(";*.) &;+.# &;-"),D(';+.\x8f &;-.\x89 &22""6273.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),D('%;|/e#$%24""6475/,#;|/#$+")("\'#&\'#0<*%24""6475/,#;|/#$+")("\'#&\'#&/#$+")("\'#&\'#'),D('%$;~0#*;~&/e#$%22""6273/,#;}/#$+")("\'#&\'#0<*%22""6273/,#;}/#$+")("\'#&\'#&/#$+")("\'#&\'#'),D("$;~0#*;~&"),D(';+.w &;-.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),D('%%;"/\x87#$;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K0M*;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K&/#$+")("\'#&\'#/& 8!:\xd2! )'),D(";\x81.# &;\x82"),D('%%;O/2#2:""6:7;/#$+")("\'#&\'#." &"/,#;S/#$+")("\'#&\'#." &"'),D('$;+.\x83 &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A/\x8c#0\x89*;+.\x83 &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A&&&#'),D("$;y0#*;y&"),D('%3\x92""5#7\xd3/q#24""6475/b$$;!/&#0#*;!&&&#/L$2J""6J7K/=$$;!/&#0#*;!&&&#/\'$8%:\xd4% )(%\'#($\'#(#\'#("\'#&\'#'),D('2\xd5""6\xd57\xd6'),D('2\xd7""6\xd77\xd8'),D('2\xd9""6\xd97\xda'),D('2\xdb""6\xdb7\xdc'),D('2\xdd""6\xdd7\xde'),D('2\xdf""6\xdf7\xe0'),D('2\xe1""6\xe17\xe2'),D('2\xe3""6\xe37\xe4'),D('2\xe5""6\xe57\xe6'),D('2\xe7""6\xe77\xe8'),D('2\xe9""6\xe97\xea'),D("%;\x85.Y &;\x86.S &;\x88.M &;\x89.G &;\x8a.A &;\x8b.; &;\x8c.5 &;\x8f./ &;\x8d.) &;\x8e.# &;6/& 8!:\xeb! )"),D("%;\x84/G#;'/>$;\x92/5$;'/,$;\x94/#$+%)(%'#($'#(#'#(\"'#&'#"),D("%;\x93/' 8!:\xec!! )"),D("%;!/5#;!/,$;!/#$+#)(#'#(\"'#&'#"),D("%$;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(0G*;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(&/& 8!:\xed! )"),D("%;\xb6/Y#$%;A/,#;\xb6/#$+\")(\"'#&'#06*%;A/,#;\xb6/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),D('%;9/N#%2:""6:7;/,#;9/#$+")("\'#&\'#." &"/\'$8":\xee" )("\'#&\'#'),D("%;:.c &%;\x98/Y#$%;A/,#;\x98/#$+\")(\"'#&'#06*%;A/,#;\x98/#$+\")(\"'#&'#&/#$+\")(\"'#&'#/& 8!:\xef! )"),D("%;L.# &;\x99/]#$%;B/,#;\x9b/#$+\")(\"'#&'#06*%;B/,#;\x9b/#$+\")(\"'#&'#&/'$8\":\xf0\" )(\"'#&'#"),D("%;\x9a.\" &\"/>#;@/5$;M/,$;?/#$+$)($'#(#'#(\"'#&'#"),D("%%;6/Y#$%;./,#;6/#$+\")(\"'#&'#06*%;./,#;6/#$+\")(\"'#&'#&/#$+\")(\"'#&'#.# &;H/' 8!:\xf1!! )"),D(";\x9c.) &;\x9d.# &;\xa0"),D("%3\xf2\"\"5!7\xf3/:#;</1$;\x9f/($8#:\xf4#! )(#'#(\"'#&'#"),D("%3\xf5\"\"5'7\xf6/:#;</1$;\x9e/($8#:\xf7#! )(#'#(\"'#&'#"),D("%$;!/&#0#*;!&&&#/' 8!:\xf8!! )"),D('%2\xf9""6\xf97\xfa/o#%2J""6J7K/M#;!." &"/?$;!." &"/1$;!." &"/#$+$)($\'#(#\'#("\'#&\'#." &"/\'$8":\xfb" )("\'#&\'#'),D('%;6/J#%;</,#;\xa1/#$+")("\'#&\'#." &"/)$8":\xfc""! )("\'#&\'#'),D(";6.) &;T.# &;H"),D("%;\xa3/Y#$%;B/,#;\xa4/#$+\")(\"'#&'#06*%;B/,#;\xa4/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),D('%3\xfd""5&7\xfe.G &3\xff""5\'7\u0100.; &3\u0101""5$7\u0102./ &3\u0103""5%7\u0104.# &;6/& 8!:\u0105! )'),D(";\xa5.# &;\xa0"),D('%3\u0106""5(7\u0107/M#;</D$3\u0108""5(7\u0109./ &3\u010a""5(7\u010b.# &;6/#$+#)(#\'#("\'#&\'#'),D("%;6/Y#$%;A/,#;6/#$+\")(\"'#&'#06*%;A/,#;6/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),D("%$;!/&#0#*;!&&&#/' 8!:\u010c!! )"),D("%;\xa9/& 8!:\u010d! )"),D("%;\xaa/k#;;/b$;\xaf/Y$$%;B/,#;\xb0/#$+\")(\"'#&'#06*%;B/,#;\xb0/#$+\")(\"'#&'#&/#$+$)($'#(#'#(\"'#&'#"),D(";\xab.# &;\xac"),D('3\u010e""5$7\u010f.S &3\u0110""5%7\u0111.G &3\u0112""5%7\u0113.; &3\u0114""5%7\u0115./ &3\u0116""5+7\u0117.# &;\xad'),D('3\u0118""5\'7\u0119./ &3\u011a""5)7\u011b.# &;\xad'),D(";6.# &;\xae"),D('%3\u011c""5"7\u011d/,#;6/#$+")("\'#&\'#'),D(";\xad.# &;6"),D("%;6/5#;</,$;\xb1/#$+#)(#'#(\"'#&'#"),D(";6.# &;H"),D("%;\xb3/5#;./,$;\x90/#$+#)(#'#(\"'#&'#"),D("%$;!/&#0#*;!&&&#/' 8!:\u011e!! )"),D("%;\x9e/' 8!:\u011f!! )"),D('%;\xb6/^#$%;B/,#;\xa0/#$+")("\'#&\'#06*%;B/,#;\xa0/#$+")("\'#&\'#&/($8":\u0120"!!)("\'#&\'#'),D('%%;7/e#$%2J""6J7K/,#;7/#$+")("\'#&\'#0<*%2J""6J7K/,#;7/#$+")("\'#&\'#&/#$+")("\'#&\'#/"!&,)'),D("%;L.# &;\x99/]#$%;B/,#;\xb8/#$+\")(\"'#&'#06*%;B/,#;\xb8/#$+\")(\"'#&'#&/'$8\":\u0121\" )(\"'#&'#"),D(";\xb9.# &;\xa0"),D("%3\u0122\"\"5#7\u0123/:#;</1$;6/($8#:\u0124#! )(#'#(\"'#&'#"),D("%$;!/&#0#*;!&&&#/' 8!:\u0125!! )"),D("%;\x9e/' 8!:\u0126!! )"),D("%$;\x9a0#*;\x9a&/x#;@/o$;M/f$;?/]$$%;B/,#;\xa0/#$+\")(\"'#&'#06*%;B/,#;\xa0/#$+\")(\"'#&'#&/'$8%:\u0127% )(%'#($'#(#'#(\"'#&'#"),D(";\xbe"),D("%3\u0128\"\"5&7\u0129/k#;./b$;\xc1/Y$$%;A/,#;\xc1/#$+\")(\"'#&'#06*%;A/,#;\xc1/#$+\")(\"'#&'#&/#$+$)($'#(#'#(\"'#&'#.# &;\xbf"),D("%;6/k#;./b$;\xc0/Y$$%;A/,#;\xc0/#$+\")(\"'#&'#06*%;A/,#;\xc0/#$+\")(\"'#&'#&/#$+$)($'#(#'#(\"'#&'#"),D("%;6/;#;</2$;6.# &;H/#$+#)(#'#(\"'#&'#"),D(";\xc2.G &;\xc4.A &;\xc6.; &;\xc8.5 &;\xc9./ &;\xca.) &;\xcb.# &;\xc0"),D("%3\u012a\"\"5%7\u012b/5#;</,$;\xc3/#$+#)(#'#(\"'#&'#"),D("%;I/' 8!:\u012c!! )"),D("%3\u012d\"\"5&7\u012e/\x97#;</\x8e$;D/\x85$;\xc5/|$$%$;'/&#0#*;'&&&#/,#;\xc5/#$+\")(\"'#&'#0C*%$;'/&#0#*;'&&&#/,#;\xc5/#$+\")(\"'#&'#&/,$;E/#$+&)(&'#(%'#($'#(#'#(\"'#&'#"),D(";t.# &;w"),D("%3\u012f\"\"5%7\u0130/5#;</,$;\xc7/#$+#)(#'#(\"'#&'#"),D("%;I/' 8!:\u0131!! )"),D("%3\u0132\"\"5&7\u0133/:#;</1$;I/($8#:\u0134#! )(#'#(\"'#&'#"),D('%3\u0135""5%7\u0136/]#;</T$%3\u0137""5$7\u0138/& 8!:\u0139! ).4 &%3\u013a""5%7\u013b/& 8!:\u013c! )/#$+#)(#\'#("\'#&\'#'),D('%3\u013d""5)7\u013e/R#;</I$3\u013f""5#7\u0140./ &3\u0141""5(7\u0142.# &;6/($8#:\u0143#! )(#\'#("\'#&\'#'),D('%3\u0144""5#7\u0145/\x93#;</\x8a$;D/\x81$%;\xcc/e#$%2D""6D7E/,#;\xcc/#$+")("\'#&\'#0<*%2D""6D7E/,#;\xcc/#$+")("\'#&\'#&/#$+")("\'#&\'#/,$;E/#$+%)(%\'#($\'#(#\'#("\'#&\'#'),D('%3\u0146""5(7\u0147./ &3\u0148""5$7\u0149.# &;6/\' 8!:\u014a!! )'),D("%;6/Y#$%;A/,#;6/#$+\")(\"'#&'#06*%;A/,#;6/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),D("%;\xcf/G#;./>$;\xcf/5$;./,$;\x90/#$+%)(%'#($'#(#'#(\"'#&'#"),D("%$;!/&#0#*;!&&&#/' 8!:\u014b!! )"),D("%;\xd1/]#$%;A/,#;\xd1/#$+\")(\"'#&'#06*%;A/,#;\xd1/#$+\")(\"'#&'#&/'$8\":\u014c\" )(\"'#&'#"),D("%;\x99/]#$%;B/,#;\xa0/#$+\")(\"'#&'#06*%;B/,#;\xa0/#$+\")(\"'#&'#&/'$8\":\u014d\" )(\"'#&'#"),D('%;L.O &;\x99.I &%;@." &"/:#;t/1$;?." &"/#$+#)(#\'#("\'#&\'#/]#$%;B/,#;\xa0/#$+")("\'#&\'#06*%;B/,#;\xa0/#$+")("\'#&\'#&/\'$8":\u014e" )("\'#&\'#'),D("%;\xd4/]#$%;B/,#;\xd5/#$+\")(\"'#&'#06*%;B/,#;\xd5/#$+\")(\"'#&'#&/'$8\":\u014f\" )(\"'#&'#"),D("%;\x96/& 8!:\u0150! )"),D('%3\u0151""5(7\u0152/:#;</1$;6/($8#:\u0153#! )(#\'#("\'#&\'#.g &%3\u0154""5&7\u0155/:#;</1$;6/($8#:\u0156#! )(#\'#("\'#&\'#.: &%3\u0157""5*7\u0158/& 8!:\u0159! ).# &;\xa0'),D('%%;6/k#$%;A/2#;6/)$8":\u015a""$ )("\'#&\'#0<*%;A/2#;6/)$8":\u015a""$ )("\'#&\'#&/)$8":\u015b""! )("\'#&\'#." &"/\' 8!:\u015c!! )'),D("%;\xd8/Y#$%;A/,#;\xd8/#$+\")(\"'#&'#06*%;A/,#;\xd8/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),D("%;\x99/Y#$%;B/,#;\xa0/#$+\")(\"'#&'#06*%;B/,#;\xa0/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),D("%$;!/&#0#*;!&&&#/' 8!:\u015d!! )"),D("%;\xdb/Y#$%;B/,#;\xdc/#$+\")(\"'#&'#06*%;B/,#;\xdc/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),D('%3\u015e""5&7\u015f.; &3\u0160""5\'7\u0161./ &3\u0162""5*7\u0163.# &;6/& 8!:\u0164! )'),D("%3\u0165\"\"5&7\u0166/:#;</1$;\xdd/($8#:\u0167#! )(#'#(\"'#&'#.} &%3\xf5\"\"5'7\xf6/:#;</1$;\x9e/($8#:\u0168#! )(#'#(\"'#&'#.P &%3\u0169\"\"5+7\u016a/:#;</1$;\x9e/($8#:\u016b#! )(#'#(\"'#&'#.# &;\xa0"),D('3\u016c""5+7\u016d.k &3\u016e""5)7\u016f._ &3\u0170""5(7\u0171.S &3\u0172""5\'7\u0173.G &3\u0174""5&7\u0175.; &3\u0176""5*7\u0177./ &3\u0178""5)7\u0179.# &;6'),D(';1." &"'),D('%%;6/k#$%;A/2#;6/)$8":\u015a""$ )("\'#&\'#0<*%;A/2#;6/)$8":\u015a""$ )("\'#&\'#&/)$8":\u015b""! )("\'#&\'#." &"/\' 8!:\u017a!! )'),D("%;L.# &;\x99/]#$%;B/,#;\xe1/#$+\")(\"'#&'#06*%;B/,#;\xe1/#$+\")(\"'#&'#&/'$8\":\u017b\" )(\"'#&'#"),D(";\xb9.# &;\xa0"),D("%;\xe3/Y#$%;A/,#;\xe3/#$+\")(\"'#&'#06*%;A/,#;\xe3/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),D("%;\xea/k#;./b$;\xed/Y$$%;B/,#;\xe4/#$+\")(\"'#&'#06*%;B/,#;\xe4/#$+\")(\"'#&'#&/#$+$)($'#(#'#(\"'#&'#"),D(";\xe5.; &;\xe6.5 &;\xe7./ &;\xe8.) &;\xe9.# &;\xa0"),D("%3\u017c\"\"5#7\u017d/:#;</1$;\xf0/($8#:\u017e#! )(#'#(\"'#&'#"),D("%3\u017f\"\"5%7\u0180/:#;</1$;T/($8#:\u0181#! )(#'#(\"'#&'#"),D("%3\u0182\"\"5(7\u0183/F#;</=$;\\.) &;Y.# &;X/($8#:\u0184#! )(#'#(\"'#&'#"),D("%3\u0185\"\"5&7\u0186/:#;</1$;6/($8#:\u0187#! )(#'#(\"'#&'#"),D("%3\u0188\"\"5%7\u0189/A#;</8$$;!0#*;!&/($8#:\u018a#! )(#'#(\"'#&'#"),D("%;\xeb/G#;;/>$;6/5$;;/,$;\xec/#$+%)(%'#($'#(#'#(\"'#&'#"),D('%3\x92""5#7\xd3.# &;6/\' 8!:\u018b!! )'),D('%3\xb1""5#7\u018c.G &3\xb3""5#7\u018d.; &3\xb7""5#7\u018e./ &3\xb5""5$7\u018f.# &;6/\' 8!:\u0190!! )'),D('%;\xee/D#%;C/,#;\xef/#$+")("\'#&\'#." &"/#$+")("\'#&\'#'),D("%;U.) &;\\.# &;X/& 8!:\u0191! )"),D('%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%\'#($\'#(#\'#("\'#&\'#/\' 8!:\u0192!! )'),D('%%;!/?#;!." &"/1$;!." &"/#$+#)(#\'#("\'#&\'#/\' 8!:\u0193!! )'),D(";\xbe"),D('%;\x9e/^#$%;B/,#;\xf3/#$+")("\'#&\'#06*%;B/,#;\xf3/#$+")("\'#&\'#&/($8":\u0194"!!)("\'#&\'#'),D(";\xf4.# &;\xa0"),D('%2\u0195""6\u01957\u0196/L#;</C$2\u0197""6\u01977\u0198.) &2\u0199""6\u01997\u019a/($8#:\u019b#! )(#\'#("\'#&\'#'),D('%;\x9e/^#$%;B/,#;\xa0/#$+")("\'#&\'#06*%;B/,#;\xa0/#$+")("\'#&\'#&/($8":\u019c"!!)("\'#&\'#'),D("%;6/5#;0/,$;\xf7/#$+#)(#'#(\"'#&'#"),D("$;2.) &;4.# &;.0/*;2.) &;4.# &;.&"),D("$;%0#*;%&"),D("%;\xfa/;#28\"\"6879/,$;\xfb/#$+#)(#'#(\"'#&'#"),D('%3\u019d""5%7\u019e.) &3\u019f""5$7\u01a0/\' 8!:\u01a1!! )'),D('%;\xfc/J#%28""6879/,#;^/#$+")("\'#&\'#." &"/#$+")("\'#&\'#'),D("%;\\.) &;X.# &;\x82/' 8!:\u01a2!! )"),D(';".S &;!.M &2F""6F7G.A &2J""6J7K.5 &2H""6H7I.) &2N""6N7O'),D('2L""6L7M.\x95 &2B""6B7C.\x89 &2<""6<7=.} &2R""6R7S.q &2T""6T7U.e &2V""6V7W.Y &2P""6P7Q.M &2@""6@7A.A &2D""6D7E.5 &22""6273.) &2>""6>7?'),D('%;\u0100/b#28""6879/S$;\xfb/J$%2\u01a3""6\u01a37\u01a4/,#;\xec/#$+")("\'#&\'#." &"/#$+$)($\'#(#\'#("\'#&\'#'),D('%3\u01a5""5%7\u01a6.) &3\u01a7""5$7\u01a8/\' 8!:\u01a1!! )'),D('%3\xb1""5#7\xb2.6 &3\xb3""5#7\xb4.* &$;+0#*;+&/\' 8!:\u01a9!! )'),D("%;\u0104/\x87#2F\"\"6F7G/x$;\u0103/o$2F\"\"6F7G/`$;\u0103/W$2F\"\"6F7G/H$;\u0103/?$2F\"\"6F7G/0$;\u0105/'$8):\u01aa) )()'#(('#(''#(&'#(%'#($'#(#'#(\"'#&'#"),D("%;#/>#;#/5$;#/,$;#/#$+$)($'#(#'#(\"'#&'#"),D("%;\u0103/,#;\u0103/#$+\")(\"'#&'#"),D("%;\u0103/5#;\u0103/,$;\u0103/#$+#)(#'#(\"'#&'#"),D("%;q/T#$;m0#*;m&/D$%; /,#;\xf8/#$+\")(\"'#&'#.\" &\"/#$+#)(#'#(\"'#&'#"),D('%2\u01ab""6\u01ab7\u01ac.) &2\u01ad""6\u01ad7\u01ae/w#;0/n$;\u0108/e$$%;B/2#;\u0109.# &;\xa0/#$+")("\'#&\'#0<*%;B/2#;\u0109.# &;\xa0/#$+")("\'#&\'#&/#$+$)($\'#(#\'#("\'#&\'#'),D(";\x99.# &;L"),D("%2\u01af\"\"6\u01af7\u01b0/5#;</,$;\u010a/#$+#)(#'#(\"'#&'#"),D("%;D/S#;,/J$2:\"\"6:7;/;$;,.# &;T/,$;E/#$+%)(%'#($'#(#'#(\"'#&'#")];let u=0,d=0;const f=[{line:1,column:1}];let b,p=0,y=[],v=0;if(void 0!==e.startRule){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');s=i[e.startRule]}function I(){return n.substring(d,u)}function L(){return bn(d,u)}function C(S,R){return{type:"literal",text:S,ignoreCase:R}}function W(S,R,x){return{type:"class",parts:S,inverted:R,ignoreCase:x}}function lr(S){let x,R=f[S];if(R)return R;for(x=S-1;!f[x];)x--;for(R=f[x],R={line:R.line,column:R.column};x<S;)10===n.charCodeAt(x)?(R.line++,R.column=1):R.column++,x++;return f[S]=R,R}function bn(S,R){const x=lr(S),be=lr(R);return{source:r,start:{offset:S,line:x.line,column:x.column},end:{offset:R,line:be.line,column:be.column}}}function cr(S){u<p||(u>p&&(p=u,y=[]),y.push(S))}function D(S){return S.split("").map(R=>R.charCodeAt(0)-32)}if(e.data={},b=function Do(S){const R=l[S];let x=0;const be=[];let Te=R.length;const tn=[],me=[];let is;for(;;){for(;x<Te;)switch(R[x]){case 0:me.push(o[R[x+1]]),x+=2;break;case 1:me.push(void 0),x++;break;case 2:me.push(null),x++;break;case 3:me.push(t),x++;break;case 4:me.push([]),x++;break;case 5:me.push(u),x++;break;case 6:me.pop(),x++;break;case 7:u=me.pop(),x++;break;case 8:me.length-=R[x+1],x+=2;break;case 9:me.splice(-2,1),x++;break;case 10:me[me.length-2].push(me.pop()),x++;break;case 11:me.push(me.splice(me.length-R[x+1],R[x+1])),x+=2;break;case 12:me.push(n.substring(me.pop(),u)),x++;break;case 13:tn.push(Te),be.push(x+3+R[x+1]+R[x+2]),me[me.length-1]?(Te=x+3+R[x+1],x+=3):(Te=x+3+R[x+1]+R[x+2],x+=3+R[x+1]);break;case 14:tn.push(Te),be.push(x+3+R[x+1]+R[x+2]),me[me.length-1]===t?(Te=x+3+R[x+1],x+=3):(Te=x+3+R[x+1]+R[x+2],x+=3+R[x+1]);break;case 15:tn.push(Te),be.push(x+3+R[x+1]+R[x+2]),me[me.length-1]!==t?(Te=x+3+R[x+1],x+=3):(Te=x+3+R[x+1]+R[x+2],x+=3+R[x+1]);break;case 16:me[me.length-1]!==t?(tn.push(Te),be.push(x),Te=x+2+R[x+1],x+=2):x+=2+R[x+1];break;case 17:tn.push(Te),be.push(x+3+R[x+1]+R[x+2]),n.length>u?(Te=x+3+R[x+1],x+=3):(Te=x+3+R[x+1]+R[x+2],x+=3+R[x+1]);break;case 18:tn.push(Te),be.push(x+4+R[x+2]+R[x+3]),n.substr(u,o[R[x+1]].length)===o[R[x+1]]?(Te=x+4+R[x+2],x+=4):(Te=x+4+R[x+2]+R[x+3],x+=4+R[x+2]);break;case 19:tn.push(Te),be.push(x+4+R[x+2]+R[x+3]),n.substr(u,o[R[x+1]].length).toLowerCase()===o[R[x+1]]?(Te=x+4+R[x+2],x+=4):(Te=x+4+R[x+2]+R[x+3],x+=4+R[x+2]);break;case 20:tn.push(Te),be.push(x+4+R[x+2]+R[x+3]),o[R[x+1]].test(n.charAt(u))?(Te=x+4+R[x+2],x+=4):(Te=x+4+R[x+2]+R[x+3],x+=4+R[x+2]);break;case 21:me.push(n.substr(u,R[x+1])),u+=R[x+1],x+=2;break;case 22:me.push(o[R[x+1]]),u+=o[R[x+1]].length,x+=2;break;case 23:me.push(t),0===v&&cr(o[R[x+1]]),x+=2;break;case 24:d=me[me.length-1-R[x+1]],x+=2;break;case 25:d=u,x++;break;case 26:is=R.slice(x+4,x+4+R[x+3]).map(function(Ot){return me[me.length-1-Ot]}),me.splice(me.length-R[x+2],R[x+2],o[R[x+1]].apply(null,is)),x+=4+R[x+3];break;case 27:me.push(Do(R[x+1])),x+=2;break;case 28:v++,x++;break;case 29:v--,x++;break;default:throw new Error("Invalid opcode: "+R[x]+".")}if(!(tn.length>0))break;Te=tn.pop(),x=be.pop()}return me[0]}(s),b!==t&&u===n.length)return b;throw b!==t&&u<n.length&&cr({type:"end"}),function Mi(S,R,x){return new Ll(Ll.buildMessage(S,R),S,R,x)}(y,p<n.length?n.charAt(p):null,bn(p,p<n.length?p+1:p))}(i,o)}catch{o.data=-1}return o.data},n.nameAddrHeaderParse=function t(i){const s=n.parse(i,"Name_Addr_Header");return-1!==s?s:void 0},n.URIParse=function r(i){const s=n.parse(i,"SIP_URI");return-1!==s?s:void 0};class dn{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){const t=dn.hexChars,r=dn.hexOut;let i,s,o,l;for(l=0;l<4;l+=1)for(s=8*l,i=e[l],o=0;o<8;o+=2)r[s+1+o]=t.charAt(15&i),i>>>=4,r[s+0+o]=t.charAt(15&i),i>>>=4;return r.join("")}static _md5cycle(e,t){let r=e[0],i=e[1],s=e[2],o=e[3];r+=(i&s|~i&o)+t[0]-680876936|0,r=(r<<7|r>>>25)+i|0,o+=(r&i|~r&s)+t[1]-389564586|0,o=(o<<12|o>>>20)+r|0,s+=(o&r|~o&i)+t[2]+606105819|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&r)+t[3]-1044525330|0,i=(i<<22|i>>>10)+s|0,r+=(i&s|~i&o)+t[4]-176418897|0,r=(r<<7|r>>>25)+i|0,o+=(r&i|~r&s)+t[5]+1200080426|0,o=(o<<12|o>>>20)+r|0,s+=(o&r|~o&i)+t[6]-1473231341|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&r)+t[7]-45705983|0,i=(i<<22|i>>>10)+s|0,r+=(i&s|~i&o)+t[8]+1770035416|0,r=(r<<7|r>>>25)+i|0,o+=(r&i|~r&s)+t[9]-1958414417|0,o=(o<<12|o>>>20)+r|0,s+=(o&r|~o&i)+t[10]-42063|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&r)+t[11]-1990404162|0,i=(i<<22|i>>>10)+s|0,r+=(i&s|~i&o)+t[12]+1804603682|0,r=(r<<7|r>>>25)+i|0,o+=(r&i|~r&s)+t[13]-40341101|0,o=(o<<12|o>>>20)+r|0,s+=(o&r|~o&i)+t[14]-1502002290|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&r)+t[15]+1236535329|0,i=(i<<22|i>>>10)+s|0,r+=(i&o|s&~o)+t[1]-165796510|0,r=(r<<5|r>>>27)+i|0,o+=(r&s|i&~s)+t[6]-1069501632|0,o=(o<<9|o>>>23)+r|0,s+=(o&i|r&~i)+t[11]+643717713|0,s=(s<<14|s>>>18)+o|0,i+=(s&r|o&~r)+t[0]-373897302|0,i=(i<<20|i>>>12)+s|0,r+=(i&o|s&~o)+t[5]-701558691|0,r=(r<<5|r>>>27)+i|0,o+=(r&s|i&~s)+t[10]+38016083|0,o=(o<<9|o>>>23)+r|0,s+=(o&i|r&~i)+t[15]-660478335|0,s=(s<<14|s>>>18)+o|0,i+=(s&r|o&~r)+t[4]-405537848|0,i=(i<<20|i>>>12)+s|0,r+=(i&o|s&~o)+t[9]+568446438|0,r=(r<<5|r>>>27)+i|0,o+=(r&s|i&~s)+t[14]-1019803690|0,o=(o<<9|o>>>23)+r|0,s+=(o&i|r&~i)+t[3]-187363961|0,s=(s<<14|s>>>18)+o|0,i+=(s&r|o&~r)+t[8]+1163531501|0,i=(i<<20|i>>>12)+s|0,r+=(i&o|s&~o)+t[13]-1444681467|0,r=(r<<5|r>>>27)+i|0,o+=(r&s|i&~s)+t[2]-51403784|0,o=(o<<9|o>>>23)+r|0,s+=(o&i|r&~i)+t[7]+1735328473|0,s=(s<<14|s>>>18)+o|0,i+=(s&r|o&~r)+t[12]-1926607734|0,i=(i<<20|i>>>12)+s|0,r+=(i^s^o)+t[5]-378558|0,r=(r<<4|r>>>28)+i|0,o+=(r^i^s)+t[8]-2022574463|0,o=(o<<11|o>>>21)+r|0,s+=(o^r^i)+t[11]+1839030562|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^r)+t[14]-35309556|0,i=(i<<23|i>>>9)+s|0,r+=(i^s^o)+t[1]-1530992060|0,r=(r<<4|r>>>28)+i|0,o+=(r^i^s)+t[4]+1272893353|0,o=(o<<11|o>>>21)+r|0,s+=(o^r^i)+t[7]-155497632|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^r)+t[10]-1094730640|0,i=(i<<23|i>>>9)+s|0,r+=(i^s^o)+t[13]+681279174|0,r=(r<<4|r>>>28)+i|0,o+=(r^i^s)+t[0]-358537222|0,o=(o<<11|o>>>21)+r|0,s+=(o^r^i)+t[3]-722521979|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^r)+t[6]+76029189|0,i=(i<<23|i>>>9)+s|0,r+=(i^s^o)+t[9]-640364487|0,r=(r<<4|r>>>28)+i|0,o+=(r^i^s)+t[12]-421815835|0,o=(o<<11|o>>>21)+r|0,s+=(o^r^i)+t[15]+530742520|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^r)+t[2]-995338651|0,i=(i<<23|i>>>9)+s|0,r+=(s^(i|~o))+t[0]-198630844|0,r=(r<<6|r>>>26)+i|0,o+=(i^(r|~s))+t[7]+1126891415|0,o=(o<<10|o>>>22)+r|0,s+=(r^(o|~i))+t[14]-1416354905|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~r))+t[5]-57434055|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~o))+t[12]+1700485571|0,r=(r<<6|r>>>26)+i|0,o+=(i^(r|~s))+t[3]-1894986606|0,o=(o<<10|o>>>22)+r|0,s+=(r^(o|~i))+t[10]-1051523|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~r))+t[1]-2054922799|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~o))+t[8]+1873313359|0,r=(r<<6|r>>>26)+i|0,o+=(i^(r|~s))+t[15]-30611744|0,o=(o<<10|o>>>22)+r|0,s+=(r^(o|~i))+t[6]-1560198380|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~r))+t[13]+1309151649|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~o))+t[4]-145523070|0,r=(r<<6|r>>>26)+i|0,o+=(i^(r|~s))+t[11]-1120210379|0,o=(o<<10|o>>>22)+r|0,s+=(r^(o|~i))+t[2]+718787259|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~r))+t[9]-343485551|0,i=(i<<21|i>>>11)+s|0,e[0]=r+e[0]|0,e[1]=i+e[1]|0,e[2]=s+e[2]|0,e[3]=o+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(dn.stateIdentity),this}appendStr(e){const t=this._buffer8,r=this._buffer32;let s,o,i=this._bufferLength;for(o=0;o<e.length;o+=1){if(s=e.charCodeAt(o),s<128)t[i++]=s;else if(s<2048)t[i++]=192+(s>>>6),t[i++]=63&s|128;else if(s<55296||s>56319)t[i++]=224+(s>>>12),t[i++]=s>>>6&63|128,t[i++]=63&s|128;else{if(s=1024*(s-55296)+(e.charCodeAt(++o)-56320)+65536,s>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[i++]=240+(s>>>18),t[i++]=s>>>12&63|128,t[i++]=s>>>6&63|128,t[i++]=63&s|128}i>=64&&(this._dataLength+=64,dn._md5cycle(this._state,r),i-=64,r[0]=r[16])}return this._bufferLength=i,this}appendAsciiStr(e){const t=this._buffer8,r=this._buffer32;let s,i=this._bufferLength,o=0;for(;;){for(s=Math.min(e.length-o,64-i);s--;)t[i++]=e.charCodeAt(o++);if(i<64)break;this._dataLength+=64,dn._md5cycle(this._state,r),i=0}return this._bufferLength=i,this}appendByteArray(e){const t=this._buffer8,r=this._buffer32;let s,i=this._bufferLength,o=0;for(;;){for(s=Math.min(e.length-o,64-i);s--;)t[i++]=e[o++];if(i<64)break;this._dataLength+=64,dn._md5cycle(this._state,r),i=0}return this._bufferLength=i,this}getState(){const e=this,t=e._state;return{buffer:String.fromCharCode.apply(null,e._buffer8),buflen:e._bufferLength,length:e._dataLength,state:[t[0],t[1],t[2],t[3]]}}setState(e){const t=e.buffer,r=e.state,i=this._state;let s;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],s=0;s<t.length;s+=1)this._buffer8[s]=t.charCodeAt(s)}end(e=!1){const t=this._bufferLength,r=this._buffer8,i=this._buffer32,s=1+(t>>2);let o;if(this._dataLength+=t,r[t]=128,r[t+1]=r[t+2]=r[t+3]=0,i.set(dn.buffer32Identity.subarray(s),s),t>55&&(dn._md5cycle(this._state,i),i.set(dn.buffer32Identity)),o=8*this._dataLength,o<=4294967295)i[14]=o;else{const l=o.toString(16).match(/(.*?)(.{0,8})$/);if(null===l)return;const u=parseInt(l[2],16),d=parseInt(l[1],16)||0;i[14]=u,i[15]=d}return dn._md5cycle(this._state,i),e?this._state:dn._hex(this._state)}}dn.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),dn.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),dn.hexChars="0123456789abcdef",dn.hexOut=[],dn.onePassHasher=new dn,"5d41402abc4b2a76b9719d911017c592"!==dn.hashStr("hello")&&console.error("Md5 self test failed.");const EV={100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"};function $l(n,e=32){let t="";for(let r=0;r<n;r++)t+=Math.floor(Math.random()*e).toString(e);return t}function H_(n){return EV[n]||""}function U_(){return $l(10)}function Fs(n){const e={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},t=n.toLowerCase().replace(/_/g,"-").split("-"),r=t.length;let i="";for(let s=0;s<r;s++)0!==s&&(i+="-"),i+=t[s].charAt(0).toUpperCase()+t[s].substring(1);return e[i]&&(i=e[i]),i}function Sf(n){return encodeURIComponent(n).replace(/%[A-F\d]{2}/g,"U").length}function Da(n){return dn.hashStr(n)}class DV{constructor(e,t,r,i){this.logger=e.getLogger("sipjs.digestauthentication"),this.username=r,this.password=i,this.ha1=t,this.nc=0,this.ncHex="00000000"}authenticate(e,t,r){if(this.algorithm=t.algorithm,this.realm=t.realm,this.nonce=t.nonce,this.opaque=t.opaque,this.stale=t.stale,this.algorithm){if("MD5"!==this.algorithm)return this.logger.warn("challenge with Digest algorithm different than 'MD5', authentication aborted"),!1}else this.algorithm="MD5";if(!this.realm)return this.logger.warn("challenge without Digest realm, authentication aborted"),!1;if(!this.nonce)return this.logger.warn("challenge without Digest nonce, authentication aborted"),!1;if(t.qop)if(t.qop.indexOf("auth")>-1)this.qop="auth";else{if(!(t.qop.indexOf("auth-int")>-1))return this.logger.warn("challenge without Digest qop different than 'auth' or 'auth-int', authentication aborted"),!1;this.qop="auth-int"}else this.qop=void 0;return this.method=e.method,this.uri=e.ruri,this.cnonce=$l(12),this.nc+=1,this.updateNcHex(),4294967296===this.nc&&(this.nc=1,this.ncHex="00000001"),this.calculateResponse(r),!0}toString(){const e=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm="+this.algorithm),e.push('username="'+this.username+'"'),e.push('realm="'+this.realm+'"'),e.push('nonce="'+this.nonce+'"'),e.push('uri="'+this.uri+'"'),e.push('response="'+this.response+'"'),this.opaque&&e.push('opaque="'+this.opaque+'"'),this.qop&&(e.push("qop="+this.qop),e.push('cnonce="'+this.cnonce+'"'),e.push("nc="+this.ncHex)),"Digest "+e.join(", ")}updateNcHex(){const e=Number(this.nc).toString(16);this.ncHex="00000000".substr(0,8-e.length)+e}calculateResponse(e){let t,r;t=this.ha1,(""===t||void 0===t)&&(t=Da(this.username+":"+this.realm+":"+this.password)),"auth"===this.qop?(r=Da(this.method+":"+this.uri),this.response=Da(t+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+r)):"auth-int"===this.qop?(r=Da(this.method+":"+this.uri+":"+Da(e||"")),this.response=Da(t+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+r)):void 0===this.qop&&(r=Da(this.method+":"+this.uri),this.response=Da(t+":"+this.nonce+":"+r))}}class ZM{constructor(){this.headers={}}addHeader(e,t){const r={raw:t};e=Fs(e),this.headers[e]?this.headers[e].push(r):this.headers[e]=[r]}getHeader(e){const t=this.headers[Fs(e)];if(t)return t[0]?t[0].raw:void 0}getHeaders(e){const t=this.headers[Fs(e)],r=[];if(!t)return[];for(const i of t)r.push(i.raw);return r}hasHeader(e){return!!this.headers[Fs(e)]}parseHeader(e,t=0){if(e=Fs(e),!this.headers[e])return;if(t>=this.headers[e].length)return;const r=this.headers[e][t];if(r.parsed)return r.parsed;const s=Cn.parse(r.raw,e.replace(/-/g,"_"));return-1===s?void this.headers[e].splice(t,1):(r.parsed=s,s)}s(e,t=0){return this.parseHeader(e,t)}setHeader(e,t){this.headers[Fs(e)]=[{raw:t}]}toString(){return this.data}}class Fu extends ZM{constructor(){super()}}class Sa extends ZM{constructor(){super()}}var On,j_,re;!function(n){n[n.error=0]="error",n[n.warn=1]="warn",n[n.log=2]="log",n[n.debug=3]="debug"}(On=On||(On={}));class QM{constructor(e,t,r){this.logger=e,this.category=t,this.label=r}error(e){this.genericLog(On.error,e)}warn(e){this.genericLog(On.warn,e)}log(e){this.genericLog(On.log,e)}debug(e){this.genericLog(On.debug,e)}genericLog(e,t){this.logger.genericLog(e,this.category,this.label,t)}get level(){return this.logger.level}set level(e){this.logger.level=e}}class SV{constructor(){this.builtinEnabled=!0,this._level=On.log,this.loggers={},this.logger=this.getLogger("sip:loggerfactory")}get level(){return this._level}set level(e){e>=0&&e<=3?this._level=e:e>3?this._level=3:On.hasOwnProperty(e)?this._level=e:this.logger.error("invalid 'level' parameter value: "+JSON.stringify(e))}get connector(){return this._connector}set connector(e){e?"function"==typeof e?this._connector=e:this.logger.error("invalid 'connector' parameter value: "+JSON.stringify(e)):this._connector=void 0}getLogger(e,t){if(t&&3===this.level)return new QM(this,e,t);if(this.loggers[e])return this.loggers[e];{const r=new QM(this,e);return this.loggers[e]=r,r}}genericLog(e,t,r,i){this.level>=e&&this.builtinEnabled&&this.print(e,t,r,i),this.connector&&this.connector(On[e],t,r,i)}print(e,t,r,i){if("string"==typeof i){const s=[new Date,t];r&&s.push(r),i=s.concat(i).join(" | ")}switch(e){case On.error:console.error(i);break;case On.warn:console.warn(i);break;case On.log:console.log(i);break;case On.debug:console.debug(i)}}}!function(n){function e(i,s){let o=s,l=0,u=0;if(i.substring(o,o+2).match(/(^\r\n)/))return-2;for(;0===l;){if(u=i.indexOf("\r\n",o),-1===u)return u;!i.substring(u+2,u+4).match(/(^\r\n)/)&&i.charAt(u+2).match(/(^\s+)/)?o=u+2:l=u}return l}function t(i,s,o,l){const u=s.indexOf(":",o),d=s.substring(o,u).trim(),f=s.substring(u+1,l).trim();let p;switch(d.toLowerCase()){case"via":case"v":i.addHeader("via",f),1===i.getHeaders("via").length?(p=i.parseHeader("Via"),p&&(i.via=p,i.viaBranch=p.branch)):p=0;break;case"from":case"f":i.setHeader("from",f),p=i.parseHeader("from"),p&&(i.from=p,i.fromTag=p.getParam("tag"));break;case"to":case"t":i.setHeader("to",f),p=i.parseHeader("to"),p&&(i.to=p,i.toTag=p.getParam("tag"));break;case"record-route":if(p=Cn.parse(f,"Record_Route"),-1===p){p=void 0;break}if(!(p instanceof Array)){p=void 0;break}p.forEach(y=>{i.addHeader("record-route",f.substring(y.position,y.offset)),i.headers["Record-Route"][i.getHeaders("record-route").length-1].parsed=y.parsed});break;case"call-id":case"i":i.setHeader("call-id",f),p=i.parseHeader("call-id"),p&&(i.callId=f);break;case"contact":case"m":if(p=Cn.parse(f,"Contact"),-1===p){p=void 0;break}if(!(p instanceof Array)){p=void 0;break}p.forEach(y=>{i.addHeader("contact",f.substring(y.position,y.offset)),i.headers.Contact[i.getHeaders("contact").length-1].parsed=y.parsed});break;case"content-length":case"l":i.setHeader("content-length",f),p=i.parseHeader("content-length");break;case"content-type":case"c":i.setHeader("content-type",f),p=i.parseHeader("content-type");break;case"cseq":i.setHeader("cseq",f),p=i.parseHeader("cseq"),p&&(i.cseq=p.value),i instanceof Sa&&(i.method=p.method);break;case"max-forwards":i.setHeader("max-forwards",f),p=i.parseHeader("max-forwards");break;case"www-authenticate":i.setHeader("www-authenticate",f),p=i.parseHeader("www-authenticate");break;case"proxy-authenticate":i.setHeader("proxy-authenticate",f),p=i.parseHeader("proxy-authenticate");break;case"refer-to":case"r":i.setHeader("refer-to",f),p=i.parseHeader("refer-to"),p&&(i.referTo=p);break;default:i.addHeader(d.toLowerCase(),f),p=0}return void 0!==p||{error:"error parsing header '"+d+"'"}}n.getHeader=e,n.parseHeader=t,n.parseMessage=function r(i,s){let o=0,l=i.indexOf("\r\n");if(-1===l)return void s.warn("no CRLF found, not a SIP message, discarded");const u=i.substring(0,l),d=Cn.parse(u,"Request_Response");let f,p;if(-1!==d){for(d.status_code?(f=new Sa,f.statusCode=d.status_code,f.reasonPhrase=d.reason_phrase):(f=new Fu,f.method=d.method,f.ruri=d.uri),f.data=i,o=l+2;;){if(l=e(i,o),-2===l){p=o+2;break}if(-1===l)return void s.error("malformed message");const y=t(f,i,o,l);if(y&&!0!==y)return void s.error(y.error);o=l+2}return f.body=f.hasHeader("content-length")?i.substr(p,Number(f.getHeader("content-length"))):i.substring(p),f}s.warn('error parsing first line of SIP message: "'+u+'"')}}(j_=j_||(j_={})),function(n){n.ACK="ACK",n.BYE="BYE",n.CANCEL="CANCEL",n.INFO="INFO",n.INVITE="INVITE",n.MESSAGE="MESSAGE",n.NOTIFY="NOTIFY",n.OPTIONS="OPTIONS",n.REGISTER="REGISTER",n.UPDATE="UPDATE",n.SUBSCRIBE="SUBSCRIBE",n.PUBLISH="PUBLISH",n.REFER="REFER",n.PRACK="PRACK"}(re=re||(re={}));class Vl{constructor(e,t,r,i,s,o,l){this.headers={},this.extraHeaders=[],this.options=Vl.getDefaultOptions(),s&&(this.options=Object.assign(Object.assign({},this.options),s),this.options.optionTags&&this.options.optionTags.length&&(this.options.optionTags=this.options.optionTags.slice()),this.options.routeSet&&this.options.routeSet.length&&(this.options.routeSet=this.options.routeSet.slice())),o&&o.length&&(this.extraHeaders=o.slice()),l&&(this.body={body:l.content,contentType:l.contentType}),this.method=e,this.ruri=t.clone(),this.fromURI=r.clone(),this.fromTag=this.options.fromTag?this.options.fromTag:U_(),this.from=Vl.makeNameAddrHeader(this.fromURI,this.options.fromDisplayName,this.fromTag),this.toURI=i.clone(),this.toTag=this.options.toTag,this.to=Vl.makeNameAddrHeader(this.toURI,this.options.toDisplayName,this.toTag),this.callId=this.options.callId?this.options.callId:this.options.callIdPrefix+$l(15),this.cseq=this.options.cseq,this.setHeader("route",this.options.routeSet),this.setHeader("via",""),this.setHeader("to",this.to.toString()),this.setHeader("from",this.from.toString()),this.setHeader("cseq",this.cseq+" "+this.method),this.setHeader("call-id",this.callId),this.setHeader("max-forwards","70")}static getDefaultOptions(){return{callId:"",callIdPrefix:"",cseq:1,toDisplayName:"",toTag:"",fromDisplayName:"",fromTag:"",forceRport:!1,hackViaTcp:!1,optionTags:["outbound"],routeSet:[],userAgentString:"sip.js",viaHost:""}}static makeNameAddrHeader(e,t,r){const i={};return r&&(i.tag=r),new Nr(e,t,i)}getHeader(e){const t=this.headers[Fs(e)];if(t){if(t[0])return t[0]}else{const r=new RegExp("^\\s*"+e+"\\s*:","i");for(const i of this.extraHeaders)if(r.test(i))return i.substring(i.indexOf(":")+1).trim()}}getHeaders(e){const t=[],r=this.headers[Fs(e)];if(r)for(const i of r)t.push(i);else{const i=new RegExp("^\\s*"+e+"\\s*:","i");for(const s of this.extraHeaders)i.test(s)&&t.push(s.substring(s.indexOf(":")+1).trim())}return t}hasHeader(e){if(this.headers[Fs(e)])return!0;{const t=new RegExp("^\\s*"+e+"\\s*:","i");for(const r of this.extraHeaders)if(t.test(r))return!0}return!1}setHeader(e,t){this.headers[Fs(e)]=t instanceof Array?t:[t]}setViaHeader(e,t){this.options.hackViaTcp&&(t="TCP");let r="SIP/2.0/"+t;r+=" "+this.options.viaHost+";branch="+e,this.options.forceRport&&(r+=";rport"),this.setHeader("via",r),this.branch=e}toString(){let e="";e+=this.method+" "+this.ruri.toRaw()+" SIP/2.0\r\n";for(const t in this.headers)if(this.headers[t])for(const r of this.headers[t])e+=t+": "+r+"\r\n";for(const t of this.extraHeaders)e+=t.trim()+"\r\n";return e+="Supported: "+this.options.optionTags.join(", ")+"\r\n",e+="User-Agent: "+this.options.userAgentString+"\r\n",this.body?"string"==typeof this.body?(e+="Content-Length: "+Sf(this.body)+"\r\n\r\n",e+=this.body):this.body.body&&this.body.contentType?(e+="Content-Type: "+this.body.contentType+"\r\n",e+="Content-Length: "+Sf(this.body.body)+"\r\n\r\n",e+=this.body.body):e+="Content-Length: 0\r\n\r\n":e+="Content-Length: 0\r\n\r\n",e}}function XM(n,e){const t="\r\n";if(e.statusCode<100||e.statusCode>699)throw new TypeError("Invalid statusCode: "+e.statusCode);const r=e.reasonPhrase?e.reasonPhrase:H_(e.statusCode);let i="SIP/2.0 "+e.statusCode+" "+r+t;const s="From: "+n.getHeader("From")+t,o="Call-ID: "+n.callId+t,l="CSeq: "+n.cseq+" "+n.method+t,u=n.getHeaders("via").reduce((v,b)=>v+"Via: "+b+t,"");let d="To: "+n.getHeader("to");if(e.statusCode>100&&!n.parseHeader("to").hasParam("tag")){let v=e.toTag;v||(v=U_()),d+=";tag="+v}d+=t;let f="";e.supported&&(f="Supported: "+e.supported.join(", ")+t);let p="";e.userAgent&&(p="User-Agent: "+e.userAgent+t);let y="";return e.extraHeaders&&(y=e.extraHeaders.reduce((v,b)=>v+b.trim()+t,"")),i+=u,i+=s,i+=d,i+=l,i+=o,i+=f,i+=p,i+=y,e.body?(i+="Content-Type: "+e.body.contentType+t,i+="Content-Length: "+Sf(e.body.content)+t+t,i+=e.body.content):i+="Content-Length: 0\r\n\r\n",{message:i}}const Pn_T1=500,Pn_T2=4e3,Pn_TIMER_B=32e3,Pn_TIMER_D=0,Pn_TIMER_F=32e3,Pn_TIMER_H=32e3,Pn_TIMER_I=0,Pn_TIMER_J=0,Pn_TIMER_K=0,Pn_TIMER_L=32e3,Pn_TIMER_M=32e3,Pn_TIMER_N=32e3,Pn_PROVISIONAL_RESPONSE_INTERVAL=6e4;class Bl extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class Db extends Bl{constructor(e){super(e||"Unspecified transport error.")}}class JM{constructor(e,t,r,i,s){this._transport=e,this._user=t,this._id=r,this._state=i,this.listeners=new Array,this.logger=t.loggerFactory.getLogger(s,r),this.logger.debug(`Constructing ${this.typeToString()} with id ${this.id}.`)}dispose(){this.logger.debug(`Destroyed ${this.typeToString()} with id ${this.id}.`)}get id(){return this._id}get kind(){throw new Error("Invalid kind.")}get state(){return this._state}get transport(){return this._transport}addStateChangeListener(e,t){const r=()=>{this.removeStateChangeListener(r),e()};this.listeners.push(!0===t?.once?r:e)}notifyStateChangeListeners(){this.listeners.slice().forEach(e=>e())}removeStateChangeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}logTransportError(e,t){this.logger.error(e.message),this.logger.error(`Transport error occurred in ${this.typeToString()} with id ${this.id}.`),this.logger.error(t)}send(e){return this.transport.send(e).catch(t=>{if(t instanceof Db)throw this.onTransportError(t),t;let r;throw r=t&&"string"==typeof t.message?new Db(t.message):new Db,this.onTransportError(r),r})}setState(e){this.logger.debug(`State change to "${e}" on ${this.typeToString()} with id ${this.id}.`),this._state=e,this._user.onStateChange&&this._user.onStateChange(e),this.notifyStateChangeListeners()}typeToString(){return"UnknownType"}}class ex extends JM{constructor(e,t,r,i,s){super(t,r,e.viaBranch,i,s),this._request=e,this.user=r}get request(){return this._request}}var $,Si,J;!function(n){n.Accepted="Accepted",n.Calling="Calling",n.Completed="Completed",n.Confirmed="Confirmed",n.Proceeding="Proceeding",n.Terminated="Terminated",n.Trying="Trying"}($=$||($={}));class Lr extends ex{constructor(e,t,r){super(e,t,r,$.Proceeding,"sip.transaction.ist")}dispose(){this.stopProgressExtensionTimer(),this.H&&(clearTimeout(this.H),this.H=void 0),this.I&&(clearTimeout(this.I),this.I=void 0),this.L&&(clearTimeout(this.L),this.L=void 0),super.dispose()}get kind(){return"ist"}receiveRequest(e){switch(this.state){case $.Proceeding:if(e.method===re.INVITE)return void(this.lastProvisionalResponse&&this.send(this.lastProvisionalResponse).catch(r=>{this.logTransportError(r,"Failed to send retransmission of provisional response.")}));break;case $.Accepted:if(e.method===re.INVITE)return;break;case $.Completed:if(e.method===re.INVITE){if(!this.lastFinalResponse)throw new Error("Last final response undefined.");return void this.send(this.lastFinalResponse).catch(r=>{this.logTransportError(r,"Failed to send retransmission of final response.")})}if(e.method===re.ACK)return void this.stateTransition($.Confirmed);break;case $.Confirmed:case $.Terminated:if(e.method===re.INVITE||e.method===re.ACK)return;break;default:throw new Error(`Invalid state ${this.state}`)}this.logger.warn(`INVITE server transaction received unexpected ${e.method} request while in state ${this.state}.`)}receiveResponse(e,t){if(e<100||e>699)throw new Error(`Invalid status code ${e}`);switch(this.state){case $.Proceeding:if(e>=100&&e<=199)return this.lastProvisionalResponse=t,e>100&&this.startProgressExtensionTimer(),void this.send(t).catch(i=>{this.logTransportError(i,"Failed to send 1xx response.")});if(e>=200&&e<=299)return this.lastFinalResponse=t,this.stateTransition($.Accepted),void this.send(t).catch(i=>{this.logTransportError(i,"Failed to send 2xx response.")});if(e>=300&&e<=699)return this.lastFinalResponse=t,this.stateTransition($.Completed),void this.send(t).catch(i=>{this.logTransportError(i,"Failed to send non-2xx final response.")});break;case $.Accepted:if(e>=200&&e<=299)return void this.send(t).catch(i=>{this.logTransportError(i,"Failed to send 2xx response.")});break;case $.Completed:case $.Confirmed:case $.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}const r=`INVITE server transaction received unexpected ${e} response from TU while in state ${this.state}.`;throw this.logger.error(r),new Error(r)}retransmitAcceptedResponse(){this.state===$.Accepted&&this.lastFinalResponse&&this.send(this.lastFinalResponse).catch(e=>{this.logTransportError(e,"Failed to send 2xx response.")})}onTransportError(e){this.user.onTransportError&&this.user.onTransportError(e)}typeToString(){return"INVITE server transaction"}stateTransition(e){const t=()=>{throw new Error(`Invalid state transition from ${this.state} to ${e}`)};switch(e){case $.Proceeding:t();break;case $.Accepted:case $.Completed:this.state!==$.Proceeding&&t();break;case $.Confirmed:this.state!==$.Completed&&t();break;case $.Terminated:this.state!==$.Accepted&&this.state!==$.Completed&&this.state!==$.Confirmed&&t();break;default:t()}this.stopProgressExtensionTimer(),e===$.Accepted&&(this.L=setTimeout(()=>this.timerL(),Pn_TIMER_L)),e===$.Completed&&(this.H=setTimeout(()=>this.timerH(),Pn_TIMER_H)),e===$.Confirmed&&(this.I=setTimeout(()=>this.timerI(),Pn_TIMER_I)),e===$.Terminated&&this.dispose(),this.setState(e)}startProgressExtensionTimer(){void 0===this.progressExtensionTimer&&(this.progressExtensionTimer=setInterval(()=>{if(this.logger.debug(`Progress extension timer expired for INVITE server transaction ${this.id}.`),!this.lastProvisionalResponse)throw new Error("Last provisional response undefined.");this.send(this.lastProvisionalResponse).catch(e=>{this.logTransportError(e,"Failed to send retransmission of provisional response.")})},Pn_PROVISIONAL_RESPONSE_INTERVAL))}stopProgressExtensionTimer(){void 0!==this.progressExtensionTimer&&(clearInterval(this.progressExtensionTimer),this.progressExtensionTimer=void 0)}timerG(){}timerH(){this.logger.debug(`Timer H expired for INVITE server transaction ${this.id}.`),this.state===$.Completed&&(this.logger.warn("ACK to negative final response was never received, terminating transaction."),this.stateTransition($.Terminated))}timerI(){this.logger.debug(`Timer I expired for INVITE server transaction ${this.id}.`),this.stateTransition($.Terminated)}timerL(){this.logger.debug(`Timer L expired for INVITE server transaction ${this.id}.`),this.state===$.Accepted&&this.stateTransition($.Terminated)}}class q_ extends JM{constructor(e,t,r,i,s){super(t,r,q_.makeId(e),i,s),this._request=e,this.user=r,e.setViaHeader(this.id,t.protocol)}static makeId(e){if("CANCEL"===e.method){if(!e.branch)throw new Error("Outgoing CANCEL request without a branch.");return e.branch}return"z9hG4bK"+Math.floor(1e7*Math.random())}get request(){return this._request}onRequestTimeout(){this.user.onRequestTimeout&&this.user.onRequestTimeout()}}class ti extends q_{constructor(e,t,r){super(e,t,r,$.Trying,"sip.transaction.nict"),this.F=setTimeout(()=>this.timerF(),Pn_TIMER_F),this.send(e.toString()).catch(i=>{this.logTransportError(i,"Failed to send initial outgoing request.")})}dispose(){this.F&&(clearTimeout(this.F),this.F=void 0),this.K&&(clearTimeout(this.K),this.K=void 0),super.dispose()}get kind(){return"nict"}receiveResponse(e){const t=e.statusCode;if(!t||t<100||t>699)throw new Error(`Invalid status code ${t}`);switch(this.state){case $.Trying:if(t>=100&&t<=199)return this.stateTransition($.Proceeding),void(this.user.receiveResponse&&this.user.receiveResponse(e));if(t>=200&&t<=699)return this.stateTransition($.Completed),408===t?void this.onRequestTimeout():void(this.user.receiveResponse&&this.user.receiveResponse(e));break;case $.Proceeding:if(t>=100&&t<=199&&this.user.receiveResponse)return this.user.receiveResponse(e);if(t>=200&&t<=699)return this.stateTransition($.Completed),408===t?void this.onRequestTimeout():void(this.user.receiveResponse&&this.user.receiveResponse(e));break;case $.Completed:case $.Terminated:return;default:throw new Error(`Invalid state ${this.state}`)}this.logger.warn(`Non-INVITE client transaction received unexpected ${t} response while in state ${this.state}.`)}onTransportError(e){this.user.onTransportError&&this.user.onTransportError(e),this.stateTransition($.Terminated,!0)}typeToString(){return"non-INVITE client transaction"}stateTransition(e,t=!1){const r=()=>{throw new Error(`Invalid state transition from ${this.state} to ${e}`)};switch(e){case $.Trying:r();break;case $.Proceeding:this.state!==$.Trying&&r();break;case $.Completed:this.state!==$.Trying&&this.state!==$.Proceeding&&r();break;case $.Terminated:this.state!==$.Trying&&this.state!==$.Proceeding&&this.state!==$.Completed&&(t||r());break;default:r()}e===$.Completed&&(this.F&&(clearTimeout(this.F),this.F=void 0),this.K=setTimeout(()=>this.timerK(),Pn_TIMER_K)),e===$.Terminated&&this.dispose(),this.setState(e)}timerF(){this.logger.debug(`Timer F expired for non-INVITE client transaction ${this.id}.`),(this.state===$.Trying||this.state===$.Proceeding)&&(this.onRequestTimeout(),this.stateTransition($.Terminated))}timerK(){this.state===$.Completed&&this.stateTransition($.Terminated)}}class Nu{constructor(e,t){this.core=e,this.dialogState=t,this.core.dialogs.set(this.id,this)}static initialDialogStateForUserAgentClient(e,t){const i=t.getHeaders("record-route").reverse(),s=t.parseHeader("contact");if(!s)throw new Error("Contact undefined.");if(!(s instanceof Nr))throw new Error("Contact not instance of NameAddrHeader.");const o=s.uri,l=e.cseq,d=e.callId,f=e.fromTag,p=t.toTag;if(!d)throw new Error("Call id undefined.");if(!f)throw new Error("From tag undefined.");if(!p)throw new Error("To tag undefined.");if(!e.from)throw new Error("From undefined.");if(!e.to)throw new Error("To undefined.");const y=e.from.uri,v=e.to.uri;if(!t.statusCode)throw new Error("Incoming response status code undefined.");return{id:d+f+p,early:t.statusCode<200,callId:d,localTag:f,remoteTag:p,localSequenceNumber:l,remoteSequenceNumber:void 0,localURI:y,remoteURI:v,remoteTarget:o,routeSet:i,secure:!1}}static initialDialogStateForUserAgentServer(e,t,r=!1){const s=e.getHeaders("record-route"),o=e.parseHeader("contact");if(!o)throw new Error("Contact undefined.");if(!(o instanceof Nr))throw new Error("Contact not instance of NameAddrHeader.");const f=e.callId,y=e.fromTag;return{id:f+t+y,early:r,callId:f,localTag:t,remoteTag:y,localSequenceNumber:void 0,remoteSequenceNumber:e.cseq,localURI:e.to.uri,remoteURI:e.from.uri,remoteTarget:o.uri,routeSet:s,secure:!1}}dispose(){this.core.dialogs.delete(this.id)}get id(){return this.dialogState.id}get early(){return this.dialogState.early}get callId(){return this.dialogState.callId}get localTag(){return this.dialogState.localTag}get remoteTag(){return this.dialogState.remoteTag}get localSequenceNumber(){return this.dialogState.localSequenceNumber}get remoteSequenceNumber(){return this.dialogState.remoteSequenceNumber}get localURI(){return this.dialogState.localURI}get remoteURI(){return this.dialogState.remoteURI}get remoteTarget(){return this.dialogState.remoteTarget}get routeSet(){return this.dialogState.routeSet}get secure(){return this.dialogState.secure}get userAgentCore(){return this.core}confirm(){this.dialogState.early=!1}receiveRequest(e){if(e.method!==re.ACK){if(this.remoteSequenceNumber){if(e.cseq<=this.remoteSequenceNumber)throw new Error("Out of sequence in dialog request. Did you forget to call sequenceGuard()?");this.dialogState.remoteSequenceNumber=e.cseq}this.remoteSequenceNumber||(this.dialogState.remoteSequenceNumber=e.cseq)}}recomputeRouteSet(e){this.dialogState.routeSet=e.getHeaders("record-route").reverse()}createOutgoingRequestMessage(e,t){const r=this.remoteURI,i=this.remoteTag,s=this.localURI,o=this.localTag,l=this.callId;let u;return u=t&&t.cseq?t.cseq:this.dialogState.localSequenceNumber?this.dialogState.localSequenceNumber+=1:this.dialogState.localSequenceNumber=1,this.userAgentCore.makeOutgoingRequestMessage(e,this.remoteTarget,s,r,{callId:l,cseq:u,fromTag:o,toTag:i,routeSet:this.routeSet},t&&t.extraHeaders,t&&t.body)}incrementLocalSequenceNumber(){if(!this.dialogState.localSequenceNumber)throw new Error("Local sequence number undefined.");this.dialogState.localSequenceNumber+=1}sequenceGuard(e){return!(e.method!==re.ACK&&this.remoteSequenceNumber&&e.cseq<=this.remoteSequenceNumber&&(this.core.replyStateless(e,{statusCode:500}),1))}}function tx(n){return"application/sdp"===n?"session":"render"}function z_(n){const e="string"==typeof n?n:n.body,t="string"==typeof n?"application/sdp":n.contentType;return{contentDisposition:tx(t),contentType:t,content:e}}function nx(n){return!(!n||"string"!=typeof n.content||"string"!=typeof n.contentType||void 0!==n.contentDisposition)||"string"==typeof n.contentDisposition}function Tf(n){let e,t,r;if(n instanceof Fu&&n.body){const i=n.parseHeader("Content-Disposition");e=i?i.type:void 0,t=n.parseHeader("Content-Type"),r=n.body}if(n instanceof Sa&&n.body){const i=n.parseHeader("Content-Disposition");e=i?i.type:void 0,t=n.parseHeader("Content-Type"),r=n.body}if(n instanceof Vl&&n.body)if(e=n.getHeader("Content-Disposition"),t=n.getHeader("Content-Type"),"string"==typeof n.body){if(!t)throw new Error("Header content type header does not equal body content type.");r=n.body}else{if(t&&t!==n.body.contentType)throw new Error("Header content type header does not equal body content type.");t=n.body.contentType,r=n.body.body}if(nx(n)&&(e=n.contentDisposition,t=n.contentType,r=n.content),r){if(t&&!e&&(e=tx(t)),!e)throw new Error("Content disposition undefined.");if(!t)throw new Error("Content type undefined.");return{contentDisposition:e,contentType:t,content:r}}}!function(n){n.Initial="Initial",n.Early="Early",n.AckWait="AckWait",n.Confirmed="Confirmed",n.Terminated="Terminated"}(Si=Si||(Si={})),function(n){n.Initial="Initial",n.HaveLocalOffer="HaveLocalOffer",n.HaveRemoteOffer="HaveRemoteOffer",n.Stable="Stable",n.Closed="Closed"}(J=J||(J={}));class Ta extends q_{constructor(e,t,r){super(e,t,r,$.Calling,"sip.transaction.ict"),this.ackRetransmissionCache=new Map,this.B=setTimeout(()=>this.timerB(),Pn_TIMER_B),this.send(e.toString()).catch(i=>{this.logTransportError(i,"Failed to send initial outgoing request.")})}dispose(){this.B&&(clearTimeout(this.B),this.B=void 0),this.D&&(clearTimeout(this.D),this.D=void 0),this.M&&(clearTimeout(this.M),this.M=void 0),super.dispose()}get kind(){return"ict"}ackResponse(e){const t=e.toTag;if(!t)throw new Error("To tag undefined.");const r="z9hG4bK"+Math.floor(1e7*Math.random());e.setViaHeader(r,this.transport.protocol),this.ackRetransmissionCache.set(t,e),this.send(e.toString()).catch(i=>{this.logTransportError(i,"Failed to send ACK to 2xx response.")})}receiveResponse(e){const t=e.statusCode;if(!t||t<100||t>699)throw new Error(`Invalid status code ${t}`);switch(this.state){case $.Calling:if(t>=100&&t<=199)return this.stateTransition($.Proceeding),void(this.user.receiveResponse&&this.user.receiveResponse(e));if(t>=200&&t<=299)return this.ackRetransmissionCache.set(e.toTag,void 0),this.stateTransition($.Accepted),void(this.user.receiveResponse&&this.user.receiveResponse(e));if(t>=300&&t<=699)return this.stateTransition($.Completed),this.ack(e),void(this.user.receiveResponse&&this.user.receiveResponse(e));break;case $.Proceeding:if(t>=100&&t<=199)return void(this.user.receiveResponse&&this.user.receiveResponse(e));if(t>=200&&t<=299)return this.ackRetransmissionCache.set(e.toTag,void 0),this.stateTransition($.Accepted),void(this.user.receiveResponse&&this.user.receiveResponse(e));if(t>=300&&t<=699)return this.stateTransition($.Completed),this.ack(e),void(this.user.receiveResponse&&this.user.receiveResponse(e));break;case $.Accepted:if(t>=200&&t<=299){if(!this.ackRetransmissionCache.has(e.toTag))return this.ackRetransmissionCache.set(e.toTag,void 0),void(this.user.receiveResponse&&this.user.receiveResponse(e));const i=this.ackRetransmissionCache.get(e.toTag);return i?void this.send(i.toString()).catch(s=>{this.logTransportError(s,"Failed to send retransmission of ACK to 2xx response.")}):void 0}break;case $.Completed:if(t>=300&&t<=699)return void this.ack(e);break;case $.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}this.logger.warn(`Received unexpected ${t} response while in state ${this.state}.`)}onTransportError(e){this.user.onTransportError&&this.user.onTransportError(e),this.stateTransition($.Terminated,!0)}typeToString(){return"INVITE client transaction"}ack(e){const t=this.request.ruri,r=this.request.callId,i=this.request.cseq,s=this.request.getHeader("from"),o=e.getHeader("to"),l=this.request.getHeader("via"),u=this.request.getHeader("route");if(!s)throw new Error("From undefined.");if(!o)throw new Error("To undefined.");if(!l)throw new Error("Via undefined.");let d=`ACK ${t} SIP/2.0\r\n`;u&&(d+=`Route: ${u}\r\n`),d+=`Via: ${l}\r\n`,d+=`To: ${o}\r\n`,d+=`From: ${s}\r\n`,d+=`Call-ID: ${r}\r\n`,d+=`CSeq: ${i} ACK\r\n`,d+="Max-Forwards: 70\r\n",d+="Content-Length: 0\r\n\r\n",this.send(d).catch(f=>{this.logTransportError(f,"Failed to send ACK to non-2xx response.")})}stateTransition(e,t=!1){const r=()=>{throw new Error(`Invalid state transition from ${this.state} to ${e}`)};switch(e){case $.Calling:r();break;case $.Proceeding:this.state!==$.Calling&&r();break;case $.Accepted:case $.Completed:this.state!==$.Calling&&this.state!==$.Proceeding&&r();break;case $.Terminated:this.state!==$.Calling&&this.state!==$.Accepted&&this.state!==$.Completed&&(t||r());break;default:r()}this.B&&(clearTimeout(this.B),this.B=void 0),e===$.Completed&&(this.D=setTimeout(()=>this.timerD(),Pn_TIMER_D)),e===$.Accepted&&(this.M=setTimeout(()=>this.timerM(),Pn_TIMER_M)),e===$.Terminated&&this.dispose(),this.setState(e)}timerA(){}timerB(){this.logger.debug(`Timer B expired for INVITE client transaction ${this.id}.`),this.state===$.Calling&&(this.onRequestTimeout(),this.stateTransition($.Terminated))}timerD(){this.logger.debug(`Timer D expired for INVITE client transaction ${this.id}.`),this.state===$.Completed&&this.stateTransition($.Terminated)}timerM(){this.logger.debug(`Timer M expired for INVITE client transaction ${this.id}.`),this.state===$.Accepted&&this.stateTransition($.Terminated)}}class or{constructor(e,t,r,i){this.transactionConstructor=e,this.core=t,this.message=r,this.delegate=i,this.challenged=!1,this.stale=!1,this.logger=this.loggerFactory.getLogger("sip.user-agent-client"),this.init()}dispose(){this.transaction.dispose()}get loggerFactory(){return this.core.loggerFactory}get transaction(){if(!this._transaction)throw new Error("Transaction undefined.");return this._transaction}cancel(e,t={}){if(!this.transaction)throw new Error("Transaction undefined.");if(!this.message.to)throw new Error("To undefined.");if(!this.message.from)throw new Error("From undefined.");const r=this.core.makeOutgoingRequestMessage(re.CANCEL,this.message.ruri,this.message.from.uri,this.message.to.uri,{toTag:this.message.toTag,fromTag:this.message.fromTag,callId:this.message.callId,cseq:this.message.cseq},t.extraHeaders);return r.branch=this.message.branch,this.message.headers.Route&&(r.headers.Route=this.message.headers.Route),e&&r.setHeader("Reason",e),this.transaction.state===$.Proceeding?new or(ti,this.core,r):this.transaction.addStateChangeListener(()=>{this.transaction&&this.transaction.state===$.Proceeding&&new or(ti,this.core,r)},{once:!0}),r}authenticationGuard(e,t){const r=e.statusCode;if(!r)throw new Error("Response status code undefined.");if(401!==r&&407!==r)return!0;let i,s;if(401===r?(i=e.parseHeader("www-authenticate"),s="authorization"):(i=e.parseHeader("proxy-authenticate"),s="proxy-authorization"),!i)return this.logger.warn(r+" with wrong or missing challenge, cannot authenticate"),!0;if(this.challenged&&(this.stale||!0!==i.stale))return this.logger.warn(r+" apparently in authentication loop, cannot authenticate"),!0;if(!this.credentials&&(this.credentials=this.core.configuration.authenticationFactory(),!this.credentials))return this.logger.warn("Unable to obtain credentials, cannot authenticate"),!0;if(!this.credentials.authenticate(this.message,i))return!0;this.challenged=!0,i.stale&&(this.stale=!0);let o=this.message.cseq+=1;return t&&t.localSequenceNumber&&(t.incrementLocalSequenceNumber(),o=this.message.cseq=t.localSequenceNumber),this.message.setHeader("cseq",o+" "+this.message.method),this.message.setHeader(s,this.credentials.toString()),this.init(),!1}onRequestTimeout(){this.logger.warn("User agent client request timed out. Generating internal 408 Request Timeout.");const e=new Sa;e.statusCode=408,e.reasonPhrase="Request Timeout",this.receiveResponse(e)}onTransportError(e){this.logger.error(e.message),this.logger.error("User agent client request transport error. Generating internal 503 Service Unavailable.");const t=new Sa;t.statusCode=503,t.reasonPhrase="Service Unavailable",this.receiveResponse(t)}receiveResponse(e){if(!this.authenticationGuard(e))return;const t=e.statusCode?e.statusCode.toString():"";if(!t)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(t):this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:e});break;case/^1[0-9]{2}$/.test(t):this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:e});break;case/^2[0-9]{2}$/.test(t):this.delegate&&this.delegate.onAccept&&this.delegate.onAccept({message:e});break;case/^3[0-9]{2}$/.test(t):this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:e});break;case/^[4-6][0-9]{2}$/.test(t):this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:e});break;default:throw new Error(`Invalid status code ${t}`)}}init(){const t=new this.transactionConstructor(this.message,this.core.transport,{loggerFactory:this.loggerFactory,onRequestTimeout:()=>this.onRequestTimeout(),onStateChange:i=>{i===$.Terminated&&(this.core.userAgentClients.delete(r),t===this._transaction&&this.dispose())},onTransportError:i=>this.onTransportError(i),receiveResponse:i=>this.receiveResponse(i)});this._transaction=t;const r=t.id+t.request.method;this.core.userAgentClients.set(r,this)}}class AV extends or{constructor(e,t,r){const i=e.createOutgoingRequestMessage(re.BYE,r);super(ti,e.userAgentCore,i,t),e.dispose()}}class ni extends ex{constructor(e,t,r){super(e,t,r,$.Trying,"sip.transaction.nist")}dispose(){this.J&&(clearTimeout(this.J),this.J=void 0),super.dispose()}get kind(){return"nist"}receiveRequest(e){switch(this.state){case $.Trying:break;case $.Proceeding:if(!this.lastResponse)throw new Error("Last response undefined.");this.send(this.lastResponse).catch(t=>{this.logTransportError(t,"Failed to send retransmission of provisional response.")});break;case $.Completed:if(!this.lastResponse)throw new Error("Last response undefined.");this.send(this.lastResponse).catch(t=>{this.logTransportError(t,"Failed to send retransmission of final response.")});break;case $.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}}receiveResponse(e,t){if(e<100||e>699)throw new Error(`Invalid status code ${e}`);if(e>100&&e<=199)throw new Error("Provisional response other than 100 not allowed.");switch(this.state){case $.Trying:if(this.lastResponse=t,e>=100&&e<200)return this.stateTransition($.Proceeding),void this.send(t).catch(i=>{this.logTransportError(i,"Failed to send provisional response.")});if(e>=200&&e<=699)return this.stateTransition($.Completed),void this.send(t).catch(i=>{this.logTransportError(i,"Failed to send final response.")});break;case $.Proceeding:if(this.lastResponse=t,e>=200&&e<=699)return this.stateTransition($.Completed),void this.send(t).catch(i=>{this.logTransportError(i,"Failed to send final response.")});break;case $.Completed:return;case $.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}const r=`Non-INVITE server transaction received unexpected ${e} response from TU while in state ${this.state}.`;throw this.logger.error(r),new Error(r)}onTransportError(e){this.user.onTransportError&&this.user.onTransportError(e),this.stateTransition($.Terminated,!0)}typeToString(){return"non-INVITE server transaction"}stateTransition(e,t=!1){const r=()=>{throw new Error(`Invalid state transition from ${this.state} to ${e}`)};switch(e){case $.Trying:r();break;case $.Proceeding:this.state!==$.Trying&&r();break;case $.Completed:this.state!==$.Trying&&this.state!==$.Proceeding&&r();break;case $.Terminated:this.state!==$.Proceeding&&this.state!==$.Completed&&(t||r());break;default:r()}e===$.Completed&&(this.J=setTimeout(()=>this.timerJ(),Pn_TIMER_J)),e===$.Terminated&&this.dispose(),this.setState(e)}timerJ(){this.logger.debug(`Timer J expired for NON-INVITE server transaction ${this.id}.`),this.state===$.Completed&&this.stateTransition($.Terminated)}}class Aa extends Bl{constructor(e){super(e||"Transaction state error.")}}class Ns{constructor(e,t,r,i){this.transactionConstructor=e,this.core=t,this.message=r,this.delegate=i,this.logger=this.loggerFactory.getLogger("sip.user-agent-server"),this.toTag=r.toTag?r.toTag:U_(),this.init()}dispose(){this.transaction.dispose()}get loggerFactory(){return this.core.loggerFactory}get transaction(){if(!this._transaction)throw new Error("Transaction undefined.");return this._transaction}accept(e={statusCode:200}){if(!this.acceptable)throw new Aa(`${this.message.method} not acceptable in state ${this.transaction.state}.`);const t=e.statusCode;if(t<200||t>299)throw new TypeError(`Invalid statusCode: ${t}`);return this.reply(e)}progress(e={statusCode:180}){if(!this.progressable)throw new Aa(`${this.message.method} not progressable in state ${this.transaction.state}.`);const t=e.statusCode;if(t<101||t>199)throw new TypeError(`Invalid statusCode: ${t}`);return this.reply(e)}redirect(e,t={statusCode:302}){if(!this.redirectable)throw new Aa(`${this.message.method} not redirectable in state ${this.transaction.state}.`);const r=t.statusCode;if(r<300||r>399)throw new TypeError(`Invalid statusCode: ${r}`);const i=new Array;return e.forEach(o=>i.push(`Contact: ${o.toString()}`)),t.extraHeaders=(t.extraHeaders||[]).concat(i),this.reply(t)}reject(e={statusCode:480}){if(!this.rejectable)throw new Aa(`${this.message.method} not rejectable in state ${this.transaction.state}.`);const t=e.statusCode;if(t<400||t>699)throw new TypeError(`Invalid statusCode: ${t}`);return this.reply(e)}trying(e){if(!this.tryingable)throw new Aa(`${this.message.method} not tryingable in state ${this.transaction.state}.`);return this.reply({statusCode:100})}receiveCancel(e){this.delegate&&this.delegate.onCancel&&this.delegate.onCancel(e)}get acceptable(){if(this.transaction instanceof Lr)return this.transaction.state===$.Proceeding||this.transaction.state===$.Accepted;if(this.transaction instanceof ni)return this.transaction.state===$.Trying||this.transaction.state===$.Proceeding;throw new Error("Unknown transaction type.")}get progressable(){if(this.transaction instanceof Lr)return this.transaction.state===$.Proceeding;if(this.transaction instanceof ni)return!1;throw new Error("Unknown transaction type.")}get redirectable(){if(this.transaction instanceof Lr)return this.transaction.state===$.Proceeding;if(this.transaction instanceof ni)return this.transaction.state===$.Trying||this.transaction.state===$.Proceeding;throw new Error("Unknown transaction type.")}get rejectable(){if(this.transaction instanceof Lr)return this.transaction.state===$.Proceeding;if(this.transaction instanceof ni)return this.transaction.state===$.Trying||this.transaction.state===$.Proceeding;throw new Error("Unknown transaction type.")}get tryingable(){if(this.transaction instanceof Lr)return this.transaction.state===$.Proceeding;if(this.transaction instanceof ni)return this.transaction.state===$.Trying;throw new Error("Unknown transaction type.")}reply(e){!e.toTag&&100!==e.statusCode&&(e.toTag=this.toTag),e.userAgent=e.userAgent||this.core.configuration.userAgentHeaderFieldValue,e.supported=e.supported||this.core.configuration.supportedOptionTagsResponse;const t=XM(this.message,e);return this.transaction.receiveResponse(e.statusCode,t.message),t}init(){const t=new this.transactionConstructor(this.message,this.core.transport,{loggerFactory:this.loggerFactory,onStateChange:i=>{i===$.Terminated&&(this.core.userAgentServers.delete(r),this.dispose())},onTransportError:i=>{this.logger.error(i.message),this.delegate&&this.delegate.onTransportError?this.delegate.onTransportError(i):this.logger.error("User agent server response transport error.")}});this._transaction=t;const r=t.id;this.core.userAgentServers.set(t.id,this)}}class IV extends Ns{constructor(e,t,r){super(ni,e.userAgentCore,t,r)}}class MV extends or{constructor(e,t,r){const i=e.createOutgoingRequestMessage(re.INFO,r);super(ti,e.userAgentCore,i,t)}}class xV extends Ns{constructor(e,t,r){super(ni,e.userAgentCore,t,r)}}class rx extends or{constructor(e,t,r){super(ti,e,t,r)}}class ix extends Ns{constructor(e,t,r){super(ni,e,t,r)}}class RV extends or{constructor(e,t,r){const i=e.createOutgoingRequestMessage(re.NOTIFY,r);super(ti,e.userAgentCore,i,t)}}class G_ extends Ns{constructor(e,t,r){const i=function OV(n){return void 0!==n.userAgentCore}(e)?e.userAgentCore:e;super(ni,i,t,r)}}class PV extends or{constructor(e,t,r){const i=e.createOutgoingRequestMessage(re.PRACK,r);super(ti,e.userAgentCore,i,t),e.signalingStateTransition(i)}}class kV extends Ns{constructor(e,t,r){super(ni,e.userAgentCore,t,r),e.signalingStateTransition(t),this.dialog=e}accept(e={statusCode:200}){return e.body&&this.dialog.signalingStateTransition(e.body),super.accept(e)}}class FV extends or{constructor(e,t,r){const i=e.createOutgoingRequestMessage(re.INVITE,r);super(Ta,e.userAgentCore,i,t),this.delegate=t,e.signalingStateTransition(i),e.reinviteUserAgentClient=this,this.dialog=e}receiveResponse(e){if(!this.authenticationGuard(e,this.dialog))return;const t=e.statusCode?e.statusCode.toString():"";if(!t)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(t):this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:e});break;case/^1[0-9]{2}$/.test(t):this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:e,session:this.dialog,prack:r=>{throw new Error("Unimplemented.")}});break;case/^2[0-9]{2}$/.test(t):this.dialog.signalingStateTransition(e),this.delegate&&this.delegate.onAccept&&this.delegate.onAccept({message:e,session:this.dialog,ack:r=>this.dialog.ack(r)});break;case/^3[0-9]{2}$/.test(t):this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentClient=void 0,this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:e});break;case/^[4-6][0-9]{2}$/.test(t):this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentClient=void 0,this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:e});break;default:throw new Error(`Invalid status code ${t}`)}}}class NV extends Ns{constructor(e,t,r){super(Lr,e.userAgentCore,t,r),e.reinviteUserAgentServer=this,this.dialog=e}accept(e={statusCode:200}){e.extraHeaders=e.extraHeaders||[],e.extraHeaders=e.extraHeaders.concat(this.dialog.routeSet.map(s=>`Record-Route: ${s}`));const t=super.accept(e),r=this.dialog,i=Object.assign(Object.assign({},t),{session:r});return e.body&&this.dialog.signalingStateTransition(e.body),this.dialog.reConfirm(),i}progress(e={statusCode:180}){const t=super.progress(e),r=this.dialog,i=Object.assign(Object.assign({},t),{session:r});return e.body&&this.dialog.signalingStateTransition(e.body),i}redirect(e,t={statusCode:302}){throw this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentServer=void 0,new Error("Unimplemented.")}reject(e={statusCode:488}){return this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentServer=void 0,super.reject(e)}}class LV extends or{constructor(e,t,r){const i=e.createOutgoingRequestMessage(re.REFER,r);super(ti,e.userAgentCore,i,t)}}class sx extends Ns{constructor(e,t,r){const i=function $V(n){return void 0!==n.userAgentCore}(e)?e.userAgentCore:e;super(ni,i,t,r)}}class W_ extends Nu{constructor(e,t,r,i){super(t,r),this.initialTransaction=e,this._signalingState=J.Initial,this.ackWait=!1,this.ackProcessing=!1,this.delegate=i,e instanceof Lr&&(this.ackWait=!0),this.early||this.start2xxRetransmissionTimer(),this.signalingStateTransition(e.request),this.logger=t.loggerFactory.getLogger("sip.invite-dialog"),this.logger.log(`INVITE dialog ${this.id} constructed`)}dispose(){super.dispose(),this._signalingState=J.Closed,this._offer=void 0,this._answer=void 0,this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.logger.log(`INVITE dialog ${this.id} destroyed`)}get sessionState(){return this.early?Si.Early:this.ackWait?Si.AckWait:this._signalingState===J.Closed?Si.Terminated:Si.Confirmed}get signalingState(){return this._signalingState}get offer(){return this._offer}get answer(){return this._answer}confirm(){this.early&&this.start2xxRetransmissionTimer(),super.confirm()}reConfirm(){this.reinviteUserAgentServer&&this.startReInvite2xxRetransmissionTimer()}ack(e={}){let t;if(this.logger.log(`INVITE dialog ${this.id} sending ACK request`),this.reinviteUserAgentClient){if(!(this.reinviteUserAgentClient.transaction instanceof Ta))throw new Error("Transaction not instance of InviteClientTransaction.");t=this.reinviteUserAgentClient.transaction,this.reinviteUserAgentClient=void 0}else{if(!(this.initialTransaction instanceof Ta))throw new Error("Initial transaction not instance of InviteClientTransaction.");t=this.initialTransaction}const r=this.createOutgoingRequestMessage(re.ACK,{cseq:t.request.cseq,extraHeaders:e.extraHeaders,body:e.body});return t.ackResponse(r),this.signalingStateTransition(r),{message:r}}bye(e,t){if(this.logger.log(`INVITE dialog ${this.id} sending BYE request`),this.initialTransaction instanceof Lr){if(this.early)throw new Error("UAS MUST NOT send a BYE on early dialogs.");if(this.ackWait&&this.initialTransaction.state!==$.Terminated)throw new Error("UAS MUST NOT send a BYE on a confirmed dialog until it has received an ACK for its 2xx response or until the server transaction times out.")}return new AV(this,e,t)}info(e,t){if(this.logger.log(`INVITE dialog ${this.id} sending INFO request`),this.early)throw new Error("Dialog not confirmed.");return new MV(this,e,t)}invite(e,t){if(this.logger.log(`INVITE dialog ${this.id} sending INVITE request`),this.early)throw new Error("Dialog not confirmed.");if(this.reinviteUserAgentClient)throw new Error("There is an ongoing re-INVITE client transaction.");if(this.reinviteUserAgentServer)throw new Error("There is an ongoing re-INVITE server transaction.");return new FV(this,e,t)}message(e,t){if(this.logger.log(`INVITE dialog ${this.id} sending MESSAGE request`),this.early)throw new Error("Dialog not confirmed.");const r=this.createOutgoingRequestMessage(re.MESSAGE,t);return new rx(this.core,r,e)}notify(e,t){if(this.logger.log(`INVITE dialog ${this.id} sending NOTIFY request`),this.early)throw new Error("Dialog not confirmed.");return new RV(this,e,t)}prack(e,t){return this.logger.log(`INVITE dialog ${this.id} sending PRACK request`),new PV(this,e,t)}refer(e,t){if(this.logger.log(`INVITE dialog ${this.id} sending REFER request`),this.early)throw new Error("Dialog not confirmed.");return new LV(this,e,t)}receiveRequest(e){if(this.logger.log(`INVITE dialog ${this.id} received ${e.method} request`),e.method!==re.ACK)if(this.sequenceGuard(e)){if(super.receiveRequest(e),e.method===re.INVITE){const t=()=>{this.logger.warn(`INVITE dialog ${this.id} received re-INVITE while ${this.ackWait?"waiting for initial ACK":"processing initial ACK"}`);let o="RFC 5407 suggests the following to avoid this race condition... ";o+=" Note: Implementation issues are outside the scope of this document,",o+=" but the following tip is provided for avoiding race conditions of",o+=" this type.  The caller can delay sending re-INVITE F6 for some period",o+=" of time (2 seconds, perhaps), after which the caller can reasonably",o+=" assume that its ACK has been received.  Implementors can decouple the",o+=" actions of the user (e.g., pressing the hold button) from the actions",o+=" of the protocol (the sending of re-INVITE F6), so that the UA can",o+=" behave like this.  In this case, it is the implementor's choice as to",o+=" how long to wait.  In most cases, such an implementation may be",o+=" useful to prevent the type of race condition shown in this section.",o+=" This document expresses no preference about whether or not they",o+=" should wait for an ACK to be delivered.  After considering the impact",o+=" on user experience, implementors should decide whether or not to wait",o+=" for a while, because the user experience depends on the",o+=" implementation and has no direct bearing on protocol behavior.",this.logger.warn("RFC 5407 suggests the following to avoid this race condition...  Note: Implementation issues are outside the scope of this document, but the following tip is provided for avoiding race conditions of this type.  The caller can delay sending re-INVITE F6 for some period of time (2 seconds, perhaps), after which the caller can reasonably assume that its ACK has been received.  Implementors can decouple the actions of the user (e.g., pressing the hold button) from the actions of the protocol (the sending of re-INVITE F6), so that the UA can behave like this.  In this case, it is the implementor's choice as to how long to wait.  In most cases, such an implementation may be useful to prevent the type of race condition shown in this section. This document expresses no preference about whether or not they should wait for an ACK to be delivered.  After considering the impact on user experience, implementors should decide whether or not to wait for a while, because the user experience depends on the implementation and has no direct bearing on protocol behavior.")},i=[`Retry-After: ${Math.floor(10*Math.random())+1}`];if(this.ackProcessing)return this.core.replyStateless(e,{statusCode:500,extraHeaders:i}),void t();if(this.ackWait&&this.signalingState!==J.Stable)return this.core.replyStateless(e,{statusCode:500,extraHeaders:i}),void t();if(this.reinviteUserAgentServer)return void this.core.replyStateless(e,{statusCode:500,extraHeaders:i});if(this.reinviteUserAgentClient)return void this.core.replyStateless(e,{statusCode:491})}if(e.method===re.INVITE){const t=e.parseHeader("contact");if(!t)throw new Error("Contact undefined.");if(!(t instanceof Nr))throw new Error("Contact not instance of NameAddrHeader.");this.dialogState.remoteTarget=t.uri}switch(e.method){case re.BYE:{const t=new IV(this,e);this.delegate&&this.delegate.onBye?this.delegate.onBye(t):t.accept(),this.dispose()}break;case re.INFO:{const t=new xV(this,e);this.delegate&&this.delegate.onInfo?this.delegate.onInfo(t):t.reject({statusCode:469,extraHeaders:["Recv-Info:"]})}break;case re.INVITE:{const t=new NV(this,e);this.signalingStateTransition(e),this.delegate&&this.delegate.onInvite?this.delegate.onInvite(t):t.reject({statusCode:488})}break;case re.MESSAGE:{const t=new ix(this.core,e);this.delegate&&this.delegate.onMessage?this.delegate.onMessage(t):t.accept()}break;case re.NOTIFY:{const t=new G_(this,e);this.delegate&&this.delegate.onNotify?this.delegate.onNotify(t):t.accept()}break;case re.PRACK:{const t=new kV(this,e);this.delegate&&this.delegate.onPrack?this.delegate.onPrack(t):t.accept()}break;case re.REFER:{const t=new sx(this,e);this.delegate&&this.delegate.onRefer?this.delegate.onRefer(t):t.reject()}break;default:this.logger.log(`INVITE dialog ${this.id} received unimplemented ${e.method} request`),this.core.replyStateless(e,{statusCode:501})}}else this.logger.log(`INVITE dialog ${this.id} rejected out of order ${e.method} request.`);else{if(this.ackWait){if(this.initialTransaction instanceof Ta)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${e.method} request, dropping.`);if(this.initialTransaction.request.cseq!==e.cseq)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${e.method} request, dropping.`);this.ackWait=!1}else{if(!this.reinviteUserAgentServer)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${e.method} request, dropping.`);if(this.reinviteUserAgentServer.transaction.request.cseq!==e.cseq)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${e.method} request, dropping.`);this.reinviteUserAgentServer=void 0}if(this.signalingStateTransition(e),this.delegate&&this.delegate.onAck){const t=this.delegate.onAck({message:e});t instanceof Promise&&(this.ackProcessing=!0,t.then(()=>this.ackProcessing=!1).catch(()=>this.ackProcessing=!1))}}}reliableSequenceGuard(e){const t=e.statusCode;if(!t)throw new Error("Status code undefined");if(t>100&&t<200){const r=e.getHeader("require"),i=e.getHeader("rseq"),s=r&&r.includes("100rel")&&i?Number(i):void 0;if(s){if(this.rseq&&this.rseq+1!==s)return!1;this.rseq=this.rseq?this.rseq+1:s}}return!0}signalingStateRollback(){(this._signalingState===J.HaveLocalOffer||this.signalingState===J.HaveRemoteOffer)&&this._rollbackOffer&&this._rollbackAnswer&&(this._signalingState=J.Stable,this._offer=this._rollbackOffer,this._answer=this._rollbackAnswer)}signalingStateTransition(e){const t=Tf(e);if(t&&"session"===t.contentDisposition){if(this._signalingState===J.Stable&&(this._rollbackOffer=this._offer,this._rollbackAnswer=this._answer),e instanceof Fu)switch(this._signalingState){case J.Initial:case J.Stable:this._signalingState=J.HaveRemoteOffer,this._offer=t,this._answer=void 0;break;case J.HaveLocalOffer:this._signalingState=J.Stable,this._answer=t;break;case J.HaveRemoteOffer:case J.Closed:break;default:throw new Error("Unexpected signaling state.")}if(e instanceof Sa)switch(this._signalingState){case J.Initial:case J.Stable:this._signalingState=J.HaveRemoteOffer,this._offer=t,this._answer=void 0;break;case J.HaveLocalOffer:this._signalingState=J.Stable,this._answer=t;break;case J.HaveRemoteOffer:case J.Closed:break;default:throw new Error("Unexpected signaling state.")}if(e instanceof Vl)switch(this._signalingState){case J.Initial:case J.Stable:this._signalingState=J.HaveLocalOffer,this._offer=t,this._answer=void 0;break;case J.HaveLocalOffer:break;case J.HaveRemoteOffer:this._signalingState=J.Stable,this._answer=t;break;case J.Closed:break;default:throw new Error("Unexpected signaling state.")}if(nx(e))switch(this._signalingState){case J.Initial:case J.Stable:this._signalingState=J.HaveLocalOffer,this._offer=t,this._answer=void 0;break;case J.HaveLocalOffer:break;case J.HaveRemoteOffer:this._signalingState=J.Stable,this._answer=t;break;case J.Closed:break;default:throw new Error("Unexpected signaling state.")}}}start2xxRetransmissionTimer(){if(this.initialTransaction instanceof Lr){const e=this.initialTransaction;let t=Pn_T1;const r=()=>{this.ackWait?(this.logger.log("No ACK for 2xx response received, attempting retransmission"),e.retransmitAcceptedResponse(),t=Math.min(2*t,Pn_T2),this.invite2xxTimer=setTimeout(r,t)):this.invite2xxTimer=void 0};this.invite2xxTimer=setTimeout(r,t);const i=()=>{e.state===$.Terminated&&(e.removeStateChangeListener(i),this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.ackWait&&(this.delegate&&this.delegate.onAckTimeout?this.delegate.onAckTimeout():this.bye()))};e.addStateChangeListener(i)}}startReInvite2xxRetransmissionTimer(){if(this.reinviteUserAgentServer&&this.reinviteUserAgentServer.transaction instanceof Lr){const e=this.reinviteUserAgentServer.transaction;let t=Pn_T1;const r=()=>{this.reinviteUserAgentServer?(this.logger.log("No ACK for 2xx response received, attempting retransmission"),e.retransmitAcceptedResponse(),t=Math.min(2*t,Pn_T2),this.invite2xxTimer=setTimeout(r,t)):this.invite2xxTimer=void 0};this.invite2xxTimer=setTimeout(r,t);const i=()=>{e.state===$.Terminated&&(e.removeStateChangeListener(i),this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0))};e.addStateChangeListener(i)}}}class VV extends or{constructor(e,t,r){super(Ta,e,t,r),this.confirmedDialogAcks=new Map,this.confirmedDialogs=new Map,this.earlyDialogs=new Map,this.delegate=r}dispose(){this.earlyDialogs.forEach(e=>e.dispose()),this.earlyDialogs.clear(),super.dispose()}onTransportError(e){if(this.transaction.state===$.Calling)return super.onTransportError(e);this.logger.error(e.message),this.logger.error("User agent client request transport error while sending ACK.")}receiveResponse(e){if(!this.authenticationGuard(e))return;const t=e.statusCode?e.statusCode.toString():"";if(!t)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(t):return void(this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:e}));case/^1[0-9]{2}$/.test(t):{if(!e.toTag)return void this.logger.warn("Non-100 1xx INVITE response received without a to tag, dropping.");if(!e.parseHeader("contact"))return void this.logger.error("Non-100 1xx INVITE response received without a Contact header field, dropping.");const i=Nu.initialDialogStateForUserAgentClient(this.message,e);let s=this.earlyDialogs.get(i.id);if(!s){const l=this.transaction;if(!(l instanceof Ta))throw new Error("Transaction not instance of InviteClientTransaction.");s=new W_(l,this.core,i),this.earlyDialogs.set(s.id,s)}if(!s.reliableSequenceGuard(e))return void this.logger.warn("1xx INVITE reliable response received out of order or is a retransmission, dropping.");(s.signalingState===J.Initial||s.signalingState===J.HaveLocalOffer)&&s.signalingStateTransition(e);const o=s;this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:e,session:o,prack:l=>o.prack(void 0,l)})}return;case/^2[0-9]{2}$/.test(t):{if(!e.toTag)return void this.logger.error("2xx INVITE response received without a to tag, dropping.");if(!e.parseHeader("contact"))return void this.logger.error("2xx INVITE response received without a Contact header field, dropping.");const i=Nu.initialDialogStateForUserAgentClient(this.message,e);let s=this.confirmedDialogs.get(i.id);if(s){const l=this.confirmedDialogAcks.get(i.id);if(l){const u=this.transaction;if(!(u instanceof Ta))throw new Error("Client transaction not instance of InviteClientTransaction.");u.ackResponse(l.message)}return}if(s=this.earlyDialogs.get(i.id),s)s.confirm(),s.recomputeRouteSet(e),this.earlyDialogs.delete(s.id),this.confirmedDialogs.set(s.id,s);else{const l=this.transaction;if(!(l instanceof Ta))throw new Error("Transaction not instance of InviteClientTransaction.");s=new W_(l,this.core,i),this.confirmedDialogs.set(s.id,s)}(s.signalingState===J.Initial||s.signalingState===J.HaveLocalOffer)&&s.signalingStateTransition(e);const o=s;if(this.delegate&&this.delegate.onAccept)this.delegate.onAccept({message:e,session:o,ack:l=>{const u=o.ack(l);return this.confirmedDialogAcks.set(o.id,u),u}});else{const l=o.ack();this.confirmedDialogAcks.set(o.id,l)}}return;case/^3[0-9]{2}$/.test(t):return this.earlyDialogs.forEach(r=>r.dispose()),this.earlyDialogs.clear(),void(this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:e}));case/^[4-6][0-9]{2}$/.test(t):return this.earlyDialogs.forEach(r=>r.dispose()),this.earlyDialogs.clear(),void(this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:e}));default:throw new Error(`Invalid status code ${t}`)}throw new Error(`Executing what should be an unreachable code path receiving ${t} response.`)}}const Ia=[re.ACK,re.BYE,re.CANCEL,re.INFO,re.INVITE,re.MESSAGE,re.NOTIFY,re.OPTIONS,re.PRACK,re.REFER,re.REGISTER,re.SUBSCRIBE];class Sb extends Ns{constructor(e,t,r){super(Lr,e,t,r),this.core=e}dispose(){this.earlyDialog&&this.earlyDialog.dispose(),super.dispose()}accept(e={statusCode:200}){if(!this.acceptable)throw new Aa(`${this.message.method} not acceptable in state ${this.transaction.state}.`);if(!this.confirmedDialog)if(this.earlyDialog)this.earlyDialog.confirm(),this.confirmedDialog=this.earlyDialog,this.earlyDialog=void 0;else{const u=this.transaction;if(!(u instanceof Lr))throw new Error("Transaction not instance of InviteClientTransaction.");const d=Nu.initialDialogStateForUserAgentServer(this.message,this.toTag);this.confirmedDialog=new W_(u,this.core,d)}const t=this.message.getHeaders("record-route").map(u=>`Record-Route: ${u}`),r=`Contact: ${this.core.configuration.contact.toString()}`,i="Allow: "+Ia.toString();if(!e.body)if(this.confirmedDialog.signalingState===J.Stable)e.body=this.confirmedDialog.answer;else if(this.confirmedDialog.signalingState===J.Initial||this.confirmedDialog.signalingState===J.HaveRemoteOffer)throw new Error("Response must have a body.");e.statusCode=e.statusCode||200,e.extraHeaders=e.extraHeaders||[],e.extraHeaders=e.extraHeaders.concat(t),e.extraHeaders.push(i),e.extraHeaders.push(r);const s=super.accept(e),o=this.confirmedDialog,l=Object.assign(Object.assign({},s),{session:o});return e.body&&this.confirmedDialog.signalingState!==J.Stable&&this.confirmedDialog.signalingStateTransition(e.body),l}progress(e={statusCode:180}){if(!this.progressable)throw new Aa(`${this.message.method} not progressable in state ${this.transaction.state}.`);if(!this.earlyDialog){const l=this.transaction;if(!(l instanceof Lr))throw new Error("Transaction not instance of InviteClientTransaction.");const u=Nu.initialDialogStateForUserAgentServer(this.message,this.toTag,!0);this.earlyDialog=new W_(l,this.core,u)}const t=this.message.getHeaders("record-route").map(l=>`Record-Route: ${l}`),r=`Contact: ${this.core.configuration.contact}`;e.extraHeaders=e.extraHeaders||[],e.extraHeaders=e.extraHeaders.concat(t),e.extraHeaders.push(r);const i=super.progress(e),s=this.earlyDialog,o=Object.assign(Object.assign({},i),{session:s});return e.body&&this.earlyDialog.signalingState!==J.Stable&&this.earlyDialog.signalingStateTransition(e.body),o}redirect(e,t={statusCode:302}){return super.redirect(e,t)}reject(e={statusCode:486}){return super.reject(e)}}class BV extends or{constructor(e,t,r){super(ti,e,t,r)}}class HV extends or{constructor(e,t,r){super(ti,e,t,r)}}class UV extends Ns{constructor(e,t,r){super(ni,e,t,r),this.core=e}}var tt;!function(n){n.Initial="Initial",n.NotifyWait="NotifyWait",n.Pending="Pending",n.Active="Active",n.Terminated="Terminated"}(tt=tt||(tt={}));class jV extends or{constructor(e,t,r){const i=e.createOutgoingRequestMessage(re.SUBSCRIBE,r);super(ti,e.userAgentCore,i,t),this.dialog=e}waitNotifyStop(){}receiveResponse(e){if(e.statusCode&&e.statusCode>=200&&e.statusCode<300){const t=e.getHeader("Expires");if(t){const r=Number(t);this.dialog.subscriptionExpires>r&&(this.dialog.subscriptionExpires=r)}else this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE")}e.statusCode&&e.statusCode>=400&&e.statusCode<700&&[404,405,410,416,480,481,482,483,484,485,489,501,604].includes(e.statusCode)&&this.dialog.terminate(),super.receiveResponse(e)}}class ox extends Nu{constructor(e,t,r,i,s,o){super(i,s),this.delegate=o,this._autoRefresh=!1,this._subscriptionEvent=e,this._subscriptionExpires=t,this._subscriptionExpiresInitial=t,this._subscriptionExpiresLastSet=Math.floor(Date.now()/1e3),this._subscriptionRefresh=void 0,this._subscriptionRefreshLastSet=void 0,this._subscriptionState=r,this.logger=i.loggerFactory.getLogger("sip.subscribe-dialog"),this.logger.log(`SUBSCRIBE dialog ${this.id} constructed`)}static initialDialogStateForSubscription(e,t){const i=t.getHeaders("record-route"),s=t.parseHeader("contact");if(!s)throw new Error("Contact undefined.");if(!(s instanceof Nr))throw new Error("Contact not instance of NameAddrHeader.");const o=s.uri,l=e.cseq,d=e.callId,f=e.fromTag,p=t.fromTag;if(!d)throw new Error("Call id undefined.");if(!f)throw new Error("From tag undefined.");if(!p)throw new Error("To tag undefined.");if(!e.from)throw new Error("From undefined.");if(!e.to)throw new Error("To undefined.");return{id:d+f+p,early:!1,callId:d,localTag:f,remoteTag:p,localSequenceNumber:l,remoteSequenceNumber:void 0,localURI:e.from.uri,remoteURI:e.to.uri,remoteTarget:o,routeSet:i,secure:!1}}dispose(){super.dispose(),this.N&&(clearTimeout(this.N),this.N=void 0),this.refreshTimerClear(),this.logger.log(`SUBSCRIBE dialog ${this.id} destroyed`)}get autoRefresh(){return this._autoRefresh}set autoRefresh(e){this._autoRefresh=!0,this.refreshTimerSet()}get subscriptionEvent(){return this._subscriptionEvent}get subscriptionExpires(){const e=Math.floor(Date.now()/1e3)-this._subscriptionExpiresLastSet;return Math.max(this._subscriptionExpires-e,0)}set subscriptionExpires(e){if(e<0)throw new Error("Expires must be greater than or equal to zero.");if(this._subscriptionExpires=e,this._subscriptionExpiresLastSet=Math.floor(Date.now()/1e3),this.autoRefresh){const t=this.subscriptionRefresh;(void 0===t||t>=e)&&this.refreshTimerSet()}}get subscriptionExpiresInitial(){return this._subscriptionExpiresInitial}get subscriptionRefresh(){if(void 0===this._subscriptionRefresh||void 0===this._subscriptionRefreshLastSet)return;const e=Math.floor(Date.now()/1e3)-this._subscriptionRefreshLastSet;return Math.max(this._subscriptionRefresh-e,0)}get subscriptionState(){return this._subscriptionState}receiveRequest(e){this.logger.log(`SUBSCRIBE dialog ${this.id} received ${e.method} request`),this.sequenceGuard(e)?(super.receiveRequest(e),e.method===re.NOTIFY?this.onNotify(e):(this.logger.log(`SUBSCRIBE dialog ${this.id} received unimplemented ${e.method} request`),this.core.replyStateless(e,{statusCode:501}))):this.logger.log(`SUBSCRIBE dialog ${this.id} rejected out of order ${e.method} request.`)}refresh(){const e="Allow: "+Ia.toString(),t={};return t.extraHeaders=(t.extraHeaders||[]).slice(),t.extraHeaders.push(e),t.extraHeaders.push("Event: "+this.subscriptionEvent),t.extraHeaders.push("Expires: "+this.subscriptionExpiresInitial),t.extraHeaders.push("Contact: "+this.core.configuration.contact.toString()),this.subscribe(void 0,t)}subscribe(e,t={}){var r;if(this.subscriptionState!==tt.Pending&&this.subscriptionState!==tt.Active)throw new Error(`Invalid state ${this.subscriptionState}. May only re-subscribe while in state "pending" or "active".`);this.logger.log(`SUBSCRIBE dialog ${this.id} sending SUBSCRIBE request`);const i=new jV(this,e,t);return this.N&&(clearTimeout(this.N),this.N=void 0),!(null===(r=t.extraHeaders)||void 0===r)&&r.includes("Expires: 0")||(this.N=setTimeout(()=>this.timerN(),Pn_TIMER_N)),i}terminate(){this.stateTransition(tt.Terminated),this.onTerminated()}unsubscribe(){const e="Allow: "+Ia.toString(),t={};return t.extraHeaders=(t.extraHeaders||[]).slice(),t.extraHeaders.push(e),t.extraHeaders.push("Event: "+this.subscriptionEvent),t.extraHeaders.push("Expires: 0"),t.extraHeaders.push("Contact: "+this.core.configuration.contact.toString()),this.subscribe(void 0,t)}onNotify(e){const t=e.parseHeader("Event").event;if(!t||t!==this.subscriptionEvent)return void this.core.replyStateless(e,{statusCode:489});this.N&&(clearTimeout(this.N),this.N=void 0);const r=e.parseHeader("Subscription-State");if(!r||!r.state)return void this.core.replyStateless(e,{statusCode:489});const i=r.state,s=r.expires?Math.max(r.expires,0):void 0;switch(i){case"pending":this.stateTransition(tt.Pending,s);break;case"active":this.stateTransition(tt.Active,s);break;case"terminated":this.stateTransition(tt.Terminated,s);break;default:this.logger.warn("Unrecognized subscription state.")}const o=new G_(this,e);this.delegate&&this.delegate.onNotify?this.delegate.onNotify(o):o.accept()}onRefresh(e){this.delegate&&this.delegate.onRefresh&&this.delegate.onRefresh(e)}onTerminated(){this.delegate&&this.delegate.onTerminated&&this.delegate.onTerminated()}refreshTimerClear(){this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=void 0)}refreshTimerSet(){if(this.refreshTimerClear(),this.autoRefresh&&this.subscriptionExpires>0){const e=900*this.subscriptionExpires;this._subscriptionRefresh=Math.floor(e/1e3),this._subscriptionRefreshLastSet=Math.floor(Date.now()/1e3),this.refreshTimer=setTimeout(()=>{this.refreshTimer=void 0,this._subscriptionRefresh=void 0,this._subscriptionRefreshLastSet=void 0,this.onRefresh(this.refresh())},e)}}stateTransition(e,t){const r=()=>{this.logger.warn(`Invalid subscription state transition from ${this.subscriptionState} to ${e}`)};switch(e){case tt.Initial:case tt.NotifyWait:return void r();case tt.Pending:if(this.subscriptionState!==tt.NotifyWait&&this.subscriptionState!==tt.Pending)return void r();break;case tt.Active:case tt.Terminated:if(this.subscriptionState!==tt.NotifyWait&&this.subscriptionState!==tt.Pending&&this.subscriptionState!==tt.Active)return void r();break;default:return void r()}e===tt.Pending&&t&&(this.subscriptionExpires=t),e===tt.Active&&t&&(this.subscriptionExpires=t),e===tt.Terminated&&this.dispose(),this._subscriptionState=e}timerN(){this.logger.warn("Timer N expired for SUBSCRIBE dialog. Timed out waiting for NOTIFY."),this.subscriptionState!==tt.Terminated&&(this.stateTransition(tt.Terminated),this.onTerminated())}}class qV extends or{constructor(e,t,r){const i=t.getHeader("Event");if(!i)throw new Error("Event undefined");const s=t.getHeader("Expires");if(!s)throw new Error("Expires undefined");super(ti,e,t,r),this.delegate=r,this.subscriberId=t.callId+t.fromTag+i,this.subscriptionExpiresRequested=this.subscriptionExpires=Number(s),this.subscriptionEvent=i,this.subscriptionState=tt.NotifyWait,this.waitNotifyStart()}dispose(){super.dispose()}onNotify(e){const t=e.message.parseHeader("Event").event;if(!t||t!==this.subscriptionEvent)return this.logger.warn("Failed to parse event."),void e.reject({statusCode:489});const r=e.message.parseHeader("Subscription-State");if(!r||!r.state)return this.logger.warn("Failed to parse subscription state."),void e.reject({statusCode:489});const i=r.state;switch(i){case"pending":case"active":case"terminated":break;default:return this.logger.warn(`Invalid subscription state ${i}`),void e.reject({statusCode:489})}if("terminated"!==i&&!e.message.parseHeader("contact"))return this.logger.warn("Failed to parse contact."),void e.reject({statusCode:489});if(this.dialog)throw new Error("Dialog already created. This implementation only supports install of single subscriptions.");switch(this.waitNotifyStop(),this.subscriptionExpires=r.expires?Math.min(this.subscriptionExpires,Math.max(r.expires,0)):this.subscriptionExpires,i){case"pending":this.subscriptionState=tt.Pending;break;case"active":this.subscriptionState=tt.Active;break;case"terminated":this.subscriptionState=tt.Terminated;break;default:throw new Error(`Unrecognized state ${i}.`)}if(this.subscriptionState!==tt.Terminated){const s=ox.initialDialogStateForSubscription(this.message,e.message);this.dialog=new ox(this.subscriptionEvent,this.subscriptionExpires,this.subscriptionState,this.core,s)}this.delegate&&this.delegate.onNotify?this.delegate.onNotify({request:e,subscription:this.dialog}):e.accept()}waitNotifyStart(){this.N||(this.core.subscribers.set(this.subscriberId,this),this.N=setTimeout(()=>this.timerN(),Pn_TIMER_N))}waitNotifyStop(){this.N&&(this.core.subscribers.delete(this.subscriberId),clearTimeout(this.N),this.N=void 0)}receiveResponse(e){if(this.authenticationGuard(e)){if(e.statusCode&&e.statusCode>=200&&e.statusCode<300){const t=e.getHeader("Expires");if(t){const r=Number(t);r>this.subscriptionExpiresRequested&&this.logger.warn("Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request"),r<this.subscriptionExpires&&(this.subscriptionExpires=r)}else this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE");this.dialog&&this.dialog.subscriptionExpires>this.subscriptionExpires&&(this.dialog.subscriptionExpires=this.subscriptionExpires)}e.statusCode&&e.statusCode>=300&&e.statusCode<700&&this.waitNotifyStop(),super.receiveResponse(e)}}timerN(){this.logger.warn("Timer N expired for SUBSCRIBE user agent client. Timed out waiting for NOTIFY."),this.waitNotifyStop(),this.delegate&&this.delegate.onNotifyTimeout&&this.delegate.onNotifyTimeout()}}class zV extends Ns{constructor(e,t,r){super(ni,e,t,r),this.core=e}}const ax=["application/sdp","application/dtmf-relay"];class GV{constructor(e,t={}){this.userAgentClients=new Map,this.userAgentServers=new Map,this.configuration=e,this.delegate=t,this.dialogs=new Map,this.subscribers=new Map,this.logger=e.loggerFactory.getLogger("sip.user-agent-core")}dispose(){this.reset()}reset(){this.dialogs.forEach(e=>e.dispose()),this.dialogs.clear(),this.subscribers.forEach(e=>e.dispose()),this.subscribers.clear(),this.userAgentClients.forEach(e=>e.dispose()),this.userAgentClients.clear(),this.userAgentServers.forEach(e=>e.dispose()),this.userAgentServers.clear()}get loggerFactory(){return this.configuration.loggerFactory}get transport(){const e=this.configuration.transportAccessor();if(!e)throw new Error("Transport undefined.");return e}invite(e,t){return new VV(this,e,t)}message(e,t){return new rx(this,e,t)}publish(e,t){return new BV(this,e,t)}register(e,t){return new HV(this,e,t)}subscribe(e,t){return new qV(this,e,t)}request(e,t){return new or(ti,this,e,t)}makeOutgoingRequestMessage(e,t,r,i,s,o,l){const u=this.configuration.sipjsId,d=this.configuration.displayName,f=this.configuration.viaForceRport,p=this.configuration.hackViaTcp,y=this.configuration.supportedOptionTags.slice();e===re.REGISTER&&y.push("path","gruu"),e===re.INVITE&&(this.configuration.contact.pubGruu||this.configuration.contact.tempGruu)&&y.push("gruu");const V=Object.assign(Object.assign({},{callIdPrefix:u,forceRport:f,fromDisplayName:d,hackViaTcp:p,optionTags:y,routeSet:this.configuration.routeSet,userAgentString:this.configuration.userAgentHeaderFieldValue,viaHost:this.configuration.viaHost}),s);return new Vl(e,t,r,i,V,o,l)}receiveIncomingRequestFromTransport(e){this.receiveRequestFromTransport(e)}receiveIncomingResponseFromTransport(e){this.receiveResponseFromTransport(e)}replyStateless(e,t){const r=this.configuration.userAgentHeaderFieldValue,i=this.configuration.supportedOptionTagsResponse;t=Object.assign(Object.assign({},t),{userAgent:r,supported:i});const s=XM(e,t);return this.transport.send(s.message).catch(o=>{o instanceof Error&&this.logger.error(o.message),this.logger.error(`Transport error occurred sending stateless reply to ${e.method} request.`)}),s}receiveRequestFromTransport(e){const t=e.viaBranch,r=this.userAgentServers.get(t);e.method===re.ACK&&r&&r.transaction.state===$.Accepted&&r instanceof Sb?this.logger.warn(`Discarding out of dialog ACK after 2xx response sent on transaction ${t}.`):e.method!==re.CANCEL?r?r.transaction.receiveRequest(e):this.receiveRequest(e):r?(this.replyStateless(e,{statusCode:200}),r.transaction instanceof Lr&&r.transaction.state===$.Proceeding&&r instanceof Sb&&r.receiveCancel(e)):this.replyStateless(e,{statusCode:481})}receiveRequest(e){if(!Ia.includes(e.method)){const i="Allow: "+Ia.toString();return void this.replyStateless(e,{statusCode:405,extraHeaders:[i]})}if(!e.ruri)throw new Error("Request-URI undefined.");if("sip"!==e.ruri.scheme)return void this.replyStateless(e,{statusCode:416});const t=e.ruri,r=i=>!!i&&i.user===t.user;if(!r(this.configuration.aor)&&!(r(this.configuration.contact.uri)||r(this.configuration.contact.pubGruu)||r(this.configuration.contact.tempGruu)))return this.logger.warn("Request-URI does not point to us."),void(e.method!==re.ACK&&this.replyStateless(e,{statusCode:404}));if(e.method!==re.INVITE||e.hasHeader("Contact")){if(!e.toTag&&!this.userAgentServers.has(e.viaBranch)&&Array.from(this.userAgentServers.values()).some(o=>o.transaction.request.fromTag===e.fromTag&&o.transaction.request.callId===e.callId&&o.transaction.request.cseq===e.cseq))return void this.replyStateless(e,{statusCode:482});e.toTag?this.receiveInsideDialogRequest(e):this.receiveOutsideDialogRequest(e)}else this.replyStateless(e,{statusCode:400,reasonPhrase:"Missing Contact Header"})}receiveInsideDialogRequest(e){if(e.method===re.NOTIFY){const i=e.parseHeader("Event");if(!i||!i.event)return void this.replyStateless(e,{statusCode:489});const o=this.subscribers.get(e.callId+e.toTag+i.event);if(o){const l=new G_(this,e);return void o.onNotify(l)}}const r=this.dialogs.get(e.callId+e.toTag+e.fromTag);if(r){if(e.method===re.OPTIONS){const i="Allow: "+Ia.toString(),s="Accept: "+ax.toString();return void this.replyStateless(e,{statusCode:200,extraHeaders:[i,s]})}r.receiveRequest(e)}else e.method!==re.ACK&&this.replyStateless(e,{statusCode:481})}receiveOutsideDialogRequest(e){switch(e.method){case re.ACK:break;case re.BYE:this.replyStateless(e,{statusCode:481});break;case re.CANCEL:throw new Error(`Unexpected out of dialog request method ${e.method}.`);case re.INFO:this.replyStateless(e,{statusCode:405});break;case re.INVITE:{const t=new Sb(this,e);this.delegate.onInvite?this.delegate.onInvite(t):t.reject()}break;case re.MESSAGE:{const t=new ix(this,e);this.delegate.onMessage?this.delegate.onMessage(t):t.accept()}break;case re.NOTIFY:{const t=new G_(this,e);this.delegate.onNotify?this.delegate.onNotify(t):t.reject({statusCode:405})}break;case re.OPTIONS:{const t="Allow: "+Ia.toString(),r="Accept: "+ax.toString();this.replyStateless(e,{statusCode:200,extraHeaders:[t,r]})}break;case re.REFER:{const t=new sx(this,e);this.delegate.onRefer?this.delegate.onRefer(t):t.reject({statusCode:405})}break;case re.REGISTER:{const t=new UV(this,e);this.delegate.onRegister?this.delegate.onRegister(t):t.reject({statusCode:405})}break;case re.SUBSCRIBE:{const t=new zV(this,e);this.delegate.onSubscribe?this.delegate.onSubscribe(t):t.reject({statusCode:480})}break;default:throw new Error(`Unexpected out of dialog request method ${e.method}.`)}}receiveResponseFromTransport(e){if(e.getHeaders("via").length>1)return void this.logger.warn("More than one Via header field present in the response, dropping");const t=e.viaBranch+e.method,r=this.userAgentClients.get(t);r?r.transaction.receiveResponse(e):this.logger.warn(`Discarding unmatched ${e.statusCode} response to ${e.method} ${t}.`)}}class Ls{constructor(e,t,r){e.debug("SessionDescriptionHandler.constructor"),this.logger=e,this.mediaStreamFactory=t,this.sessionDescriptionHandlerConfiguration=r,this._localMediaStream=new MediaStream,this._remoteMediaStream=new MediaStream,this._peerConnection=new RTCPeerConnection(r?.peerConnectionConfiguration),this.initPeerConnectionEventHandlers()}get localMediaStream(){return this._localMediaStream}get remoteMediaStream(){return this._remoteMediaStream}get dataChannel(){return this._dataChannel}get peerConnection(){return this._peerConnection}get peerConnectionDelegate(){return this._peerConnectionDelegate}set peerConnectionDelegate(e){this._peerConnectionDelegate=e}static dispatchAddTrackEvent(e,t){e.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:t}))}static dispatchRemoveTrackEvent(e,t){e.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:t}))}close(){this.logger.debug("SessionDescriptionHandler.close"),void 0!==this._peerConnection&&(this._peerConnection.getReceivers().forEach(e=>{e.track&&e.track.stop()}),this._peerConnection.getSenders().forEach(e=>{e.track&&e.track.stop()}),this._dataChannel&&this._dataChannel.close(),this._peerConnection.close(),this._peerConnection=void 0)}enableReceiverTracks(e){const t=this.peerConnection;if(!t)throw new Error("Peer connection closed.");t.getReceivers().forEach(r=>{r.track&&(r.track.enabled=e)})}enableSenderTracks(e){const t=this.peerConnection;if(!t)throw new Error("Peer connection closed.");t.getSenders().forEach(r=>{r.track&&(r.track.enabled=e)})}getDescription(e,t){var r,i;if(this.logger.debug("SessionDescriptionHandler.getDescription"),void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));this.onDataChannel=e?.onDataChannel;const s=null===(r=e?.offerOptions)||void 0===r?void 0:r.iceRestart,o=void 0===e?.iceGatheringTimeout?null===(i=this.sessionDescriptionHandlerConfiguration)||void 0===i?void 0:i.iceGatheringTimeout:e?.iceGatheringTimeout;return this.getLocalMediaStream(e).then(()=>this.updateDirection(e)).then(()=>this.createDataChannel(e)).then(()=>this.createLocalOfferOrAnswer(e)).then(l=>this.applyModifiers(l,t)).then(l=>this.setLocalSessionDescription(l)).then(()=>this.waitForIceGatheringComplete(s,o)).then(()=>this.getLocalSessionDescription()).then(l=>({body:l.sdp,contentType:"application/sdp"})).catch(l=>{throw this.logger.error("SessionDescriptionHandler.getDescription failed - "+l),l})}hasDescription(e){return this.logger.debug("SessionDescriptionHandler.hasDescription"),"application/sdp"===e}iceGatheringComplete(){this.logger.debug("SessionDescriptionHandler.iceGatheringComplete"),void 0!==this.iceGatheringCompleteTimeoutId&&(this.logger.debug("SessionDescriptionHandler.iceGatheringComplete - clearing timeout"),clearTimeout(this.iceGatheringCompleteTimeoutId),this.iceGatheringCompleteTimeoutId=void 0),void 0!==this.iceGatheringCompletePromise&&(this.logger.debug("SessionDescriptionHandler.iceGatheringComplete - resolving promise"),this.iceGatheringCompleteResolve&&this.iceGatheringCompleteResolve(),this.iceGatheringCompletePromise=void 0,this.iceGatheringCompleteResolve=void 0,this.iceGatheringCompleteReject=void 0)}sendDtmf(e,t){if(this.logger.debug("SessionDescriptionHandler.sendDtmf"),void 0===this._peerConnection)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - peer connection closed"),!1;const r=this._peerConnection.getSenders();if(0===r.length)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - no senders"),!1;const i=r[0].dtmf;if(!i)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - no DTMF sender"),!1;const s=t?.duration,o=t?.interToneGap;try{i.insertDTMF(e,s,o)}catch(l){return this.logger.error(l.toString()),!1}return this.logger.log("SessionDescriptionHandler.sendDtmf sent via RTP: "+e.toString()),!0}setDescription(e,t,r){if(this.logger.debug("SessionDescriptionHandler.setDescription"),void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));this.onDataChannel=t?.onDataChannel;const i="have-local-offer"===this._peerConnection.signalingState?"answer":"offer";return this.getLocalMediaStream(t).then(()=>this.applyModifiers({sdp:e,type:i},r)).then(s=>this.setRemoteSessionDescription(s)).catch(s=>{throw this.logger.error("SessionDescriptionHandler.setDescription failed - "+s),s})}applyModifiers(e,t){return this.logger.debug("SessionDescriptionHandler.applyModifiers"),t&&0!==t.length?t.reduce((r,i)=>r.then(i),Promise.resolve(e)).then(r=>{if(this.logger.debug("SessionDescriptionHandler.applyModifiers - modified sdp"),!r.sdp||!r.type)throw new Error("Invalid SDP.");return{sdp:r.sdp,type:r.type}}):Promise.resolve(e)}createDataChannel(e){if(void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));if(!0!==e?.dataChannel||this._dataChannel)return Promise.resolve();switch(this._peerConnection.signalingState){case"stable":this.logger.debug("SessionDescriptionHandler.createDataChannel - creating data channel");try{return this._dataChannel=this._peerConnection.createDataChannel(e?.dataChannelLabel||"",e?.dataChannelOptions),this.onDataChannel&&this.onDataChannel(this._dataChannel),Promise.resolve()}catch(t){return Promise.reject(t)}case"have-remote-offer":return Promise.resolve();default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}}createLocalOfferOrAnswer(e){if(void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));switch(this._peerConnection.signalingState){case"stable":return this.logger.debug("SessionDescriptionHandler.createLocalOfferOrAnswer - creating SDP offer"),this._peerConnection.createOffer(e?.offerOptions);case"have-remote-offer":return this.logger.debug("SessionDescriptionHandler.createLocalOfferOrAnswer - creating SDP answer"),this._peerConnection.createAnswer(e?.answerOptions);default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}}getLocalMediaStream(e){if(this.logger.debug("SessionDescriptionHandler.getLocalMediaStream"),void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));let t=Object.assign({},e?.constraints);if(this.localMediaStreamConstraints){if(t.audio=t.audio||this.localMediaStreamConstraints.audio,t.video=t.video||this.localMediaStreamConstraints.video,JSON.stringify(this.localMediaStreamConstraints.audio)===JSON.stringify(t.audio)&&JSON.stringify(this.localMediaStreamConstraints.video)===JSON.stringify(t.video))return Promise.resolve()}else void 0===t.audio&&void 0===t.video&&(t={audio:!0});return this.localMediaStreamConstraints=t,this.mediaStreamFactory(t,this,e).then(r=>this.setLocalMediaStream(r))}setLocalMediaStream(e){if(this.logger.debug("SessionDescriptionHandler.setLocalMediaStream"),!this._peerConnection)throw new Error("Peer connection undefined.");const t=this._peerConnection,r=this._localMediaStream,i=[],s=u=>{const d=u.kind;if("audio"!==d&&"video"!==d)throw new Error(`Unknown new track kind ${d}.`);const f=t.getSenders().find(p=>p.track&&p.track.kind===d);i.push(f?new Promise(p=>{this.logger.debug(`SessionDescriptionHandler.setLocalMediaStream - replacing sender ${d} track`),p()}).then(()=>f.replaceTrack(u).then(()=>{const p=r.getTracks().find(y=>y.kind===d);p&&(p.stop(),r.removeTrack(p),Ls.dispatchRemoveTrackEvent(r,p)),r.addTrack(u),Ls.dispatchAddTrackEvent(r,u)}).catch(p=>{throw this.logger.error(`SessionDescriptionHandler.setLocalMediaStream - failed to replace sender ${d} track`),p})):new Promise(p=>{this.logger.debug(`SessionDescriptionHandler.setLocalMediaStream - adding sender ${d} track`),p()}).then(()=>{try{t.addTrack(u,r)}catch(p){throw this.logger.error(`SessionDescriptionHandler.setLocalMediaStream - failed to add sender ${d} track`),p}r.addTrack(u),Ls.dispatchAddTrackEvent(r,u)}))},o=e.getAudioTracks();o.length&&s(o[0]);const l=e.getVideoTracks();return l.length&&s(l[0]),i.reduce((u,d)=>u.then(()=>d),Promise.resolve())}getLocalSessionDescription(){if(this.logger.debug("SessionDescriptionHandler.getLocalSessionDescription"),void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));const e=this._peerConnection.localDescription;return e?Promise.resolve(e):Promise.reject(new Error("Failed to get local session description"))}setLocalSessionDescription(e){return this.logger.debug("SessionDescriptionHandler.setLocalSessionDescription"),void 0===this._peerConnection?Promise.reject(new Error("Peer connection closed.")):this._peerConnection.setLocalDescription(e)}setRemoteSessionDescription(e){if(this.logger.debug("SessionDescriptionHandler.setRemoteSessionDescription"),void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));const t=e.sdp;let r;switch(this._peerConnection.signalingState){case"stable":r="offer";break;case"have-local-offer":r="answer";break;default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}return t?this._peerConnection.setRemoteDescription({sdp:t,type:r}):(this.logger.error("SessionDescriptionHandler.setRemoteSessionDescription failed - cannot set null sdp"),Promise.reject(new Error("SDP is undefined")))}setRemoteTrack(e){this.logger.debug("SessionDescriptionHandler.setRemoteTrack");const t=this._remoteMediaStream;t.getTrackById(e.id)?this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - have remote ${e.kind} track`):"audio"===e.kind?(this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - adding remote ${e.kind} track`),t.getAudioTracks().forEach(r=>{r.stop(),t.removeTrack(r),Ls.dispatchRemoveTrackEvent(t,r)}),t.addTrack(e),Ls.dispatchAddTrackEvent(t,e)):"video"===e.kind&&(this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - adding remote ${e.kind} track`),t.getVideoTracks().forEach(r=>{r.stop(),t.removeTrack(r),Ls.dispatchRemoveTrackEvent(t,r)}),t.addTrack(e),Ls.dispatchAddTrackEvent(t,e))}updateDirection(e){if(void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));switch(this._peerConnection.signalingState){case"stable":this.logger.debug("SessionDescriptionHandler.updateDirection - setting offer direction");{const t=r=>{switch(r){case"inactive":case"recvonly":return e?.hold?"inactive":"recvonly";case"sendonly":case"sendrecv":return e?.hold?"sendonly":"sendrecv";case"stopped":return"stopped";default:throw new Error("Should never happen")}};this._peerConnection.getTransceivers().forEach(r=>{if(r.direction){const i=t(r.direction);r.direction!==i&&(r.direction=i)}})}break;case"have-remote-offer":this.logger.debug("SessionDescriptionHandler.updateDirection - setting answer direction");{const t=(()=>{const i=this._peerConnection.remoteDescription;if(!i)throw new Error("Failed to read remote offer");const s=/a=sendrecv\r\n|a=sendonly\r\n|a=recvonly\r\n|a=inactive\r\n/.exec(i.sdp);if(s)switch(s[0]){case"a=inactive\r\n":return"inactive";case"a=recvonly\r\n":return"recvonly";case"a=sendonly\r\n":return"sendonly";case"a=sendrecv\r\n":return"sendrecv";default:throw new Error("Should never happen")}return"sendrecv"})(),r=(()=>{switch(t){case"inactive":return"inactive";case"recvonly":return"sendonly";case"sendonly":return e?.hold?"inactive":"recvonly";case"sendrecv":return e?.hold?"sendonly":"sendrecv";default:throw new Error("Should never happen")}})();this._peerConnection.getTransceivers().forEach(i=>{i.direction&&"stopped"!==i.direction&&i.direction!==r&&(i.direction=r)})}break;default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}return Promise.resolve()}waitForIceGatheringComplete(e=!1,t=0){return this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete"),void 0===this._peerConnection?Promise.reject("Peer connection closed."):e||"complete"!==this._peerConnection.iceGatheringState?(void 0!==this.iceGatheringCompletePromise&&(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - rejecting prior waiting promise"),this.iceGatheringCompleteReject&&this.iceGatheringCompleteReject(new Error("Promise superseded.")),this.iceGatheringCompletePromise=void 0,this.iceGatheringCompleteResolve=void 0,this.iceGatheringCompleteReject=void 0),this.iceGatheringCompletePromise=new Promise((r,i)=>{this.iceGatheringCompleteResolve=r,this.iceGatheringCompleteReject=i,t>0&&(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - timeout in "+t),this.iceGatheringCompleteTimeoutId=setTimeout(()=>{this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - timeout"),this.iceGatheringComplete()},t))}),this.iceGatheringCompletePromise):(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - already complete"),Promise.resolve())}initPeerConnectionEventHandlers(){if(this.logger.debug("SessionDescriptionHandler.initPeerConnectionEventHandlers"),!this._peerConnection)throw new Error("Peer connection undefined.");const e=this._peerConnection;e.onconnectionstatechange=t=>{var r;this.logger.debug(`SessionDescriptionHandler.onconnectionstatechange ${e.connectionState}`),null!==(r=this._peerConnectionDelegate)&&void 0!==r&&r.onconnectionstatechange&&this._peerConnectionDelegate.onconnectionstatechange(t)},e.ondatachannel=t=>{var r;this.logger.debug("SessionDescriptionHandler.ondatachannel"),this._dataChannel=t.channel,this.onDataChannel&&this.onDataChannel(this._dataChannel),null!==(r=this._peerConnectionDelegate)&&void 0!==r&&r.ondatachannel&&this._peerConnectionDelegate.ondatachannel(t)},e.onicecandidate=t=>{var r;this.logger.debug("SessionDescriptionHandler.onicecandidate"),null!==(r=this._peerConnectionDelegate)&&void 0!==r&&r.onicecandidate&&this._peerConnectionDelegate.onicecandidate(t)},e.onicecandidateerror=t=>{var r;this.logger.debug("SessionDescriptionHandler.onicecandidateerror"),null!==(r=this._peerConnectionDelegate)&&void 0!==r&&r.onicecandidateerror&&this._peerConnectionDelegate.onicecandidateerror(t)},e.oniceconnectionstatechange=t=>{var r;this.logger.debug(`SessionDescriptionHandler.oniceconnectionstatechange ${e.iceConnectionState}`),null!==(r=this._peerConnectionDelegate)&&void 0!==r&&r.oniceconnectionstatechange&&this._peerConnectionDelegate.oniceconnectionstatechange(t)},e.onicegatheringstatechange=t=>{var r;const i=e.iceGatheringState;this.logger.debug(`SessionDescriptionHandler.onicegatheringstatechange ${i}`),"complete"===i&&this.iceGatheringComplete(),null!==(r=this._peerConnectionDelegate)&&void 0!==r&&r.onicegatheringstatechange&&this._peerConnectionDelegate.onicegatheringstatechange(t)},e.onnegotiationneeded=t=>{var r;this.logger.debug("SessionDescriptionHandler.onnegotiationneeded"),null!==(r=this._peerConnectionDelegate)&&void 0!==r&&r.onnegotiationneeded&&this._peerConnectionDelegate.onnegotiationneeded(t)},e.onsignalingstatechange=t=>{var r;this.logger.debug(`SessionDescriptionHandler.onsignalingstatechange ${e.signalingState}`),null!==(r=this._peerConnectionDelegate)&&void 0!==r&&r.onsignalingstatechange&&this._peerConnectionDelegate.onsignalingstatechange(t)},e.ontrack=t=>{var r;this.logger.debug(`SessionDescriptionHandler.ontrack ${t.track.kind} ${t.track.enabled?"enabled":"disabled"}`),this.setRemoteTrack(t.track),null!==(r=this._peerConnectionDelegate)&&void 0!==r&&r.ontrack&&this._peerConnectionDelegate.ontrack(t)}}}function YV(n){return(e,t)=>{void 0===n&&(n=function WV(){return n=>n.audio||n.video?void 0===navigator.mediaDevices?Promise.reject(new Error("Media devices not available in insecure contexts.")):navigator.mediaDevices.getUserMedia.call(navigator.mediaDevices,n):Promise.resolve(new MediaStream)}());const i={iceGatheringTimeout:void 0!==t?.iceGatheringTimeout?t?.iceGatheringTimeout:5e3,peerConnectionConfiguration:Object.assign(Object.assign({},{bundlePolicy:"balanced",certificates:void 0,iceCandidatePoolSize:0,iceServers:[{urls:"stun:stun.l.google.com:19302"}],iceTransportPolicy:"all",rtcpMuxPolicy:"require"}),t?.peerConnectionConfiguration)},s=e.userAgent.getLogger("sip.SessionDescriptionHandler");return new Ls(s,n,i)}}class Af{constructor(){this.listeners=new Array}addListener(e,t){const r=i=>{this.removeListener(r),e(i)};this.listeners.push(!0===t?.once?r:e)}emit(e){this.listeners.slice().forEach(t=>t(e))}removeAllListeners(){this.listeners=[]}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}on(e){return this.addListener(e)}off(e){return this.removeListener(e)}once(e){return this.addListener(e,{once:!0})}}class If extends Bl{constructor(e){super(e||"An error occurred during state transition.")}}var we;!function(n){n.Connecting="Connecting",n.Connected="Connected",n.Disconnecting="Disconnecting",n.Disconnected="Disconnected"}(we=we||(we={}));let ZV=(()=>{class n{constructor(t,r){if(this._state=we.Disconnected,this.transitioningState=!1,this._stateEventEmitter=new Af,this.logger=t,r){const l=r?.wsServers,u=r?.maxReconnectionAttempts;void 0!==l&&this.logger.warn('The transport option "wsServers" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),void 0!==u&&this.logger.warn('The transport option "maxReconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),l&&!r.server&&("string"==typeof l&&(r.server=l),l instanceof Array&&(r.server=l[0]))}this.configuration=Object.assign(Object.assign({},n.defaultOptions),r);const i=this.configuration.server,s=Cn.parse(i,"absoluteURI");if(-1===s)throw this.logger.error(`Invalid WebSocket Server URL "${i}"`),new Error("Invalid WebSocket Server URL");if(!["wss","ws","udp"].includes(s.scheme))throw this.logger.error(`Invalid scheme in WebSocket Server URL "${i}"`),new Error("Invalid scheme in WebSocket Server URL");this._protocol=s.scheme.toUpperCase()}dispose(){return this.disconnect()}get protocol(){return this._protocol}get server(){return this.configuration.server}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get ws(){return this._ws}connect(){return this._connect()}disconnect(){return this._disconnect()}isConnected(){return this.state===we.Connected}send(t){return this._send(t)}_connect(){switch(this.logger.log(`Connecting ${this.server}`),this.state){case we.Connecting:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(we.Connecting));if(!this.connectPromise)throw new Error("Connect promise must be defined.");return this.connectPromise;case we.Connected:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(we.Connecting));if(this.connectPromise)throw new Error("Connect promise must not be defined.");return Promise.resolve();case we.Disconnecting:if(this.connectPromise)throw new Error("Connect promise must not be defined.");try{this.transitionState(we.Connecting)}catch(r){if(r instanceof If)return Promise.reject(r);throw r}break;case we.Disconnected:if(this.connectPromise)throw new Error("Connect promise must not be defined.");try{this.transitionState(we.Connecting)}catch(r){if(r instanceof If)return Promise.reject(r);throw r}break;default:throw new Error("Unknown state")}let t;try{t=new WebSocket(this.server,"sip"),t.binaryType="arraybuffer",t.addEventListener("close",r=>this.onWebSocketClose(r,t)),t.addEventListener("error",r=>this.onWebSocketError(r,t)),t.addEventListener("open",r=>this.onWebSocketOpen(r,t)),t.addEventListener("message",r=>this.onWebSocketMessage(r,t)),this._ws=t}catch(r){return this._ws=void 0,this.logger.error("WebSocket construction failed."),this.logger.error(r.toString()),new Promise((i,s)=>{this.connectResolve=i,this.connectReject=s,this.transitionState(we.Disconnected,r)})}return this.connectPromise=new Promise((r,i)=>{this.connectResolve=r,this.connectReject=i,this.connectTimeout=setTimeout(()=>{this.logger.warn("Connect timed out. Exceeded time set in configuration.connectionTimeout: "+this.configuration.connectionTimeout+"s."),t.close(1e3)},1e3*this.configuration.connectionTimeout)}),this.connectPromise}_disconnect(){switch(this.logger.log(`Disconnecting ${this.server}`),this.state){case we.Connecting:if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");try{this.transitionState(we.Disconnecting)}catch(r){if(r instanceof If)return Promise.reject(r);throw r}break;case we.Connected:if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");try{this.transitionState(we.Disconnecting)}catch(r){if(r instanceof If)return Promise.reject(r);throw r}break;case we.Disconnecting:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(we.Disconnecting));if(!this.disconnectPromise)throw new Error("Disconnect promise must be defined.");return this.disconnectPromise;case we.Disconnected:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(we.Disconnecting));if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");return Promise.resolve();default:throw new Error("Unknown state")}if(!this._ws)throw new Error("WebSocket must be defined.");const t=this._ws;return this.disconnectPromise=new Promise((r,i)=>{this.disconnectResolve=r,this.disconnectReject=i;try{t.close(1e3)}catch(s){throw this.logger.error("WebSocket close failed."),this.logger.error(s.toString()),s}}),this.disconnectPromise}_send(t){if(!0===this.configuration.traceSip&&this.logger.log("Sending WebSocket message:\n\n"+t+"\n"),this._state!==we.Connected)return Promise.reject(new Error("Not connected."));if(!this._ws)throw new Error("WebSocket undefined.");try{this._ws.send(t)}catch(r){return r instanceof Error?Promise.reject(r):Promise.reject(new Error("WebSocket send failed."))}return Promise.resolve()}onWebSocketClose(t,r){if(r!==this._ws)return;const i=`WebSocket closed ${this.server} (code: ${t.code})`,s=this.disconnectPromise?void 0:new Error(i);s&&this.logger.warn("WebSocket closed unexpectedly"),this.logger.log(i),this._ws=void 0,this.transitionState(we.Disconnected,s)}onWebSocketError(t,r){r===this._ws&&this.logger.error("WebSocket error occurred.")}onWebSocketMessage(t,r){if(r!==this._ws)return;const i=t.data;let s;if(/^(\r\n)+$/.test(i))return this.clearKeepAliveTimeout(),void(!0===this.configuration.traceSip&&this.logger.log("Received WebSocket message with CRLF Keep Alive response"));if(i){if("string"!=typeof i){try{s=(new TextDecoder).decode(new Uint8Array(i))}catch(o){return this.logger.error(o.toString()),void this.logger.error("Received WebSocket binary message failed to be converted into string, message discarded")}!0===this.configuration.traceSip&&this.logger.log("Received WebSocket binary message:\n\n"+s+"\n")}else s=i,!0===this.configuration.traceSip&&this.logger.log("Received WebSocket text message:\n\n"+s+"\n");if(this.state===we.Connected){if(this.onMessage)try{this.onMessage(s)}catch(o){throw this.logger.error(o.toString()),this.logger.error("Exception thrown by onMessage callback"),o}}else this.logger.warn("Received message while not connected, discarding...")}else this.logger.warn("Received empty message, discarding...")}onWebSocketOpen(t,r){r===this._ws&&this._state===we.Connecting&&(this.logger.log(`WebSocket opened ${this.server}`),this.transitionState(we.Connected))}transitionLoopDetectedError(t){let r="A state transition loop has been detected.";return r+=` An attempt to transition from ${this._state} to ${t} before the prior transition completed.`,r+=" Perhaps you are synchronously calling connect() or disconnect() from a callback or state change handler?",this.logger.error(r),new If("Loop detected.")}transitionState(t,r){const i=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};if(this.transitioningState)throw this.transitionLoopDetectedError(t);switch(this.transitioningState=!0,this._state){case we.Connecting:t!==we.Connected&&t!==we.Disconnecting&&t!==we.Disconnected&&i();break;case we.Connected:t!==we.Disconnecting&&t!==we.Disconnected&&i();break;case we.Disconnecting:t!==we.Connecting&&t!==we.Disconnected&&i();break;case we.Disconnected:t!==we.Connecting&&i();break;default:throw new Error("Unknown state.")}const s=this._state;this._state=t;const o=this.connectResolve,l=this.connectReject;s===we.Connecting&&(this.connectPromise=void 0,this.connectResolve=void 0,this.connectReject=void 0);const u=this.disconnectResolve,d=this.disconnectReject;if(s===we.Disconnecting&&(this.disconnectPromise=void 0,this.disconnectResolve=void 0,this.disconnectReject=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),this.logger.log(`Transitioned from ${s} to ${this._state}`),this._stateEventEmitter.emit(this._state),t===we.Connected&&(this.startSendingKeepAlives(),this.onConnect))try{this.onConnect()}catch(f){throw this.logger.error(f.toString()),this.logger.error("Exception thrown by onConnect callback"),f}if(s===we.Connected&&(this.stopSendingKeepAlives(),this.onDisconnect))try{r?this.onDisconnect(r):this.onDisconnect()}catch(f){throw this.logger.error(f.toString()),this.logger.error("Exception thrown by onDisconnect callback"),f}if(s===we.Connecting){if(!o)throw new Error("Connect resolve undefined.");if(!l)throw new Error("Connect reject undefined.");t===we.Connected?o():l(r||new Error("Connect aborted."))}if(s===we.Disconnecting){if(!u)throw new Error("Disconnect resolve undefined.");if(!d)throw new Error("Disconnect reject undefined.");t===we.Disconnected?u():d(r||new Error("Disconnect aborted."))}this.transitioningState=!1}clearKeepAliveTimeout(){this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveDebounceTimeout=void 0}sendKeepAlive(){return this.keepAliveDebounceTimeout?Promise.resolve():(this.keepAliveDebounceTimeout=setTimeout(()=>{this.clearKeepAliveTimeout()},1e3*this.configuration.keepAliveDebounce),this.send("\r\n\r\n"))}startSendingKeepAlives(){this.configuration.keepAliveInterval&&!this.keepAliveInterval&&(this.keepAliveInterval=setInterval(()=>{this.sendKeepAlive(),this.startSendingKeepAlives()},(r=>{const i=.8*r;return 1e3*(Math.random()*(r-i)+i)})(this.configuration.keepAliveInterval)))}stopSendingKeepAlives(){this.keepAliveInterval&&clearInterval(this.keepAliveInterval),this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveInterval=void 0,this.keepAliveDebounceTimeout=void 0}}return n.defaultOptions={server:"",connectionTimeout:5,keepAliveInterval:0,keepAliveDebounce:10,traceSip:!0},n})();class XV{constructor(e){this.incomingCancelRequest=e}get request(){return this.incomingCancelRequest}}class Tb extends Bl{constructor(e){super(e||"Unsupported content type.")}}class JV extends Bl{constructor(e){super(e||"Unspecified session description handler error.")}}class Ab extends Bl{constructor(){super("The session has terminated.")}}class eB{constructor(e){this.incomingAckRequest=e}get request(){return this.incomingAckRequest.message}}class tB{constructor(e){this.incomingByeRequest=e}get request(){return this.incomingByeRequest.message}accept(e){return this.incomingByeRequest.accept(e),Promise.resolve()}reject(e){return this.incomingByeRequest.reject(e),Promise.resolve()}}class Ib extends Bl{constructor(e){super(e||"Request pending.")}}class nB{constructor(e){this.incomingInfoRequest=e}get request(){return this.incomingInfoRequest.message}accept(e){return this.incomingInfoRequest.accept(e),Promise.resolve()}reject(e){return this.incomingInfoRequest.reject(e),Promise.resolve()}}class lx{constructor(e){this.incomingMessageRequest=e}get request(){return this.incomingMessageRequest.message}accept(e){return this.incomingMessageRequest.accept(e),Promise.resolve()}reject(e){return this.incomingMessageRequest.reject(e),Promise.resolve()}}class Mb{constructor(e){this.incomingNotifyRequest=e}get request(){return this.incomingNotifyRequest.message}accept(e){return this.incomingNotifyRequest.accept(e),Promise.resolve()}reject(e){return this.incomingNotifyRequest.reject(e),Promise.resolve()}}class rB{constructor(e,t){this.incomingReferRequest=e,this.session=t}get referTo(){const e=this.incomingReferRequest.message.parseHeader("refer-to");if(!(e instanceof Nr))throw new Error("Failed to parse Refer-To header.");return e}get referredBy(){return this.incomingReferRequest.message.getHeader("referred-by")}get replaces(){const e=this.referTo.uri.getHeader("replaces");return e instanceof Array?e[0]:e}get request(){return this.incomingReferRequest.message}accept(e={statusCode:202}){return this.incomingReferRequest.accept(e),Promise.resolve()}reject(e){return this.incomingReferRequest.reject(e),Promise.resolve()}makeInviter(e){if(this.inviter)return this.inviter;const t=this.referTo.uri.clone();t.clearHeaders();const r=((e=e||{}).extraHeaders||[]).slice(),i=this.replaces;i&&r.push("Replaces: "+decodeURIComponent(i));const s=this.referredBy;return s&&r.push("Referred-By: "+s),e.extraHeaders=r,this.inviter=this.session.userAgent._makeInviter(t,e),this.inviter._referred=this.session,this.session._referral=this.inviter,this.inviter}}var H,ts;!function(n){n.Initial="Initial",n.Establishing="Establishing",n.Established="Established",n.Terminating="Terminating",n.Terminated="Terminated"}(H=H||(H={}));class Mf{constructor(e,t={}){this.pendingReinvite=!1,this.pendingReinviteAck=!1,this._state=H.Initial,this.delegate=t.delegate,this._stateEventEmitter=new Af,this._userAgent=e}dispose(){switch(this.logger.log(`Session ${this.id} in state ${this._state} is being disposed`),delete this.userAgent._sessions[this.id],this._sessionDescriptionHandler&&this._sessionDescriptionHandler.close(),this.state){case H.Initial:case H.Establishing:break;case H.Established:return new Promise(e=>{this._bye({onAccept:()=>e(),onRedirect:()=>e(),onReject:()=>e()})});case H.Terminating:case H.Terminated:break;default:throw new Error("Unknown state.")}return Promise.resolve()}get assertedIdentity(){return this._assertedIdentity}get dialog(){return this._dialog}get id(){return this._id}get replacee(){return this._replacee}get sessionDescriptionHandler(){return this._sessionDescriptionHandler}get sessionDescriptionHandlerFactory(){return this.userAgent.configuration.sessionDescriptionHandlerFactory}get sessionDescriptionHandlerModifiers(){return this._sessionDescriptionHandlerModifiers||[]}set sessionDescriptionHandlerModifiers(e){this._sessionDescriptionHandlerModifiers=e.slice()}get sessionDescriptionHandlerOptions(){return this._sessionDescriptionHandlerOptions||{}}set sessionDescriptionHandlerOptions(e){this._sessionDescriptionHandlerOptions=Object.assign({},e)}get sessionDescriptionHandlerModifiersReInvite(){return this._sessionDescriptionHandlerModifiersReInvite||[]}set sessionDescriptionHandlerModifiersReInvite(e){this._sessionDescriptionHandlerModifiersReInvite=e.slice()}get sessionDescriptionHandlerOptionsReInvite(){return this._sessionDescriptionHandlerOptionsReInvite||{}}set sessionDescriptionHandlerOptionsReInvite(e){this._sessionDescriptionHandlerOptionsReInvite=Object.assign({},e)}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get userAgent(){return this._userAgent}bye(e={}){let t="Session.bye() may only be called if established session.";switch(this.state){case H.Initial:"function"==typeof this.cancel?(t+=" However Inviter.invite() has not yet been called.",t+=" Perhaps you should have called Inviter.cancel()?"):"function"==typeof this.reject&&(t+=" However Invitation.accept() has not yet been called.",t+=" Perhaps you should have called Invitation.reject()?");break;case H.Establishing:"function"==typeof this.cancel?(t+=" However a dialog does not yet exist.",t+=" Perhaps you should have called Inviter.cancel()?"):"function"==typeof this.reject&&(t+=" However Invitation.accept() has not yet been called (or not yet resolved).",t+=" Perhaps you should have called Invitation.reject()?");break;case H.Established:{const r=e.requestDelegate,i=this.copyRequestOptions(e.requestOptions);return this._bye(r,i)}case H.Terminating:t+=" However this session is already terminating.","function"==typeof this.cancel?t+=" Perhaps you have already called Inviter.cancel()?":"function"==typeof this.reject&&(t+=" Perhaps you have already called Session.bye()?");break;case H.Terminated:t+=" However this session is already terminated.";break;default:throw new Error("Unknown state")}return this.logger.error(t),Promise.reject(new Error(`Invalid session state ${this.state}`))}info(e={}){if(this.state!==H.Established)return this.logger.error("Session.info() may only be called if established session."),Promise.reject(new Error(`Invalid session state ${this.state}`));const t=e.requestDelegate,r=this.copyRequestOptions(e.requestOptions);return this._info(t,r)}invite(e={}){if(this.logger.log("Session.invite"),this.state!==H.Established)return Promise.reject(new Error(`Invalid session state ${this.state}`));if(this.pendingReinvite)return Promise.reject(new Ib("Reinvite in progress. Please wait until complete, then try again."));this.pendingReinvite=!0,e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiersReInvite=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptionsReInvite=e.sessionDescriptionHandlerOptions);const t={onAccept:s=>{const o=Tf(s.message);if(!o)return this.logger.error("Received 2xx response to re-INVITE without a session description"),this.ackAndBye(s,400,"Missing session description"),this.stateTransition(H.Terminated),void(this.pendingReinvite=!1);e.withoutSdp?this.setOfferAndGetAnswer(o,{sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite}).then(u=>{s.ack({body:u})}).catch(u=>{this.logger.error("Failed to handle offer in 2xx response to re-INVITE"),this.logger.error(u.message),this.state===H.Terminated?s.ack():(this.ackAndBye(s,488,"Bad Media Description"),this.stateTransition(H.Terminated))}).then(()=>{this.pendingReinvite=!1,e.requestDelegate&&e.requestDelegate.onAccept&&e.requestDelegate.onAccept(s)}):this.setAnswer(o,{sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite}).then(()=>{s.ack()}).catch(u=>{this.logger.error("Failed to handle answer in 2xx response to re-INVITE"),this.logger.error(u.message),this.state!==H.Terminated?(this.ackAndBye(s,488,"Bad Media Description"),this.stateTransition(H.Terminated)):s.ack()}).then(()=>{this.pendingReinvite=!1,e.requestDelegate&&e.requestDelegate.onAccept&&e.requestDelegate.onAccept(s)})},onProgress:s=>{},onRedirect:s=>{},onReject:s=>{this.logger.warn("Received a non-2xx response to re-INVITE"),this.pendingReinvite=!1,e.withoutSdp?e.requestDelegate&&e.requestDelegate.onReject&&e.requestDelegate.onReject(s):this.rollbackOffer().catch(o=>{if(this.logger.error("Failed to rollback offer on non-2xx response to re-INVITE"),this.logger.error(o.message),this.state!==H.Terminated){if(!this.dialog)throw new Error("Dialog undefined.");const l=[];l.push("Reason: "+this.getReasonHeaderValue(500,"Internal Server Error")),this.dialog.bye(void 0,{extraHeaders:l}),this.stateTransition(H.Terminated)}}).then(()=>{e.requestDelegate&&e.requestDelegate.onReject&&e.requestDelegate.onReject(s)})},onTrying:s=>{}},r=e.requestOptions||{};if(r.extraHeaders=(r.extraHeaders||[]).slice(),r.extraHeaders.push("Allow: "+Ia.toString()),r.extraHeaders.push("Contact: "+this._contact),e.withoutSdp){if(!this.dialog)throw this.pendingReinvite=!1,new Error("Dialog undefined.");return Promise.resolve(this.dialog.invite(t,r))}return this.getOffer({sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite}).then(s=>{if(!this.dialog)throw this.pendingReinvite=!1,new Error("Dialog undefined.");return r.body=s,this.dialog.invite(t,r)}).catch(s=>{throw this.logger.error(s.message),this.logger.error("Failed to send re-INVITE"),this.pendingReinvite=!1,s})}message(e={}){if(this.state!==H.Established)return this.logger.error("Session.message() may only be called if established session."),Promise.reject(new Error(`Invalid session state ${this.state}`));const t=e.requestDelegate,r=this.copyRequestOptions(e.requestOptions);return this._message(t,r)}refer(e,t={}){if(this.state!==H.Established)return this.logger.error("Session.refer() may only be called if established session."),Promise.reject(new Error(`Invalid session state ${this.state}`));if(e instanceof Mf&&!e.dialog)return this.logger.error("Session.refer() may only be called with session which is established. You are perhaps attempting to attended transfer to a target for which there is not dialog yet established. Perhaps you are attempting a 'semi-attended' tansfer? Regardless, this is not supported. The recommended approached is to check to see if the target Session is in the Established state before calling refer(); if the state is not Established you may proceed by falling back using a URI as the target (blind transfer)."),Promise.reject(new Error(`Invalid session state ${this.state}`));const r=t.requestDelegate,i=this.copyRequestOptions(t.requestOptions);return i.extraHeaders=i.extraHeaders?i.extraHeaders.concat(this.referExtraHeaders(this.referToString(e))):this.referExtraHeaders(this.referToString(e)),this._refer(t.onNotify,r,i)}_bye(e,t){if(!this.dialog)return Promise.reject(new Error("Session dialog undefined."));const r=this.dialog;switch(r.sessionState){case Si.Initial:case Si.Early:throw new Error(`Invalid dialog state ${r.sessionState}`);case Si.AckWait:return this.stateTransition(H.Terminating),new Promise(i=>{r.delegate={onAck:()=>{const s=r.bye(e,t);return this.stateTransition(H.Terminated),i(s),Promise.resolve()},onAckTimeout:()=>{const s=r.bye(e,t);this.stateTransition(H.Terminated),i(s)}}});case Si.Confirmed:{const i=r.bye(e,t);return this.stateTransition(H.Terminated),Promise.resolve(i)}case Si.Terminated:throw new Error(`Invalid dialog state ${r.sessionState}`);default:throw new Error("Unrecognized state.")}}_info(e,t){return this.dialog?Promise.resolve(this.dialog.info(e,t)):Promise.reject(new Error("Session dialog undefined."))}_message(e,t){return this.dialog?Promise.resolve(this.dialog.message(e,t)):Promise.reject(new Error("Session dialog undefined."))}_refer(e,t,r){return this.dialog?(this.onNotify=e,Promise.resolve(this.dialog.refer(t,r))):Promise.reject(new Error("Session dialog undefined."))}ackAndBye(e,t,r){e.ack();const i=[];t&&i.push("Reason: "+this.getReasonHeaderValue(t,r)),e.session.bye(void 0,{extraHeaders:i})}onAckRequest(e){if(this.logger.log("Session.onAckRequest"),this.state!==H.Established&&this.state!==H.Terminating)return this.logger.error(`ACK received while in state ${this.state}, dropping request`),Promise.resolve();const t=this.dialog;if(!t)throw new Error("Dialog undefined.");const r={sessionDescriptionHandlerOptions:this.pendingReinviteAck?this.sessionDescriptionHandlerOptionsReInvite:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.pendingReinviteAck?this._sessionDescriptionHandlerModifiersReInvite:this._sessionDescriptionHandlerModifiers};if(this.delegate&&this.delegate.onAck){const i=new eB(e);this.delegate.onAck(i)}switch(this.pendingReinviteAck=!1,t.signalingState){case J.Initial:{this.logger.error(`Invalid signaling state ${t.signalingState}.`);const i=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return t.bye(void 0,{extraHeaders:i}),this.stateTransition(H.Terminated),Promise.resolve()}case J.Stable:{const i=Tf(e.message);return i?"render"===i.contentDisposition?(this._renderbody=i.content,this._rendertype=i.contentType,Promise.resolve()):"session"!==i.contentDisposition?Promise.resolve():this.setAnswer(i,r).catch(s=>{this.logger.error(s.message);const o=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];t.bye(void 0,{extraHeaders:o}),this.stateTransition(H.Terminated)}):Promise.resolve()}case J.HaveLocalOffer:{this.logger.error(`Invalid signaling state ${t.signalingState}.`);const i=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return t.bye(void 0,{extraHeaders:i}),this.stateTransition(H.Terminated),Promise.resolve()}case J.HaveRemoteOffer:{this.logger.error(`Invalid signaling state ${t.signalingState}.`);const i=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return t.bye(void 0,{extraHeaders:i}),this.stateTransition(H.Terminated),Promise.resolve()}default:throw new Error(`Invalid signaling state ${t.signalingState}.`)}}onByeRequest(e){if(this.logger.log("Session.onByeRequest"),this.state===H.Established){if(this.delegate&&this.delegate.onBye){const t=new tB(e);this.delegate.onBye(t)}else e.accept();this.stateTransition(H.Terminated)}else this.logger.error(`BYE received while in state ${this.state}, dropping request`)}onInfoRequest(e){if(this.logger.log("Session.onInfoRequest"),this.state===H.Established)if(this.delegate&&this.delegate.onInfo){const t=new nB(e);this.delegate.onInfo(t)}else e.accept();else this.logger.error(`INFO received while in state ${this.state}, dropping request`)}onInviteRequest(e){if(this.logger.log("Session.onInviteRequest"),this.state!==H.Established)return void this.logger.error(`INVITE received while in state ${this.state}, dropping request`);this.pendingReinviteAck=!0;const t=["Contact: "+this._contact];if(e.message.hasHeader("P-Asserted-Identity")){const i=e.message.getHeader("P-Asserted-Identity");if(!i)throw new Error("Header undefined.");this._assertedIdentity=Cn.nameAddrHeaderParse(i)}this.generateResponseOfferAnswerInDialog({sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite}).then(i=>{const s=e.accept({statusCode:200,extraHeaders:t,body:i});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(e.message,s.message,200)}).catch(i=>{if(this.logger.error(i.message),this.logger.error("Failed to handle to re-INVITE request"),!this.dialog)throw new Error("Dialog undefined.");if(this.logger.error(this.dialog.signalingState),this.dialog.signalingState!==J.Stable)this.rollbackOffer().then(()=>{const s=e.reject({statusCode:488});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(e.message,s.message,488)}).catch(s=>{this.logger.error(s.message),this.logger.error("Failed to rollback offer on re-INVITE request");const o=e.reject({statusCode:488});if(this.state!==H.Terminated){if(!this.dialog)throw new Error("Dialog undefined.");const l=[];l.push("Reason: "+this.getReasonHeaderValue(500,"Internal Server Error")),this.dialog.bye(void 0,{extraHeaders:l}),this.stateTransition(H.Terminated)}this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(e.message,o.message,488)});else{const s=e.reject({statusCode:488});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(e.message,s.message,488)}})}onMessageRequest(e){if(this.logger.log("Session.onMessageRequest"),this.state===H.Established)if(this.delegate&&this.delegate.onMessage){const t=new lx(e);this.delegate.onMessage(t)}else e.accept();else this.logger.error(`MESSAGE received while in state ${this.state}, dropping request`)}onNotifyRequest(e){if(this.logger.log("Session.onNotifyRequest"),this.state===H.Established)if(this.onNotify){const t=new Mb(e);this.onNotify(t)}else if(this.delegate&&this.delegate.onNotify){const t=new Mb(e);this.delegate.onNotify(t)}else e.accept();else this.logger.error(`NOTIFY received while in state ${this.state}, dropping request`)}onPrackRequest(e){if(this.logger.log("Session.onPrackRequest"),this.state===H.Established)throw new Error("Unimplemented.");this.logger.error(`PRACK received while in state ${this.state}, dropping request`)}onReferRequest(e){if(this.logger.log("Session.onReferRequest"),this.state!==H.Established)return void this.logger.error(`REFER received while in state ${this.state}, dropping request`);if(!e.message.hasHeader("refer-to"))return this.logger.warn("Invalid REFER packet. A refer-to header is required. Rejecting."),void e.reject();const t=new rB(e,this);this.delegate&&this.delegate.onRefer?this.delegate.onRefer(t):(this.logger.log("No delegate available to handle REFER, automatically accepting and following."),t.accept().then(()=>t.makeInviter(this._referralInviterOptions).invite()).catch(r=>{this.logger.error(r.message)}))}generateResponseOfferAnswer(e,t){if(this.dialog)return this.generateResponseOfferAnswerInDialog(t);const r=Tf(e.message);return r&&"session"===r.contentDisposition?this.setOfferAndGetAnswer(r,t):this.getOffer(t)}generateResponseOfferAnswerInDialog(e){if(!this.dialog)throw new Error("Dialog undefined.");switch(this.dialog.signalingState){case J.Initial:return this.getOffer(e);case J.HaveLocalOffer:return Promise.resolve(void 0);case J.HaveRemoteOffer:if(!this.dialog.offer)throw new Error(`Session offer undefined in signaling state ${this.dialog.signalingState}.`);return this.setOfferAndGetAnswer(this.dialog.offer,e);case J.Stable:return this.state!==H.Established?Promise.resolve(void 0):this.getOffer(e);default:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`)}}getOffer(e){const t=this.setupSessionDescriptionHandler(),r=e.sessionDescriptionHandlerOptions,i=e.sessionDescriptionHandlerModifiers;try{return t.getDescription(r,i).then(s=>z_(s)).catch(s=>{this.logger.error("Session.getOffer: SDH getDescription rejected...");const o=s instanceof Error?s:new Error("Session.getOffer unknown error.");throw this.logger.error(o.message),o})}catch(s){this.logger.error("Session.getOffer: SDH getDescription threw...");const o=s instanceof Error?s:new Error(s);return this.logger.error(o.message),Promise.reject(o)}}rollbackOffer(){const e=this.setupSessionDescriptionHandler();if(void 0===e.rollbackDescription)return Promise.resolve();try{return e.rollbackDescription().catch(t=>{this.logger.error("Session.rollbackOffer: SDH rollbackDescription rejected...");const r=t instanceof Error?t:new Error("Session.rollbackOffer unknown error.");throw this.logger.error(r.message),r})}catch(t){this.logger.error("Session.rollbackOffer: SDH rollbackDescription threw...");const r=t instanceof Error?t:new Error(t);return this.logger.error(r.message),Promise.reject(r)}}setAnswer(e,t){const r=this.setupSessionDescriptionHandler(),i=t.sessionDescriptionHandlerOptions,s=t.sessionDescriptionHandlerModifiers;try{if(!r.hasDescription(e.contentType))return Promise.reject(new Tb)}catch(o){this.logger.error("Session.setAnswer: SDH hasDescription threw...");const l=o instanceof Error?o:new Error(o);return this.logger.error(l.message),Promise.reject(l)}try{return r.setDescription(e.content,i,s).catch(o=>{this.logger.error("Session.setAnswer: SDH setDescription rejected...");const l=o instanceof Error?o:new Error("Session.setAnswer unknown error.");throw this.logger.error(l.message),l})}catch(o){this.logger.error("Session.setAnswer: SDH setDescription threw...");const l=o instanceof Error?o:new Error(o);return this.logger.error(l.message),Promise.reject(l)}}setOfferAndGetAnswer(e,t){const r=this.setupSessionDescriptionHandler(),i=t.sessionDescriptionHandlerOptions,s=t.sessionDescriptionHandlerModifiers;try{if(!r.hasDescription(e.contentType))return Promise.reject(new Tb)}catch(o){this.logger.error("Session.setOfferAndGetAnswer: SDH hasDescription threw...");const l=o instanceof Error?o:new Error(o);return this.logger.error(l.message),Promise.reject(l)}try{return r.setDescription(e.content,i,s).then(()=>r.getDescription(i,s)).then(o=>z_(o)).catch(o=>{this.logger.error("Session.setOfferAndGetAnswer: SDH setDescription or getDescription rejected...");const l=o instanceof Error?o:new Error("Session.setOfferAndGetAnswer unknown error.");throw this.logger.error(l.message),l})}catch(o){this.logger.error("Session.setOfferAndGetAnswer: SDH setDescription or getDescription threw...");const l=o instanceof Error?o:new Error(o);return this.logger.error(l.message),Promise.reject(l)}}setSessionDescriptionHandler(e){if(this._sessionDescriptionHandler)throw new Error("Session description handler defined.");this._sessionDescriptionHandler=e}setupSessionDescriptionHandler(){var e;return this._sessionDescriptionHandler||(this._sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.userAgent.configuration.sessionDescriptionHandlerFactoryOptions),!(null===(e=this.delegate)||void 0===e)&&e.onSessionDescriptionHandler&&this.delegate.onSessionDescriptionHandler(this._sessionDescriptionHandler,!1)),this._sessionDescriptionHandler}stateTransition(e){const t=()=>{throw new Error(`Invalid state transition from ${this._state} to ${e}`)};switch(this._state){case H.Initial:e!==H.Establishing&&e!==H.Established&&e!==H.Terminating&&e!==H.Terminated&&t();break;case H.Establishing:e!==H.Established&&e!==H.Terminating&&e!==H.Terminated&&t();break;case H.Established:e!==H.Terminating&&e!==H.Terminated&&t();break;case H.Terminating:e!==H.Terminated&&t();break;case H.Terminated:t();break;default:throw new Error("Unrecognized state.")}this._state=e,this.logger.log(`Session ${this.id} transitioned to state ${this._state}`),this._stateEventEmitter.emit(this._state),e===H.Terminated&&this.dispose()}copyRequestOptions(e={}){return{extraHeaders:e.extraHeaders?e.extraHeaders.slice():void 0,body:e.body?{contentDisposition:e.body.contentDisposition||"render",contentType:e.body.contentType||"text/plain",content:e.body.content||""}:void 0}}getReasonHeaderValue(e,t){const r=e;let i=H_(e);return!i&&t&&(i=t),"SIP;cause="+r+';text="'+i+'"'}referExtraHeaders(e){const t=[];return t.push("Referred-By: <"+this.userAgent.configuration.uri+">"),t.push("Contact: "+this._contact),t.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),t.push("Refer-To: "+e),t}referToString(e){let t;if(e instanceof ks)t=e.toString();else{if(!e.dialog)throw new Error("Dialog undefined.");t=`"${e.remoteIdentity.friendlyName}" <${e.dialog.remoteTarget.toString()}?Replaces=${encodeURIComponent(`${e.dialog.callId};to-tag=${e.dialog.remoteTag};from-tag=${e.dialog.localTag}`)}>`}return t}}!function(n){n.Required="Required",n.Supported="Supported",n.Unsupported="Unsupported"}(ts=ts||(ts={}));const iB={"100rel":!0,199:!0,answermode:!0,"early-session":!0,eventlist:!0,explicitsub:!0,"from-change":!0,"geolocation-http":!0,"geolocation-sip":!0,gin:!0,gruu:!0,histinfo:!0,ice:!0,join:!0,"multiple-refer":!0,norefersub:!0,nosub:!0,outbound:!0,path:!0,policy:!0,precondition:!0,pref:!0,privacy:!0,"recipient-list-invite":!0,"recipient-list-message":!0,"recipient-list-subscribe":!0,replaces:!0,"resource-priority":!0,"sdp-anat":!0,"sec-agree":!0,tdialog:!0,timer:!0,uui:!0};class sB extends Mf{constructor(e,t){super(e),this.incomingInviteRequest=t,this.disposed=!1,this.expiresTimer=void 0,this.isCanceled=!1,this.rel100="none",this.rseq=Math.floor(1e4*Math.random()),this.userNoAnswerTimer=void 0,this.waitingForPrack=!1,this.logger=e.getLogger("sip.Invitation");const r=this.incomingInviteRequest.message,i=r.getHeader("require");i&&i.toLowerCase().includes("100rel")&&(this.rel100="required");const s=r.getHeader("supported");if(s&&s.toLowerCase().includes("100rel")&&(this.rel100="supported"),r.toTag=t.toTag,"string"!=typeof r.toTag)throw new TypeError("toTag should have been a string.");if(this.userNoAnswerTimer=setTimeout(()=>{t.reject({statusCode:480}),this.stateTransition(H.Terminated)},this.userAgent.configuration.noAnswerTimeout?1e3*this.userAgent.configuration.noAnswerTimeout:6e4),r.hasHeader("expires")){const u=1e3*Number(r.getHeader("expires")||0);this.expiresTimer=setTimeout(()=>{this.state===H.Initial&&(t.reject({statusCode:487}),this.stateTransition(H.Terminated))},u)}const o=this.request.getHeader("P-Asserted-Identity");o&&(this._assertedIdentity=Cn.nameAddrHeaderParse(o)),this._contact=this.userAgent.contact.toString();const l=r.parseHeader("Content-Disposition");l&&"render"===l.type&&(this._renderbody=r.body,this._rendertype=r.getHeader("Content-Type")),this._id=r.callId+r.fromTag,this.userAgent._sessions[this._id]=this}dispose(){if(this.disposed)return Promise.resolve();switch(this.disposed=!0,this.expiresTimer&&(clearTimeout(this.expiresTimer),this.expiresTimer=void 0),this.userNoAnswerTimer&&(clearTimeout(this.userNoAnswerTimer),this.userNoAnswerTimer=void 0),this.prackNeverArrived(),this.state){case H.Initial:case H.Establishing:return this.reject().then(()=>super.dispose());case H.Established:case H.Terminating:case H.Terminated:return super.dispose();default:throw new Error("Unknown state.")}}get autoSendAnInitialProvisionalResponse(){return"required"!==this.rel100&&this.userAgent.configuration.sendInitialProvisionalResponse}get body(){return this.incomingInviteRequest.message.body}get localIdentity(){return this.request.to}get remoteIdentity(){return this.request.from}get request(){return this.incomingInviteRequest.message}accept(e={}){if(this.logger.log("Invitation.accept"),this.state!==H.Initial){const t=new Error(`Invalid session state ${this.state}`);return this.logger.error(t.message),Promise.reject(t)}return e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=e.sessionDescriptionHandlerOptions),this.stateTransition(H.Establishing),this.sendAccept(e).then(({session:r})=>{r.delegate={onAck:i=>this.onAckRequest(i),onAckTimeout:()=>this.onAckTimeout(),onBye:i=>this.onByeRequest(i),onInfo:i=>this.onInfoRequest(i),onInvite:i=>this.onInviteRequest(i),onMessage:i=>this.onMessageRequest(i),onNotify:i=>this.onNotifyRequest(i),onPrack:i=>this.onPrackRequest(i),onRefer:i=>this.onReferRequest(i)},this._dialog=r,this.stateTransition(H.Established),this._replacee&&this._replacee._bye()}).catch(t=>this.handleResponseError(t))}progress(e={}){if(this.logger.log("Invitation.progress"),this.state!==H.Initial){const r=new Error(`Invalid session state ${this.state}`);return this.logger.error(r.message),Promise.reject(r)}const t=e.statusCode||180;if(t<100||t>199)throw new TypeError("Invalid statusCode: "+t);return e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=e.sessionDescriptionHandlerOptions),this.waitingForPrack?(this.logger.warn("Unexpected call for progress while waiting for prack, ignoring"),Promise.resolve()):100===e.statusCode?this.sendProgressTrying().then(()=>{}).catch(r=>this.handleResponseError(r)):"required"===this.rel100||"supported"===this.rel100&&e.rel100||"supported"===this.rel100&&this.userAgent.configuration.sipExtension100rel===ts.Required?this.sendProgressReliableWaitForPrack(e).then(()=>{}).catch(r=>this.handleResponseError(r)):this.sendProgress(e).then(()=>{}).catch(r=>this.handleResponseError(r))}reject(e={}){if(this.logger.log("Invitation.reject"),this.state!==H.Initial&&this.state!==H.Establishing){const o=new Error(`Invalid session state ${this.state}`);return this.logger.error(o.message),Promise.reject(o)}const t=e.statusCode||480,r=e.reasonPhrase?e.reasonPhrase:H_(t),i=e.extraHeaders||[];if(t<300||t>699)throw new TypeError("Invalid statusCode: "+t);const s=e.body?z_(e.body):void 0;return t<400?this.incomingInviteRequest.redirect([],{statusCode:t,reasonPhrase:r,extraHeaders:i,body:s}):this.incomingInviteRequest.reject({statusCode:t,reasonPhrase:r,extraHeaders:i,body:s}),this.stateTransition(H.Terminated),Promise.resolve()}_onCancel(e){if(this.logger.log("Invitation._onCancel"),this.state===H.Initial||this.state===H.Establishing){if(this.delegate&&this.delegate.onCancel){const t=new XV(e);this.delegate.onCancel(t)}this.isCanceled=!0,this.incomingInviteRequest.reject({statusCode:487}),this.stateTransition(H.Terminated)}else this.logger.error(`CANCEL received while in state ${this.state}, dropping request`)}handlePrackOfferAnswer(e){if(!this.dialog)throw new Error("Dialog undefined.");const t=Tf(e.message);if(!t||"session"!==t.contentDisposition)return Promise.resolve(void 0);const r={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers};switch(this.dialog.signalingState){case J.Initial:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);case J.Stable:return this.setAnswer(t,r).then(()=>{});case J.HaveLocalOffer:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);case J.HaveRemoteOffer:return this.setOfferAndGetAnswer(t,r);default:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`)}}handleResponseError(e){let t=480;if(e instanceof Error?this.logger.error(e.message):this.logger.error(e),e instanceof Tb?(this.logger.error("A session description handler occurred while sending response (content type unsupported"),t=415):e instanceof JV?this.logger.error("A session description handler occurred while sending response"):e instanceof Ab?this.logger.error("Session ended before response could be formulated and sent (while waiting for PRACK)"):e instanceof Aa&&this.logger.error("Session changed state before response could be formulated and sent"),this.state===H.Initial||this.state===H.Establishing)try{this.incomingInviteRequest.reject({statusCode:t}),this.stateTransition(H.Terminated)}catch(r){throw this.logger.error("An error occurred attempting to reject the request while handling another error"),r}if(!this.isCanceled)throw e;this.logger.warn("An error occurred while attempting to formulate and send a response to an incoming INVITE. However a CANCEL was received and processed while doing so which can (and often does) result in errors occurring as the session terminates in the meantime. Said error is being ignored.")}onAckTimeout(){if(this.logger.log("Invitation.onAckTimeout"),!this.dialog)throw new Error("Dialog undefined.");this.logger.log("No ACK received for an extended period of time, terminating session"),this.dialog.bye(),this.stateTransition(H.Terminated)}sendAccept(e={}){const t={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},r=e.extraHeaders||[];return this.waitingForPrack?this.waitForArrivalOfPrack().then(()=>clearTimeout(this.userNoAnswerTimer)).then(()=>this.generateResponseOfferAnswer(this.incomingInviteRequest,t)).then(i=>this.incomingInviteRequest.accept({statusCode:200,body:i,extraHeaders:r})):(clearTimeout(this.userNoAnswerTimer),this.generateResponseOfferAnswer(this.incomingInviteRequest,t).then(i=>this.incomingInviteRequest.accept({statusCode:200,body:i,extraHeaders:r})))}sendProgress(e={}){const t=e.statusCode||180,r=e.reasonPhrase,i=(e.extraHeaders||[]).slice(),s=e.body?z_(e.body):void 0;if(183===t&&!s)return this.sendProgressWithSDP(e);try{const o=this.incomingInviteRequest.progress({statusCode:t,reasonPhrase:r,extraHeaders:i,body:s});return this._dialog=o.session,Promise.resolve(o)}catch(o){return Promise.reject(o)}}sendProgressWithSDP(e={}){const t={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},r=e.statusCode||183,i=e.reasonPhrase,s=(e.extraHeaders||[]).slice();return this.generateResponseOfferAnswer(this.incomingInviteRequest,t).then(o=>this.incomingInviteRequest.progress({statusCode:r,reasonPhrase:i,extraHeaders:s,body:o})).then(o=>(this._dialog=o.session,o))}sendProgressReliable(e={}){return e.extraHeaders=(e.extraHeaders||[]).slice(),e.extraHeaders.push("Require: 100rel"),e.extraHeaders.push("RSeq: "+Math.floor(1e4*Math.random())),this.sendProgressWithSDP(e)}sendProgressReliableWaitForPrack(e={}){const t={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},r=e.statusCode||183,i=e.reasonPhrase,s=(e.extraHeaders||[]).slice();let o;return s.push("Require: 100rel"),s.push("RSeq: "+this.rseq++),new Promise((l,u)=>{this.waitingForPrack=!0,this.generateResponseOfferAnswer(this.incomingInviteRequest,t).then(d=>(o=d,this.incomingInviteRequest.progress({statusCode:r,reasonPhrase:i,extraHeaders:s,body:o}))).then(d=>{let f,p;this._dialog=d.session,d.session.delegate={onPrack:V=>{f=V,clearTimeout(v),clearTimeout(L),this.waitingForPrack&&(this.waitingForPrack=!1,this.handlePrackOfferAnswer(f).then(G=>{try{p=f.accept({statusCode:200,body:G}),this.prackArrived(),l({prackRequest:f,prackResponse:p,progressResponse:d})}catch(C){u(C)}}).catch(G=>u(G)))}};const v=setTimeout(()=>{this.waitingForPrack&&(this.waitingForPrack=!1,this.logger.warn("No PRACK received, rejecting INVITE."),clearTimeout(L),this.reject({statusCode:504}).then(()=>u(new Ab)).catch(V=>u(V)))},64*Pn_T1),b=()=>{try{this.incomingInviteRequest.progress({statusCode:r,reasonPhrase:i,extraHeaders:s,body:o})}catch(V){return this.waitingForPrack=!1,void u(V)}L=setTimeout(b,I*=2)};let I=Pn_T1,L=setTimeout(b,I)}).catch(d=>{this.waitingForPrack=!1,u(d)})})}sendProgressTrying(){try{const e=this.incomingInviteRequest.trying();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}waitForArrivalOfPrack(){if(this.waitingForPrackPromise)throw new Error("Already waiting for PRACK");return this.waitingForPrackPromise=new Promise((e,t)=>{this.waitingForPrackResolve=e,this.waitingForPrackReject=t}),this.waitingForPrackPromise}prackArrived(){this.waitingForPrackResolve&&this.waitingForPrackResolve(),this.waitingForPrackPromise=void 0,this.waitingForPrackResolve=void 0,this.waitingForPrackReject=void 0}prackNeverArrived(){this.waitingForPrackReject&&this.waitingForPrackReject(new Ab),this.waitingForPrackPromise=void 0,this.waitingForPrackResolve=void 0,this.waitingForPrackReject=void 0}}class cx extends Mf{constructor(e,t,r={}){super(e,r),this.disposed=!1,this.earlyMedia=!1,this.earlyMediaSessionDescriptionHandlers=new Map,this.isCanceled=!1,this.inviteWithoutSdp=!1,this.logger=e.getLogger("sip.Inviter"),this.earlyMedia=void 0!==r.earlyMedia?r.earlyMedia:this.earlyMedia,this.fromTag=U_(),this.inviteWithoutSdp=void 0!==r.inviteWithoutSdp?r.inviteWithoutSdp:this.inviteWithoutSdp;const i=Object.assign({},r);i.params=Object.assign({},r.params);const s=r.anonymous||!1,o=e.contact.toString({anonymous:s,outbound:s?!e.contact.tempGruu:!e.contact.pubGruu});s&&e.configuration.uri&&(i.params.fromDisplayName="Anonymous",i.params.fromUri="sip:anonymous@anonymous.invalid");let l=e.userAgentCore.configuration.aor;if(i.params.fromUri&&(l="string"==typeof i.params.fromUri?Cn.URIParse(i.params.fromUri):i.params.fromUri),!l)throw new TypeError("Invalid from URI: "+i.params.fromUri);let u=t;if(i.params.toUri&&(u="string"==typeof i.params.toUri?Cn.URIParse(i.params.toUri):i.params.toUri),!u)throw new TypeError("Invalid to URI: "+i.params.toUri);const d=Object.assign({},i.params);d.fromTag=this.fromTag;const f=(i.extraHeaders||[]).slice();s&&e.configuration.uri&&(f.push("P-Preferred-Identity: "+e.configuration.uri.toString()),f.push("Privacy: id")),f.push("Contact: "+o),f.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),e.configuration.sipExtension100rel===ts.Required&&f.push("Require: 100rel"),e.configuration.sipExtensionReplaces===ts.Required&&f.push("Require: replaces"),i.extraHeaders=f,this.outgoingRequestMessage=e.userAgentCore.makeOutgoingRequestMessage(re.INVITE,t,l,u,d,f,void 0),this._contact=o,this._referralInviterOptions=i,this._renderbody=r.renderbody,this._rendertype=r.rendertype,r.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=r.sessionDescriptionHandlerModifiers),r.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=r.sessionDescriptionHandlerOptions),r.sessionDescriptionHandlerModifiersReInvite&&(this.sessionDescriptionHandlerModifiersReInvite=r.sessionDescriptionHandlerModifiersReInvite),r.sessionDescriptionHandlerOptionsReInvite&&(this.sessionDescriptionHandlerOptionsReInvite=r.sessionDescriptionHandlerOptionsReInvite),this._id=this.outgoingRequestMessage.callId+this.fromTag,this.userAgent._sessions[this._id]=this}dispose(){if(this.disposed)return Promise.resolve();switch(this.disposed=!0,this.disposeEarlyMedia(),this.state){case H.Initial:case H.Establishing:return this.cancel().then(()=>super.dispose());case H.Established:case H.Terminating:case H.Terminated:return super.dispose();default:throw new Error("Unknown state.")}}get body(){return this.outgoingRequestMessage.body}get localIdentity(){return this.outgoingRequestMessage.from}get remoteIdentity(){return this.outgoingRequestMessage.to}get request(){return this.outgoingRequestMessage}cancel(e={}){if(this.logger.log("Inviter.cancel"),this.state!==H.Initial&&this.state!==H.Establishing){const r=new Error(`Invalid session state ${this.state}`);return this.logger.error(r.message),Promise.reject(r)}if(this.isCanceled=!0,this.stateTransition(H.Terminating),this.outgoingInviteRequest){let r;e.statusCode&&e.reasonPhrase&&(r=function t(r,i){if(r&&r<200||r>699)throw new TypeError("Invalid statusCode: "+r);if(r)return"SIP;cause="+r+';text="'+(H_(r)||i)+'"'}(e.statusCode,e.reasonPhrase)),this.outgoingInviteRequest.cancel(r,e)}else this.logger.warn("Canceled session before INVITE was sent"),this.stateTransition(H.Terminated);return Promise.resolve()}invite(e={}){return this.logger.log("Inviter.invite"),this.state!==H.Initial?super.invite(e):(e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=e.sessionDescriptionHandlerOptions),e.withoutSdp||this.inviteWithoutSdp?(this._renderbody&&this._rendertype&&(this.outgoingRequestMessage.body={contentType:this._rendertype,body:this._renderbody}),this.stateTransition(H.Establishing),Promise.resolve(this.sendInvite(e))):this.getOffer({sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions}).then(r=>(this.outgoingRequestMessage.body={body:r.content,contentType:r.contentType},this.stateTransition(H.Establishing),this.sendInvite(e))).catch(r=>{throw this.logger.log(r.message),this.state!==H.Terminated&&this.stateTransition(H.Terminated),r}))}sendInvite(e={}){return this.outgoingInviteRequest=this.userAgent.userAgentCore.invite(this.outgoingRequestMessage,{onAccept:t=>this.dialog?(this.logger.log("Additional confirmed dialog, sending ACK and BYE"),void this.ackAndBye(t)):this.isCanceled?(this.logger.log("Canceled session accepted, sending ACK and BYE"),this.ackAndBye(t),void this.stateTransition(H.Terminated)):(this.notifyReferer(t),void this.onAccept(t).then(()=>{this.disposeEarlyMedia()}).catch(()=>{this.disposeEarlyMedia()}).then(()=>{e.requestDelegate&&e.requestDelegate.onAccept&&e.requestDelegate.onAccept(t)})),onProgress:t=>{this.isCanceled||(this.notifyReferer(t),this.onProgress(t).catch(()=>{this.disposeEarlyMedia()}).then(()=>{e.requestDelegate&&e.requestDelegate.onProgress&&e.requestDelegate.onProgress(t)}))},onRedirect:t=>{this.notifyReferer(t),this.onRedirect(t),e.requestDelegate&&e.requestDelegate.onRedirect&&e.requestDelegate.onRedirect(t)},onReject:t=>{this.notifyReferer(t),this.onReject(t),e.requestDelegate&&e.requestDelegate.onReject&&e.requestDelegate.onReject(t)},onTrying:t=>{this.notifyReferer(t),this.onTrying(t),e.requestDelegate&&e.requestDelegate.onTrying&&e.requestDelegate.onTrying(t)}}),this.outgoingInviteRequest}disposeEarlyMedia(){this.earlyMediaSessionDescriptionHandlers.forEach(e=>{e.close()}),this.earlyMediaSessionDescriptionHandlers.clear()}notifyReferer(e){if(!this._referred)return;if(!(this._referred instanceof Mf))throw new Error("Referred session not instance of session");if(!this._referred.dialog)return;if(!e.message.statusCode)throw new Error("Status code undefined.");if(!e.message.reasonPhrase)throw new Error("Reason phrase undefined.");const i=`SIP/2.0 ${e.message.statusCode} ${e.message.reasonPhrase}`.trim();this._referred.dialog.notify(void 0,{extraHeaders:["Event: refer","Subscription-State: terminated"],body:{contentDisposition:"render",contentType:"message/sipfrag",content:i}}).delegate={onReject:()=>{this._referred=void 0}}}onAccept(e){if(this.logger.log("Inviter.onAccept"),this.state!==H.Establishing)return this.logger.error(`Accept received while in state ${this.state}, dropping response`),Promise.reject(new Error(`Invalid session state ${this.state}`));const t=e.message,r=e.session;switch(t.hasHeader("P-Asserted-Identity")&&(this._assertedIdentity=Cn.nameAddrHeaderParse(t.getHeader("P-Asserted-Identity"))),r.delegate={onAck:i=>this.onAckRequest(i),onBye:i=>this.onByeRequest(i),onInfo:i=>this.onInfoRequest(i),onInvite:i=>this.onInviteRequest(i),onMessage:i=>this.onMessageRequest(i),onNotify:i=>this.onNotifyRequest(i),onPrack:i=>this.onPrackRequest(i),onRefer:i=>this.onReferRequest(i)},this._dialog=r,r.signalingState){case J.Initial:case J.HaveLocalOffer:return this.logger.error("Received 2xx response to INVITE without a session description"),this.ackAndBye(e,400,"Missing session description"),this.stateTransition(H.Terminated),Promise.reject(new Error("Bad Media Description"));case J.HaveRemoteOffer:if(!this._dialog.offer)throw new Error(`Session offer undefined in signaling state ${this._dialog.signalingState}.`);return this.setOfferAndGetAnswer(this._dialog.offer,{sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions}).then(s=>{e.ack({body:s}),this.stateTransition(H.Established)}).catch(s=>{throw this.ackAndBye(e,488,"Invalid session description"),this.stateTransition(H.Terminated),s});case J.Stable:{if(this.earlyMediaSessionDescriptionHandlers.size>0){const o=this.earlyMediaSessionDescriptionHandlers.get(r.id);if(!o)throw new Error("Session description handler undefined.");return this.setSessionDescriptionHandler(o),this.earlyMediaSessionDescriptionHandlers.delete(r.id),e.ack(),this.stateTransition(H.Established),Promise.resolve()}if(this.earlyMediaDialog){if(this.earlyMediaDialog!==r){this.earlyMedia&&this.logger.error("You have set the 'earlyMedia' option to 'true' which requires that your INVITE requests do not fork and yet this INVITE request did in fact fork. Consequentially and not surprisingly the end point which accepted the INVITE (confirmed dialog) does not match the end point with which early media has been setup (early dialog) and thus this session is unable to proceed. In accordance with the SIP specifications, the SIP servers your end point is connected to determine if an INVITE forks and the forking behavior of those servers cannot be controlled by this library. If you wish to use early media with this library you must configure those servers accordingly. Alternatively you may set the 'earlyMedia' to 'false' which will allow this library to function with any INVITE requests which do fork.");const o=new Error("Early media dialog does not equal confirmed dialog, terminating session");return this.logger.error(o.message),this.ackAndBye(e,488,"Not Acceptable Here"),this.stateTransition(H.Terminated),Promise.reject(o)}return e.ack(),this.stateTransition(H.Established),Promise.resolve()}const i=r.answer;if(!i)throw new Error("Answer is undefined.");return this.setAnswer(i,{sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions}).then(()=>{let o;this._renderbody&&this._rendertype&&(o={body:{contentDisposition:"render",contentType:this._rendertype,content:this._renderbody}}),e.ack(o),this.stateTransition(H.Established)}).catch(o=>{throw this.logger.error(o.message),this.ackAndBye(e,488,"Not Acceptable Here"),this.stateTransition(H.Terminated),o})}case J.Closed:return Promise.reject(new Error("Terminated."));default:throw new Error("Unknown session signaling state.")}}onProgress(e){var t;if(this.logger.log("Inviter.onProgress"),this.state!==H.Establishing)return this.logger.error(`Progress received while in state ${this.state}, dropping response`),Promise.reject(new Error(`Invalid session state ${this.state}`));if(!this.outgoingInviteRequest)throw new Error("Outgoing INVITE request undefined.");const r=e.message,i=e.session;r.hasHeader("P-Asserted-Identity")&&(this._assertedIdentity=Cn.nameAddrHeaderParse(r.getHeader("P-Asserted-Identity")));const s=r.getHeader("require"),o=r.getHeader("rseq"),u=!!(s&&s.includes("100rel")&&o?Number(o):void 0),d=[];switch(u&&d.push("RAck: "+r.getHeader("rseq")+" "+r.getHeader("cseq")),i.signalingState){case J.Initial:return u&&(this.logger.warn("First reliable provisional response received MUST contain an offer when INVITE does not contain an offer."),e.prack({extraHeaders:d})),Promise.resolve();case J.HaveLocalOffer:return u&&e.prack({extraHeaders:d}),Promise.resolve();case J.HaveRemoteOffer:if(!u)return this.logger.warn("Non-reliable provisional response MUST NOT contain an initial offer, discarding response."),Promise.resolve();{const f=this.sessionDescriptionHandlerFactory(this,this.userAgent.configuration.sessionDescriptionHandlerFactoryOptions||{});return!(null===(t=this.delegate)||void 0===t)&&t.onSessionDescriptionHandler&&this.delegate.onSessionDescriptionHandler(f,!0),this.earlyMediaSessionDescriptionHandlers.set(i.id,f),f.setDescription(r.body,this.sessionDescriptionHandlerOptions,this.sessionDescriptionHandlerModifiers).then(()=>f.getDescription(this.sessionDescriptionHandlerOptions,this.sessionDescriptionHandlerModifiers)).then(p=>{e.prack({extraHeaders:d,body:{contentDisposition:"session",contentType:p.contentType,content:p.body}})}).catch(p=>{throw this.stateTransition(H.Terminated),p})}case J.Stable:if(u&&e.prack({extraHeaders:d}),this.earlyMedia&&!this.earlyMediaDialog){this.earlyMediaDialog=i;const f=i.answer;if(!f)throw new Error("Answer is undefined.");return this.setAnswer(f,{sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions}).catch(y=>{throw this.stateTransition(H.Terminated),y})}return Promise.resolve();case J.Closed:return Promise.reject(new Error("Terminated."));default:throw new Error("Unknown session signaling state.")}}onRedirect(e){this.logger.log("Inviter.onRedirect"),this.state===H.Establishing||this.state===H.Terminating?this.stateTransition(H.Terminated):this.logger.error(`Redirect received while in state ${this.state}, dropping response`)}onReject(e){this.logger.log("Inviter.onReject"),this.state===H.Establishing||this.state===H.Terminating?this.stateTransition(H.Terminated):this.logger.error(`Reject received while in state ${this.state}, dropping response`)}onTrying(e){this.logger.log("Inviter.onTrying"),this.state===H.Establishing||this.logger.error(`Trying received while in state ${this.state}, dropping response`)}}var qn,vt;!function(n){n.Started="Started",n.Stopped="Stopped"}(qn=qn||(qn={}));class Hl{constructor(e={}){if(this._publishers={},this._registerers={},this._sessions={},this._subscriptions={},this._state=qn.Stopped,this._stateEventEmitter=new Af,this.delegate=e.delegate,this.options=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Hl.defaultOptions()),{sipjsId:$l(5)}),{uri:new ks("sip","anonymous."+$l(6),"anonymous.invalid")}),{viaHost:$l(12)+".invalid"}),Hl.stripUndefinedProperties(e)),this.options.hackIpInContact)if("boolean"==typeof this.options.hackIpInContact&&this.options.hackIpInContact){const i=Math.floor(254*Math.random()+1);this.options.viaHost="192.0.2."+i}else this.options.hackIpInContact&&(this.options.viaHost=this.options.hackIpInContact);switch(this.loggerFactory=new SV,this.logger=this.loggerFactory.getLogger("sip.UserAgent"),this.loggerFactory.builtinEnabled=this.options.logBuiltinEnabled,this.loggerFactory.connector=this.options.logConnector,this.options.logLevel){case"error":this.loggerFactory.level=On.error;break;case"warn":this.loggerFactory.level=On.warn;break;case"log":this.loggerFactory.level=On.log;break;case"debug":this.loggerFactory.level=On.debug}if(this.options.logConfiguration&&(this.logger.log("Configuration:"),Object.keys(this.options).forEach(t=>{const r=this.options[t];switch(t){case"uri":case"sessionDescriptionHandlerFactory":this.logger.log("\xb7 "+t+": "+r);break;case"authorizationPassword":this.logger.log("\xb7 "+t+": NOT SHOWN");break;case"transportConstructor":this.logger.log("\xb7 "+t+": "+r.name);break;default:this.logger.log("\xb7 "+t+": "+JSON.stringify(r))}})),this.options.transportOptions){const t=this.options.transportOptions,r=t.maxReconnectionAttempts,i=t.reconnectionTimeout;void 0!==r&&this.logger.warn('The transport option "maxReconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),void 0!==i&&this.logger.warn('The transport option "reconnectionTimeout" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),void 0===e.reconnectionDelay&&void 0!==i&&(this.options.reconnectionDelay=i),void 0===e.reconnectionAttempts&&void 0!==r&&(this.options.reconnectionAttempts=r)}if(void 0!==e.reconnectionDelay&&this.logger.warn('The user agent option "reconnectionDelay" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),void 0!==e.reconnectionAttempts&&this.logger.warn('The user agent option "reconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),this._transport=new this.options.transportConstructor(this.getLogger("sip.Transport"),this.options.transportOptions),this.initTransportCallbacks(),this._contact=this.initContact(),this._instanceId=this.options.instanceId?this.options.instanceId:Hl.newUUID(),-1===Cn.parse(this._instanceId,"uuid"))throw new Error("Invalid instanceId.");this._userAgentCore=this.initCore()}static makeURI(e){return Cn.URIParse(e)}static defaultOptions(){return{allowLegacyNotifications:!1,authorizationHa1:"",authorizationPassword:"",authorizationUsername:"",delegate:{},contactName:"",contactParams:{transport:"ws"},displayName:"",forceRport:!1,gracefulShutdown:!0,hackAllowUnregisteredOptionTags:!1,hackIpInContact:!1,hackViaTcp:!1,instanceId:"",instanceIdAlwaysAdded:!1,logBuiltinEnabled:!0,logConfiguration:!0,logConnector:()=>{},logLevel:"log",noAnswerTimeout:60,preloadedRouteSet:[],reconnectionAttempts:0,reconnectionDelay:4,sendInitialProvisionalResponse:!0,sessionDescriptionHandlerFactory:YV(),sessionDescriptionHandlerFactoryOptions:{},sipExtension100rel:ts.Unsupported,sipExtensionReplaces:ts.Unsupported,sipExtensionExtraSupported:[],sipjsId:"",transportConstructor:ZV,transportOptions:{},uri:new ks("sip","anonymous","anonymous.invalid"),userAgentString:"SIP.js/0.21.1",viaHost:""}}static newUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=Math.floor(16*Math.random());return("x"===t?r:r%4+8).toString(16)})}static stripUndefinedProperties(e){return Object.keys(e).reduce((t,r)=>(void 0!==e[r]&&(t[r]=e[r]),t),{})}get configuration(){return this.options}get contact(){return this._contact}get instanceId(){return this._instanceId}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get transport(){return this._transport}get userAgentCore(){return this._userAgentCore}getLogger(e,t){return this.loggerFactory.getLogger(e,t)}getLoggerFactory(){return this.loggerFactory}isConnected(){return this.transport.isConnected()}reconnect(){return this.state===qn.Stopped?Promise.reject(new Error("User agent stopped.")):Promise.resolve().then(()=>this.transport.connect())}start(){return this.state===qn.Started?(this.logger.warn("User agent already started"),Promise.resolve()):(this.logger.log(`Starting ${this.configuration.uri}`),this.transitionState(qn.Started),this.transport.connect())}stop(){var e=this;return E(function*(){if(e.state===qn.Stopped)return e.logger.warn("User agent already stopped"),Promise.resolve();if(e.logger.log(`Stopping ${e.configuration.uri}`),!e.options.gracefulShutdown)return e.logger.log("Dispose of transport"),e.transport.dispose().catch(u=>{throw e.logger.error(u.message),u}),e.logger.log("Dispose of core"),e.userAgentCore.dispose(),e._publishers={},e._registerers={},e._sessions={},e._subscriptions={},e.transitionState(qn.Stopped),Promise.resolve();const t=Object.assign({},e._publishers),r=Object.assign({},e._registerers),i=Object.assign({},e._sessions),s=Object.assign({},e._subscriptions),o=e.transport,l=e.userAgentCore;e.logger.log("Dispose of registerers");for(const u in r)r[u]&&(yield r[u].dispose().catch(d=>{throw e.logger.error(d.message),delete e._registerers[u],d}));e.logger.log("Dispose of sessions");for(const u in i)i[u]&&(yield i[u].dispose().catch(d=>{throw e.logger.error(d.message),delete e._sessions[u],d}));e.logger.log("Dispose of subscriptions");for(const u in s)s[u]&&(yield s[u].dispose().catch(d=>{throw e.logger.error(d.message),delete e._subscriptions[u],d}));e.logger.log("Dispose of publishers");for(const u in t)t[u]&&(yield t[u].dispose().catch(d=>{throw e.logger.error(d.message),delete e._publishers[u],d}));e.logger.log("Dispose of transport"),yield o.dispose().catch(u=>{throw e.logger.error(u.message),u}),e.logger.log("Dispose of core"),l.dispose(),e.transitionState(qn.Stopped)})()}_makeInviter(e,t){return new cx(this,e,t)}attemptReconnection(e=1){const t=this.options.reconnectionAttempts,r=this.options.reconnectionDelay;e>t?this.logger.log("Maximum reconnection attempts reached"):(this.logger.log(`Reconnection attempt ${e} of ${t} - trying`),setTimeout(()=>{this.reconnect().then(()=>{this.logger.log(`Reconnection attempt ${e} of ${t} - succeeded`)}).catch(i=>{this.logger.error(i.message),this.logger.log(`Reconnection attempt ${e} of ${t} - failed`),this.attemptReconnection(++e)})},1===e?0:1e3*r))}initContact(){const e=""!==this.options.contactName?this.options.contactName:$l(8),t=this.options.contactParams;return{pubGruu:void 0,tempGruu:void 0,uri:new ks("sip",e,this.options.viaHost,void 0,t),toString:(i={})=>{let u="<";return u+=i.anonymous?this.contact.tempGruu||`sip:anonymous@anonymous.invalid;transport=${t.transport?t.transport:"ws"}`:i.register?this.contact.uri:this.contact.pubGruu||this.contact.uri,!!i.outbound&&(u+=";ob"),u+=">",this.options.instanceIdAlwaysAdded&&(u+=';+sip.instance="<urn:uuid:'+this._instanceId+'>"'),u}}}initCore(){let e=[];e.push("outbound"),this.options.sipExtension100rel===ts.Supported&&e.push("100rel"),this.options.sipExtensionReplaces===ts.Supported&&e.push("replaces"),this.options.sipExtensionExtraSupported&&e.push(...this.options.sipExtensionExtraSupported),this.options.hackAllowUnregisteredOptionTags||(e=e.filter(s=>iB[s])),e=Array.from(new Set(e));const t=e.slice();return(this.contact.pubGruu||this.contact.tempGruu)&&t.push("gruu"),new GV({aor:this.options.uri,contact:this.contact,displayName:this.options.displayName,loggerFactory:this.loggerFactory,hackViaTcp:this.options.hackViaTcp,routeSet:this.options.preloadedRouteSet,supportedOptionTags:e,supportedOptionTagsResponse:t,sipjsId:this.options.sipjsId,userAgentHeaderFieldValue:this.options.userAgentString,viaForceRport:this.options.forceRport,viaHost:this.options.viaHost,authenticationFactory:()=>{const s=this.options.authorizationUsername?this.options.authorizationUsername:this.options.uri.user,o=this.options.authorizationPassword?this.options.authorizationPassword:void 0,l=this.options.authorizationHa1?this.options.authorizationHa1:void 0;return new DV(this.getLoggerFactory(),l,s,o)},transportAccessor:()=>this.transport},{onInvite:s=>{var o;const l=new sB(this,s);if(s.delegate={onCancel:u=>{l._onCancel(u)},onTransportError:u=>{this.logger.error("A transport error has occurred while handling an incoming INVITE request.")}},s.trying(),this.options.sipExtensionReplaces!==ts.Unsupported){const d=s.message.parseHeader("replaces");if(d){const f=d.call_id;if("string"!=typeof f)throw new Error("Type of call id is not string");const p=d.replaces_to_tag;if("string"!=typeof p)throw new Error("Type of to tag is not string");const y=d.replaces_from_tag;if("string"!=typeof y)throw new Error("type of from tag is not string");const b=this.userAgentCore.dialogs.get(f+p+y);if(!b)return void l.reject({statusCode:481});if(!b.early&&!0===d.early_only)return void l.reject({statusCode:486});const I=this._sessions[f+y]||this._sessions[f+p]||void 0;if(!I)throw new Error("Session does not exist.");l._replacee=I}}if(null!==(o=this.delegate)&&void 0!==o&&o.onInvite)return l.autoSendAnInitialProvisionalResponse?void l.progress().then(()=>{var u;if(void 0===(null===(u=this.delegate)||void 0===u?void 0:u.onInvite))throw new Error("onInvite undefined.");this.delegate.onInvite(l)}):void this.delegate.onInvite(l);l.reject({statusCode:486})},onMessage:s=>{if(this.delegate&&this.delegate.onMessage){const o=new lx(s);this.delegate.onMessage(o)}else s.accept()},onNotify:s=>{if(this.delegate&&this.delegate.onNotify){const o=new Mb(s);this.delegate.onNotify(o)}else this.options.allowLegacyNotifications?s.accept():s.reject({statusCode:481})},onRefer:s=>{this.logger.warn("Received an out of dialog REFER request"),this.delegate&&this.delegate.onReferRequest?this.delegate.onReferRequest(s):s.reject({statusCode:405})},onRegister:s=>{this.logger.warn("Received an out of dialog REGISTER request"),this.delegate&&this.delegate.onRegisterRequest?this.delegate.onRegisterRequest(s):s.reject({statusCode:405})},onSubscribe:s=>{this.logger.warn("Received an out of dialog SUBSCRIBE request"),this.delegate&&this.delegate.onSubscribeRequest?this.delegate.onSubscribeRequest(s):s.reject({statusCode:405})}})}initTransportCallbacks(){this.transport.onConnect=()=>this.onTransportConnect(),this.transport.onDisconnect=e=>this.onTransportDisconnect(e),this.transport.onMessage=e=>this.onTransportMessage(e)}onTransportConnect(){this.state!==qn.Stopped&&this.delegate&&this.delegate.onConnect&&this.delegate.onConnect()}onTransportDisconnect(e){this.state!==qn.Stopped&&(this.delegate&&this.delegate.onDisconnect&&this.delegate.onDisconnect(e),e&&this.options.reconnectionAttempts>0&&this.attemptReconnection())}onTransportMessage(e){const t=j_.parseMessage(e,this.getLogger("sip.Parser"));if(!t)return void this.logger.warn("Failed to parse incoming message. Dropping.");if(this.state===qn.Stopped&&t instanceof Fu)return void this.logger.warn(`Received ${t.method} request while stopped. Dropping.`);const r=()=>{const i=["from","to","call_id","cseq","via"];for(const s of i)if(!t.hasHeader(s))return this.logger.warn(`Missing mandatory header field : ${s}.`),!1;return!0};if(t instanceof Fu){if(!r())return void this.logger.warn("Request missing mandatory header field. Dropping.");if(!t.toTag&&t.callId.substr(0,5)===this.options.sipjsId)return void this.userAgentCore.replyStateless(t,{statusCode:482});const i=Sf(t.body),s=t.getHeader("content-length");if(s&&i<Number(s))return void this.userAgentCore.replyStateless(t,{statusCode:400})}if(t instanceof Sa){if(!r())return void this.logger.warn("Response missing mandatory header field. Dropping.");if(t.getHeaders("via").length>1)return void this.logger.warn("More than one Via header field present in the response. Dropping.");if(t.via.host!==this.options.viaHost||void 0!==t.via.port)return void this.logger.warn("Via sent-by in the response does not match UA Via host value. Dropping.");const i=Sf(t.body),s=t.getHeader("content-length");if(s&&i<Number(s))return void this.logger.warn("Message body length is lower than the value in Content-Length header field. Dropping.")}if(t instanceof Fu)this.userAgentCore.receiveIncomingRequestFromTransport(t);else{if(!(t instanceof Sa))throw new Error("Invalid message type.");this.userAgentCore.receiveIncomingResponseFromTransport(t)}}transitionState(e,t){const r=()=>{throw new Error(`Invalid state transition from ${this._state} to ${e}`)};switch(this._state){case qn.Started:e!==qn.Stopped&&r();break;case qn.Stopped:e!==qn.Started&&r();break;default:throw new Error("Unknown state.")}this.logger.log(`Transitioned from ${this._state} to ${e}`),this._state=e,this._stateEventEmitter.emit(this._state)}}!function(n){n.Initial="Initial",n.Registered="Registered",n.Unregistered="Unregistered",n.Terminated="Terminated"}(vt=vt||(vt={}));let oB=(()=>{class n{constructor(t,r={}){this.disposed=!1,this._contacts=[],this._retryAfter=void 0,this._state=vt.Initial,this._waiting=!1,this._stateEventEmitter=new Af,this._waitingEventEmitter=new Af,this.userAgent=t;const i=t.configuration.uri.clone();if(i.user=void 0,this.options=Object.assign(Object.assign(Object.assign({},n.defaultOptions()),{registrar:i}),n.stripUndefinedProperties(r)),this.options.extraContactHeaderParams=(this.options.extraContactHeaderParams||[]).slice(),this.options.extraHeaders=(this.options.extraHeaders||[]).slice(),!this.options.registrar)throw new Error("Registrar undefined.");if(this.options.registrar=this.options.registrar.clone(),this.options.regId&&!this.options.instanceId?this.options.instanceId=this.userAgent.instanceId:!this.options.regId&&this.options.instanceId&&(this.options.regId=1),this.options.instanceId&&-1===Cn.parse(this.options.instanceId,"uuid"))throw new Error("Invalid instanceId.");if(this.options.regId&&this.options.regId<0)throw new Error("Invalid regId.");const s=this.options.registrar,o=this.options.params&&this.options.params.fromUri||t.userAgentCore.configuration.aor,l=this.options.params&&this.options.params.toUri||t.configuration.uri,u=this.options.params||{},d=(r.extraHeaders||[]).slice();if(this.request=t.userAgentCore.makeOutgoingRequestMessage(re.REGISTER,s,o,l,u,d,void 0),this.expires=this.options.expires||n.defaultExpires,this.expires<0)throw new Error("Invalid expires.");if(this.refreshFrequency=this.options.refreshFrequency||n.defaultRefreshFrequency,this.refreshFrequency<50||this.refreshFrequency>99)throw new Error("Invalid refresh frequency. The value represents a percentage of the expiration time and should be between 50 and 99.");this.logger=t.getLogger("sip.Registerer"),this.options.logConfiguration&&(this.logger.log("Configuration:"),Object.keys(this.options).forEach(f=>{const p=this.options[f];this.logger.log("registrar"===f?"\xb7 "+f+": "+p:"\xb7 "+f+": "+JSON.stringify(p))})),this.id=this.request.callId+this.request.from.parameters.tag,this.userAgent._registerers[this.id]=this}static defaultOptions(){return{expires:n.defaultExpires,extraContactHeaderParams:[],extraHeaders:[],logConfiguration:!0,instanceId:"",params:{},regId:0,registrar:new ks("sip","anonymous","anonymous.invalid"),refreshFrequency:n.defaultRefreshFrequency}}static stripUndefinedProperties(t){return Object.keys(t).reduce((r,i)=>(void 0!==t[i]&&(r[i]=t[i]),r),{})}get contacts(){return this._contacts.slice()}get retryAfter(){return this._retryAfter}get state(){return this._state}get stateChange(){return this._stateEventEmitter}dispose(){return this.disposed?Promise.resolve():(this.disposed=!0,this.logger.log(`Registerer ${this.id} in state ${this.state} is being disposed`),delete this.userAgent._registerers[this.id],new Promise(t=>{const r=()=>{if(!this.waiting&&this._state===vt.Registered)return this.stateChange.addListener(()=>{this.terminated(),t()},{once:!0}),void this.unregister();this.terminated(),t()};this.waiting?this.waitingChange.addListener(()=>{r()},{once:!0}):r()}))}register(t={}){if(this.state===vt.Terminated)throw this.stateError(),new Error("Registerer terminated. Unable to register.");if(this.disposed)throw this.stateError(),new Error("Registerer disposed. Unable to register.");if(this.waiting){this.waitingWarning();const s=new Ib("REGISTER request already in progress, waiting for final response");return Promise.reject(s)}t.requestOptions&&(this.options=Object.assign(Object.assign({},this.options),t.requestOptions));const r=(this.options.extraHeaders||[]).slice();r.push("Contact: "+this.generateContactHeader(this.expires)),r.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),this.request.cseq++,this.request.setHeader("cseq",this.request.cseq+" REGISTER"),this.request.extraHeaders=r,this.waitingToggle(!0);const i=this.userAgent.userAgentCore.register(this.request,{onAccept:s=>{let o;s.message.hasHeader("expires")&&(o=Number(s.message.getHeader("expires"))),this._contacts=s.message.getHeaders("contact");let u,l=this._contacts.length;if(!l)return this.logger.error("No Contact header in response to REGISTER, dropping response."),void this.unregistered();for(;l--;){if(u=s.message.parseHeader("contact",l),!u)throw new Error("Contact undefined");if(this.userAgent.contact.pubGruu&&YM(u.uri,this.userAgent.contact.pubGruu)){o=Number(u.getParam("expires"));break}if(""===this.userAgent.configuration.contactName){if(u.uri.user===this.userAgent.contact.uri.user){o=Number(u.getParam("expires"));break}}else if(YM(u.uri,this.userAgent.contact.uri)){o=Number(u.getParam("expires"));break}u=void 0}if(void 0===u)return this.logger.error("No Contact header pointing to us, dropping response"),this.unregistered(),void this.waitingToggle(!1);if(void 0===o)return this.logger.error("Contact pointing to us is missing expires parameter, dropping response"),this.unregistered(),void this.waitingToggle(!1);if(u.hasParam("temp-gruu")){const d=u.getParam("temp-gruu");d&&(this.userAgent.contact.tempGruu=Cn.URIParse(d.replace(/"/g,"")))}if(u.hasParam("pub-gruu")){const d=u.getParam("pub-gruu");d&&(this.userAgent.contact.pubGruu=Cn.URIParse(d.replace(/"/g,"")))}this.registered(o),t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(s),this.waitingToggle(!1)},onProgress:s=>{t.requestDelegate&&t.requestDelegate.onProgress&&t.requestDelegate.onProgress(s)},onRedirect:s=>{this.logger.error("Redirect received. Not supported."),this.unregistered(),t.requestDelegate&&t.requestDelegate.onRedirect&&t.requestDelegate.onRedirect(s),this.waitingToggle(!1)},onReject:s=>{if(423===s.message.statusCode)return s.message.hasHeader("min-expires")?(this.expires=Number(s.message.getHeader("min-expires")),this.waitingToggle(!1),void this.register()):(this.logger.error("423 response received for REGISTER without Min-Expires, dropping response"),this.unregistered(),void this.waitingToggle(!1));this.logger.warn(`Failed to register, status code ${s.message.statusCode}`);let o=NaN;if(500===s.message.statusCode||503===s.message.statusCode){const l=s.message.getHeader("retry-after");l&&(o=Number.parseInt(l,void 0))}this._retryAfter=isNaN(o)?void 0:o,this.unregistered(),t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(s),this._retryAfter=void 0,this.waitingToggle(!1)},onTrying:s=>{t.requestDelegate&&t.requestDelegate.onTrying&&t.requestDelegate.onTrying(s)}});return Promise.resolve(i)}unregister(t={}){if(this.state===vt.Terminated)throw this.stateError(),new Error("Registerer terminated. Unable to register.");if(this.disposed&&this.state!==vt.Registered)throw this.stateError(),new Error("Registerer disposed. Unable to register.");if(this.waiting){this.waitingWarning();const s=new Ib("REGISTER request already in progress, waiting for final response");return Promise.reject(s)}this._state!==vt.Registered&&!t.all&&this.logger.warn("Not currently registered, but sending an unregister anyway.");const r=(t.requestOptions&&t.requestOptions.extraHeaders||[]).slice();this.request.extraHeaders=r,t.all?(r.push("Contact: *"),r.push("Expires: 0")):r.push("Contact: "+this.generateContactHeader(0)),this.request.cseq++,this.request.setHeader("cseq",this.request.cseq+" REGISTER"),void 0!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),this.waitingToggle(!0);const i=this.userAgent.userAgentCore.register(this.request,{onAccept:s=>{this._contacts=s.message.getHeaders("contact"),this.unregistered(),t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(s),this.waitingToggle(!1)},onProgress:s=>{t.requestDelegate&&t.requestDelegate.onProgress&&t.requestDelegate.onProgress(s)},onRedirect:s=>{this.logger.error("Unregister redirected. Not currently supported."),this.unregistered(),t.requestDelegate&&t.requestDelegate.onRedirect&&t.requestDelegate.onRedirect(s),this.waitingToggle(!1)},onReject:s=>{this.logger.error(`Unregister rejected with status code ${s.message.statusCode}`),this.unregistered(),t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(s),this.waitingToggle(!1)},onTrying:s=>{t.requestDelegate&&t.requestDelegate.onTrying&&t.requestDelegate.onTrying(s)}});return Promise.resolve(i)}clearTimers(){void 0!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),void 0!==this.registrationExpiredTimer&&(clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=void 0)}generateContactHeader(t){let r=this.userAgent.contact.toString({register:!0});return this.options.regId&&this.options.instanceId&&(r+=";reg-id="+this.options.regId,r+=';+sip.instance="<urn:uuid:'+this.options.instanceId+'>"'),this.options.extraContactHeaderParams&&this.options.extraContactHeaderParams.forEach(i=>{r+=";"+i}),r+=";expires="+t,r}registered(t){this.clearTimers(),this.registrationTimer=setTimeout(()=>{this.registrationTimer=void 0,this.register()},this.refreshFrequency/100*t*1e3),this.registrationExpiredTimer=setTimeout(()=>{this.logger.warn("Registration expired"),this.unregistered()},1e3*t),this._state!==vt.Registered&&this.stateTransition(vt.Registered)}unregistered(){this.clearTimers(),this._state!==vt.Unregistered&&this.stateTransition(vt.Unregistered)}terminated(){this.clearTimers(),this._state!==vt.Terminated&&this.stateTransition(vt.Terminated)}stateTransition(t){const r=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case vt.Initial:t!==vt.Registered&&t!==vt.Unregistered&&t!==vt.Terminated&&r();break;case vt.Registered:t!==vt.Unregistered&&t!==vt.Terminated&&r();break;case vt.Unregistered:t!==vt.Registered&&t!==vt.Terminated&&r();break;case vt.Terminated:r();break;default:throw new Error("Unrecognized state.")}this._state=t,this.logger.log(`Registration transitioned to state ${this._state}`),this._stateEventEmitter.emit(this._state),t===vt.Terminated&&this.dispose()}get waiting(){return this._waiting}get waitingChange(){return this._waitingEventEmitter}waitingToggle(t){if(this._waiting===t)throw new Error(`Invalid waiting transition from ${this._waiting} to ${t}`);this._waiting=t,this.logger.log(`Waiting toggled to ${this._waiting}`),this._waitingEventEmitter.emit(this._waiting)}waitingWarning(){let t="An attempt was made to send a REGISTER request while a prior one was still in progress.";t+=" RFC 3261 requires UAs MUST NOT send a new registration until they have received a final response",t+=" from the registrar for the previous one or the previous REGISTER request has timed out.",t+=" Note that if the transport disconnects, you still must wait for the prior request to time out before",t+=" sending a new REGISTER request or alternatively dispose of the current Registerer and create a new Registerer.",this.logger.warn("An attempt was made to send a REGISTER request while a prior one was still in progress. RFC 3261 requires UAs MUST NOT send a new registration until they have received a final response from the registrar for the previous one or the previous REGISTER request has timed out. Note that if the transport disconnects, you still must wait for the prior request to time out before sending a new REGISTER request or alternatively dispose of the current Registerer and create a new Registerer.")}stateError(){let r=`An attempt was made to send a REGISTER request when the Registerer ${this.state===vt.Terminated?"is in 'Terminated' state":"has been disposed"}.`;r+=" The Registerer transitions to 'Terminated' when Registerer.dispose() is called.",r+=" Perhaps you called UserAgent.stop() which dipsoses of all Registerers?",this.logger.error(r)}}return n.defaultExpires=600,n.defaultRefreshFrequency=99,n})();var Ma=rc(489);let aB=(()=>{class n{constructor(t,r,i){this.http=t,this.cookie=r,this.env=i}getExtensionInfo(){const t=this.cookie.getCookie("session_id"),r=this.cookie.getCookie("extension");if(r){const i=JSON.parse(r);if(i?.session_id==t)return ae(Object.assign({data:i}))}return this.http.get("/webrtc/extensions",{session_id:t})}}return n.\u0275fac=function(t){return new(t||n)(k(ku),k(Nl),k(si))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const{isArray:lB}=Array,{getPrototypeOf:cB,prototype:uB,keys:dB}=Object;function ux(n){if(1===n.length){const e=n[0];if(lB(e))return{args:e,keys:null};if(function hB(n){return n&&"object"==typeof n&&cB(n)===uB}(e)){const t=dB(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:fB}=Array;function xb(n){return Fe(e=>function pB(n,e){return fB(e)?n(...e):n(e)}(n,e))}function dx(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function hx(...n){const e=Ka(n),t=Ep(n),{args:r,keys:i}=ux(n);if(0===r.length)return $t([],e);const s=new wt(function gB(n,e,t=as){return r=>{fx(e,()=>{const{length:i}=n,s=new Array(i);let o=i,l=i;for(let u=0;u<i;u++)fx(e,()=>{const d=$t(n[u],e);let f=!1;d.subscribe(st(r,p=>{s[u]=p,f||(f=!0,l--),l||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>dx(i,o):as));return t?s.pipe(xb(t)):s}function fx(n,e,t){n?Fi(t,n,e):e()}function Rb(...n){return function mB(){return xo(1)}()($t(n,Ka(n)))}function Ob(n){return new wt(e=>{Kn(n()).subscribe(e)})}function Lu(n,e){const t=Ze(n)?n:()=>n,r=i=>i.error(t());return new wt(e?i=>e.schedule(r,0,i):r)}function Pb(){return Pt((n,e)=>{let t=null;n._refCount++;const r=st(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class px extends wt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ga(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fn;const t=this.getSubject();e.add(this.source.subscribe(st(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fn.EMPTY)}return e}refCount(){return Pb()(this)}}function $s(n,e){return Pt((t,r)=>{let i=null,s=0,o=!1;const l=()=>o&&!i&&r.complete();t.subscribe(st(r,u=>{i?.unsubscribe();let d=0;const f=s++;Kn(n(u,f)).subscribe(i=st(r,p=>r.next(e?e(u,p,f,d++):p),()=>{i=null,l()}))},()=>{o=!0,l()}))})}function Vs(n){return n<=0?()=>Ni:Pt((e,t)=>{let r=0;e.subscribe(st(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function gx(...n){const e=Ka(n);return Pt((t,r)=>{(e?Rb(n,t,e):Rb(n,t)).subscribe(r)})}function K_(n){return Pt((e,t)=>{let r=!1;e.subscribe(st(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mx(n=_B){return Pt((e,t)=>{let r=!1;e.subscribe(st(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function _B(){return new Ef}function xa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cr((i,s)=>n(i,s,r)):as,Vs(1),t?K_(e):mx(()=>new Ef))}function ar(n,e,t){const r=Ze(n)||e||t?{next:n,error:e,complete:t}:n;return r?Pt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let l=!0;i.subscribe(st(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;l=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;l=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;l&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):as}function vo(n){return Pt((e,t)=>{let s,r=null,i=!1;r=e.subscribe(st(t,void 0,void 0,o=>{s=Kn(n(o,vo(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function yB(n,e,t,r,i){return(s,o)=>{let l=t,u=e,d=0;s.subscribe(st(o,f=>{const p=d++;u=l?n(u,f,p):(l=!0,f),r&&o.next(u)},i&&(()=>{l&&o.next(u),o.complete()})))}}function _x(n,e){return Pt(yB(n,e,arguments.length>=2,!0))}function kb(n){return n<=0?()=>Ni:Pt((e,t)=>{let r=[];e.subscribe(st(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function yx(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cr((i,s)=>n(i,s,r)):as,kb(1),t?K_(e):mx(()=>new Ef))}function Fb(n){return Pt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Le="primary",xf=Symbol("RouteTitle");class CB{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function $u(n){return new CB(n)}function bB(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],l=n[s];if(o.startsWith(":"))i[o.substring(1)]=l;else if(o!==l.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Bs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!vx(n[i],e[i]))return!1;return!0}function vx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function wx(n){return Array.prototype.concat.apply([],n)}function Cx(n){return n.length>0?n[n.length-1]:null}function zn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ra(n){return s0(n)?n:rf(n)?$t(Promise.resolve(n)):ae(n)}const SB={exact:function Dx(n,e,t){if(!jl(n.segments,e.segments)||!Y_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Dx(n.children[r],e.children[r],t))return!1;return!0},subset:Sx},bx={exact:function TB(n,e){return Bs(n,e)},subset:function AB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vx(n[t],e[t]))},ignored:()=>!0};function Ex(n,e,t){return SB[t.paths](n.root,e.root,t.matrixParams)&&bx[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Sx(n,e,t){return Tx(n,e,e.segments,t)}function Tx(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!jl(i,t)||e.hasChildren()||!Y_(i,t,r))}if(n.segments.length===t.length){if(!jl(n.segments,t)||!Y_(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Sx(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(jl(n.segments,i)&&Y_(n.segments,i,r)&&n.children[Le])&&Tx(n.children[Le],e,s,r)}}function Y_(n,e,t){return e.every((r,i)=>bx[t](n[i].parameters,r.parameters))}class Ul{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$u(this.queryParams)),this._queryParamMap}toString(){return xB.serialize(this)}}class Ve{constructor(e,t){this.segments=e,this.children=t,this.parent=null,zn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Z_(this)}}class Rf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=$u(this.parameters)),this._parameterMap}toString(){return xx(this)}}function jl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ax=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:function(){return new Lb},providedIn:"root"}),n})();class Lb{parse(e){const t=new VB(e);return new Ul(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Of(e.root,!0)}`,r=function PB(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Q_(t)}=${Q_(i)}`).join("&"):`${Q_(t)}=${Q_(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function RB(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const xB=new Lb;function Z_(n){return n.segments.map(e=>xx(e)).join("/")}function Of(n,e){if(!n.hasChildren())return Z_(n);if(e){const t=n.children[Le]?Of(n.children[Le],!1):"",r=[];return zn(n.children,(i,s)=>{s!==Le&&r.push(`${s}:${Of(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function MB(n,e){let t=[];return zn(n.children,(r,i)=>{i===Le&&(t=t.concat(e(r,i)))}),zn(n.children,(r,i)=>{i!==Le&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Le?[Of(n.children[Le],!1)]:[`${i}:${Of(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Le]?`${Z_(n)}/${t[0]}`:`${Z_(n)}/(${t.join("//")})`}}function Ix(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Q_(n){return Ix(n).replace(/%3B/gi,";")}function $b(n){return Ix(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function X_(n){return decodeURIComponent(n)}function Mx(n){return X_(n.replace(/\+/g,"%20"))}function xx(n){return`${$b(n.path)}${function OB(n){return Object.keys(n).map(e=>`;${$b(e)}=${$b(n[e])}`).join("")}(n.parameters)}`}const kB=/^[^\/()?;=#]+/;function J_(n){const e=n.match(kB);return e?e[0]:""}const FB=/^[^=?&#]+/,LB=/^[^&#]+/;class VB{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ve([],{}):new Ve([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Le]=new Ve(e,t)),r}parseSegment(){const e=J_(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new Rf(X_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=J_(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=J_(this.remaining);i&&(r=i,this.capture(r))}e[X_(t)]=X_(r)}parseQueryParam(e){const t=function NB(n){const e=n.match(FB);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function $B(n){const e=n.match(LB);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=Mx(t),s=Mx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=J_(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new U(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Le);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Le]:new Ve([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}}function Vb(n){return n.segments.length>0?new Ve([],{[Le]:n}):n}function ey(n){const e={};for(const r of Object.keys(n.children)){const s=ey(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function BB(n){if(1===n.numberOfChildren&&n.children[Le]){const e=n.children[Le];return new Ve(n.segments.concat(e.segments),e.children)}return n}(new Ve(n.segments,e))}function ql(n){return n instanceof Ul}function jB(n,e,t,r,i){if(0===t.length)return Vu(e.root,e.root,e.root,r,i);const s=function Px(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ox(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return zn(s.outlets,(u,d)=>{l[d]="string"==typeof u?u.split("/"):u}),[...i,{outlets:l}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((l,u)=>{0==u&&"."===l||(0==u&&""===l?t=!0:".."===l?e++:""!=l&&i.push(l))}),i):[...i,s]},[]);return new Ox(t,e,r)}(t);return s.toRoot()?Vu(e.root,e.root,new Ve([],{}),r,i):function o(u){const d=function zB(n,e,t,r){if(n.isAbsolute)return new Bu(e.root,!0,0);if(-1===r)return new Bu(t,t===e.root,0);return function kx(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new Bu(r,!1,i-s)}(t,r+(Pf(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,u),f=d.processChildren?Ff(d.segmentGroup,d.index,s.commands):Hb(d.segmentGroup,d.index,s.commands);return Vu(e.root,d.segmentGroup,f,r,i)}(n.snapshot?._lastPathIndex)}function Pf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function kf(n){return"object"==typeof n&&null!=n&&n.outlets}function Vu(n,e,t,r,i){let o,s={};r&&zn(r,(u,d)=>{s[d]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`}),o=n===e?t:Rx(n,e,t);const l=Vb(ey(o));return new Ul(l,s,i)}function Rx(n,e,t){const r={};return zn(n.children,(i,s)=>{r[s]=i===e?t:Rx(i,e,t)}),new Ve(n.segments,r)}class Ox{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Pf(r[0]))throw new U(4003,!1);const i=r.find(kf);if(i&&i!==Cx(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Hb(n,e,t){if(n||(n=new Ve([],{})),0===n.segments.length&&n.hasChildren())return Ff(n,e,t);const r=function WB(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],l=t[r];if(kf(l))break;const u=`${l}`,d=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!Nx(u,d,o))return s;r+=2}else{if(!Nx(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Ve(n.segments.slice(0,r.pathIndex),{});return s.children[Le]=new Ve(n.segments.slice(r.pathIndex),n.children),Ff(s,0,i)}return r.match&&0===i.length?new Ve(n.segments,{}):r.match&&!n.hasChildren()?Ub(n,e,t):r.match?Ff(n,0,i):Ub(n,e,t)}function Ff(n,e,t){if(0===t.length)return new Ve(n.segments,{});{const r=function GB(n){return kf(n[0])?n[0].outlets:{[Le]:n}}(t),i={};return zn(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=Hb(n.children[o],e,s))}),zn(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new Ve(n.segments,i)}}function Ub(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(kf(s)){const u=KB(s.outlets);return new Ve(r,u)}if(0===i&&Pf(t[0])){r.push(new Rf(n.segments[e].path,Fx(t[0]))),i++;continue}const o=kf(s)?s.outlets[Le]:`${s}`,l=i<t.length-1?t[i+1]:null;o&&l&&Pf(l)?(r.push(new Rf(o,Fx(l))),i+=2):(r.push(new Rf(o,{})),i++)}return new Ve(r,{})}function KB(n){const e={};return zn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ub(new Ve([],{}),0,t))}),e}function Fx(n){const e={};return zn(n,(t,r)=>e[r]=`${t}`),e}function Nx(n,e,t){return n==t.path&&Bs(e,t.parameters)}class wo{constructor(e,t){this.id=e,this.url=t}}class ty extends wo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zl extends wo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ny extends wo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Lx extends wo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class YB extends wo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZB extends wo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QB extends wo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class XB extends wo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JB extends wo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eH{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class tH{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nH{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rH{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iH{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sH{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $x{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Vx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=jb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=qb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qb(e,this._root).map(t=>t.value)}}function jb(n,e){if(n===e.value)return e;for(const t of e.children){const r=jb(n,t);if(r)return r}return null}function qb(n,e){if(n===e.value)return[e];for(const t of e.children){const r=qb(n,t);if(r.length)return r.unshift(e),r}return[]}class Co{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Hu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Bx extends Vx{constructor(e,t){super(e),this.snapshot=t,zb(this,e)}toString(){return this.snapshot.toString()}}function Hx(n,e){const t=function aH(n,e){const o=new ry([],{},{},"",{},Le,e,null,n.root,-1,{});return new jx("",new Co(o,[]))}(n,e),r=new ei([new Rf("",{})]),i=new ei({}),s=new ei({}),o=new ei({}),l=new ei(""),u=new Hs(r,i,o,l,s,Le,e,t.root);return u.snapshot=t.root,new Bx(new Co(u,[]),t)}class Hs{constructor(e,t,r,i,s,o,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=l,this.title=this.data?.pipe(Fe(d=>d[xf]))??ae(void 0),this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Fe(e=>$u(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Fe(e=>$u(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ux(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function lH(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ry{constructor(e,t,r,i,s,o,l,u,d,f,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=l,this.title=this.data?.[xf],this.routeConfig=u,this._urlSegment=d,this._lastPathIndex=f,this._correctedLastPathIndex=y??f,this._resolve=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$u(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$u(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jx extends Vx{constructor(e,t){super(t),this.url=e,zb(this,t)}toString(){return qx(this._root)}}function zb(n,e){e.value._routerState=n,e.children.forEach(t=>zb(n,t))}function qx(n){const e=n.children.length>0?` { ${n.children.map(qx).join(", ")} } `:"";return`${n.value}${e}`}function Gb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Bs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Bs(e.params,t.params)||n.params.next(t.params),function EB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Bs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Bs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Wb(n,e){const t=Bs(n.params,e.params)&&function IB(n,e){return jl(n,e)&&n.every((t,r)=>Bs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Wb(n.parent,e.parent))}function Nf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function uH(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Nf(n,r,i);return Nf(n,r)})}(n,e,t);return new Co(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(l=>Nf(n,l)),o}}const r=function dH(n){return new Hs(new ei(n.url),new ei(n.params),new ei(n.queryParams),new ei(n.fragment),new ei(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Nf(n,s));return new Co(r,i)}}const Kb="ngNavigationCancelingError";function zx(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ql(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Gx(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Gx(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Kb]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Wx(n){return Kx(n)&&ql(n.url)}function Kx(n){return n&&n[Kb]}class hH{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Lf,this.attachRef=null}}let Lf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hH,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iy=!1;let Yb=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.name=i||Le,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,iy);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,iy);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,iy);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new U(4013,iy);this._activatedRoute=t;const i=this.location,o=t._futureSnapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new fH(t,l,i.injector);if(r&&function pH(n){return!!n.resolveComponentFactory}(r)){const d=r.resolveComponentFactory(o);this.activated=i.createComponent(d,i.length,u)}else this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(F(Lf),F(bi),function eo(n){return function Yv(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Ic(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(le(),n)}("name"),F(Ca),F(kr))},n.\u0275dir=ie({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class fH{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Hs?this.route:e===Lf?this.childContexts:this.parent.get(e,t)}}let Zb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Fn({type:n,selectors:[["ng-component"]],standalone:!0,features:[IA],decls:1,vars:0,template:function(t,r){1&t&&Wt(0,"router-outlet")},dependencies:[Yb],encapsulation:2}),n})();function Yx(n,e){return n.providers&&!n._injector&&(n._injector=l_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Xb(n){const e=n.children&&n.children.map(Xb),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Le&&(t.component=Zb),t}function Ti(n){return n.outlet||Le}function Zx(n,e){const t=n.filter(r=>Ti(r)===e);return t.push(...n.filter(r=>Ti(r)!==e)),t}function $f(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class vH{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Hu(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),zn(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Hu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Hu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Hu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new sH(s.value.snapshot))}),e.children.length&&this.forwardEvent(new rH(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Gb(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(l.contexts),o.attachRef=l.componentRef,o.route=l.route.value,o.outlet&&o.outlet.attach(l.componentRef,l.route.value),Gb(l.route.value),this.activateChildRoutes(e,null,o.children)}else{const l=$f(i.snapshot),u=l?.get(lo)??null;o.attachRef=null,o.route=i,o.resolver=u,o.injector=l,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Qx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class sy{constructor(e,t){this.component=e,this.route=t}}function wH(n,e,t){const r=n._root;return Vf(r,e?e._root:null,t,[r.value])}function Uu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Ct(n){return null!==gc(n)}(n)?e.get(n):n:r}function Vf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Hu(e);return n.children.forEach(o=>{(function bH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function EH(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!jl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!jl(n.url,e.url)||!Bs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wb(n,e)||!Bs(n.queryParams,e.queryParams);default:return!Wb(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Qx(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Vf(n,e,s.component?l?l.children:null:t,r,i),u&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new sy(l.outlet.component,o))}else o&&Bf(e,l,i),i.canActivateChecks.push(new Qx(r)),Vf(n,null,s.component?l?l.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),zn(s,(o,l)=>Bf(o,t.getContext(l),i)),i}function Bf(n,e,t){const r=Hu(n),i=n.value;zn(r,(s,o)=>{Bf(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new sy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Hf(n){return"function"==typeof n}function Jb(n){return n instanceof Ef||"EmptyError"===n?.name}const oy=Symbol("INITIAL_VALUE");function ju(){return $s(n=>hx(n.map(e=>e.pipe(Vs(1),gx(oy)))).pipe(Fe(e=>{for(const t of e)if(!0!==t){if(t===oy)return oy;if(!1===t||t instanceof Ul)return t}return!0}),Cr(e=>e!==oy),Vs(1)))}function Xx(n){return function Ws(...n){return ki(n)}(ar(e=>{if(ql(e))throw zx(0,e)}),Fe(e=>!0===e))}const eE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Jx(n,e,t,r,i){const s=tE(n,e,t);return s.matched?function BH(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ae(i.map(o=>{const l=Uu(o,n);return Ra(function MH(n){return n&&Hf(n.canMatch)}(l)?l.canMatch(e,t):n.runInContext(()=>l(e,t)))})).pipe(ju(),Xx()):ae(!0)}(r=Yx(e,r),e,t).pipe(Fe(o=>!0===o?s:{...eE})):ae(s)}function tE(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...eE}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||bB)(t,n,e);if(!i)return{...eE};const s={};zn(i.posParams,(l,u)=>{s[u]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function ay(n,e,t,r,i="corrected"){if(t.length>0&&function jH(n,e,t){return t.some(r=>ly(n,e,r)&&Ti(r)!==Le)}(n,t,r)){const o=new Ve(e,function UH(n,e,t,r){const i={};i[Le]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Ti(s)!==Le){const o=new Ve([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[Ti(s)]=o}return i}(n,e,r,new Ve(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function qH(n,e,t){return t.some(r=>ly(n,e,r))}(n,t,r)){const o=new Ve(n.segments,function HH(n,e,t,r,i,s){const o={};for(const l of r)if(ly(n,t,l)&&!i[Ti(l)]){const u=new Ve([],{});u._sourceSegment=n,u._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Ti(l)]=u}return{...i,...o}}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Ve(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function ly(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function e1(n,e,t,r){return!!(Ti(n)===r||r!==Le&&ly(e,t,n))&&("**"===n.path||tE(e,n,t).matched)}function t1(n,e,t){return 0===e.length&&!n.children[t]}const cy=!1;class uy{constructor(e){this.segmentGroup=e||null}}class n1{constructor(e){this.urlTree=e}}function Uf(n){return Lu(new uy(n))}function r1(n){return Lu(new n1(n))}class KH{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=ay(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ve(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Le).pipe(Fe(s=>this.createUrlTree(ey(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vo(s=>{if(s instanceof n1)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof uy?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Le).pipe(Fe(i=>this.createUrlTree(ey(i),e.queryParams,e.fragment))).pipe(vo(i=>{throw i instanceof uy?this.noMatchError(i):i}))}noMatchError(e){return new U(4002,cy)}createUrlTree(e,t,r){const i=Vb(e);return new Ul(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(Fe(s=>new Ve([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return $t(i).pipe(Ea(s=>{const o=r.children[s],l=Zx(t,s);return this.expandSegmentGroup(e,l,o,s).pipe(Fe(u=>({segment:u,outlet:s})))}),_x((s,o)=>(s[o.outlet]=o.segment,s),{}),yx())}expandSegment(e,t,r,i,s,o){return $t(r).pipe(Ea(l=>this.expandSegmentAgainstRoute(e,t,r,l,i,s,o).pipe(vo(d=>{if(d instanceof uy)return ae(null);throw d}))),xa(l=>!!l),vo((l,u)=>{if(Jb(l))return t1(t,i,s)?ae(new Ve([],{})):Uf(t);throw l}))}expandSegmentAgainstRoute(e,t,r,i,s,o,l){return e1(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):Uf(t):Uf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?r1(s):this.lineralizeSegments(r,s).pipe(nn(o=>{const l=new Ve(o,{});return this.expandSegment(e,l,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:l,consumedSegments:u,remainingSegments:d,positionalParamSegments:f}=tE(t,i,s);if(!l)return Uf(t);const p=this.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?r1(p):this.lineralizeSegments(i,p).pipe(nn(y=>this.expandSegment(e,t,r,y.concat(d),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=Yx(r,e),r.loadChildren?(r._loadedRoutes?ae({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(Fe(l=>(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,new Ve(i,{})))):ae(new Ve(i,{}))):Jx(t,r,i,e).pipe($s(({matched:o,consumedSegments:l,remainingSegments:u})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe(nn(f=>{const p=f.injector??e,y=f.routes,{segmentGroup:v,slicedSegments:b}=ay(t,l,u,y),I=new Ve(v.segments,v.children);if(0===b.length&&I.hasChildren())return this.expandChildren(p,y,I).pipe(Fe(C=>new Ve(l,C)));if(0===y.length&&0===b.length)return ae(new Ve(l,{}));const L=Ti(r)===s;return this.expandSegment(p,I,y,b,L?Le:s,!0).pipe(Fe(G=>new Ve(l.concat(G.segments),G.children)))})):Uf(t)))}getChildConfig(e,t,r){return t.children?ae({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ae({routes:t._loadedRoutes,injector:t._loadedInjector}):function VH(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ae(!0):ae(i.map(o=>{const l=Uu(o,n);return Ra(function SH(n){return n&&Hf(n.canLoad)}(l)?l.canLoad(e,t):n.runInContext(()=>l(e,t)))})).pipe(ju(),Xx())}(e,t,r).pipe(nn(i=>i?this.configLoader.loadChildren(e,t).pipe(ar(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function GH(n){return Lu(Gx(cy,3))}())):ae({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ae(r);if(i.numberOfChildren>1||!i.children[Le])return Lu(new U(4e3,cy));i=i.children[Le]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ul(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return zn(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const l=i.substring(1);r[s]=t[l]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return zn(t.children,(l,u)=>{o[u]=this.createSegmentGroup(e,l,r,i)}),new Ve(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new U(4001,cy);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class ZH{}class JH{constructor(e,t,r,i,s,o,l,u){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=l,this.urlSerializer=u}recognize(){const e=ay(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Le).pipe(Fe(t=>{if(null===t)return null;const r=new ry([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Le,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Co(r,t),s=new jx(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=Ux(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return $t(Object.keys(r.children)).pipe(Ea(i=>{const s=r.children[i],o=Zx(t,i);return this.processSegmentGroup(e,o,s,i)}),_x((i,s)=>i&&s?(i.push(...s),i):null),function vB(n,e=!1){return Pt((t,r)=>{let i=0;t.subscribe(st(r,s=>{const o=n(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),K_(null),yx(),Fe(i=>{if(null===i)return null;const s=s1(i);return function eU(n){n.sort((e,t)=>e.value.outlet===Le?-1:t.value.outlet===Le?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return $t(t).pipe(Ea(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),xa(o=>!!o),vo(o=>{if(Jb(o))return t1(r,i,s)?ae([]):ae(null);throw o}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!e1(t,r,i,s))return ae(null);let o;if("**"===t.path){const l=i.length>0?Cx(i).parameters:{},u=a1(r)+i.length;o=ae({snapshot:new ry(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,c1(t),Ti(t),t.component??t._loadedComponent??null,t,o1(r),u,u1(t),u),consumedSegments:[],remainingSegments:[]})}else o=Jx(r,t,i,e).pipe(Fe(({matched:l,consumedSegments:u,remainingSegments:d,parameters:f})=>{if(!l)return null;const p=a1(r)+u.length;return{snapshot:new ry(u,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,c1(t),Ti(t),t.component??t._loadedComponent??null,t,o1(r),p,u1(t),p),consumedSegments:u,remainingSegments:d}}));return o.pipe($s(l=>{if(null===l)return ae(null);const{snapshot:u,consumedSegments:d,remainingSegments:f}=l;e=t._injector??e;const p=t._loadedInjector??e,y=function tU(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:v,slicedSegments:b}=ay(r,d,f,y.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);if(0===b.length&&v.hasChildren())return this.processChildren(p,y,v).pipe(Fe(L=>null===L?null:[new Co(u,L)]));if(0===y.length&&0===b.length)return ae([new Co(u,[])]);const I=Ti(t)===s;return this.processSegment(p,y,v,b,I?Le:s).pipe(Fe(L=>null===L?null:[new Co(u,L)]))}))}}function nU(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function s1(n){const e=[],t=new Set;for(const r of n){if(!nU(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=s1(r.children);e.push(new Co(r.value,i))}return e.filter(r=>!t.has(r))}function o1(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function a1(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function c1(n){return n.data||{}}function u1(n){return n.resolve||{}}function d1(n){return"string"==typeof n.title||null===n.title}function nE(n){return $s(e=>{const t=n(e);return t?$t(t).pipe(Fe(()=>e)):ae(e)})}let h1=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Le);return r}getResolvedTitleForRoute(t){return t.data[xf]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:function(){return St(f1)},providedIn:"root"}),n})(),f1=(()=>{class n extends h1{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(k(FM))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uU{}class hU extends class dU{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const hy=new X("",{providedIn:"root",factory:()=>({})}),rE=new X("ROUTES");let iE=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ae(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ra(t.loadComponent()).pipe(ar(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Fb(()=>{this.componentLoaders.delete(t)})),i=new px(r,()=>new gt).pipe(Pb());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ae({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Fe(l=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,d,f=!1;Array.isArray(l)?d=l:(u=l.create(t).injector,d=wx(u.get(rE,[],ue.Self|ue.Optional)));return{routes:d.map(Xb),injector:u}}),Fb(()=>{this.childrenLoaders.delete(r)})),o=new px(s,()=>new gt).pipe(Pb());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(t){return Ra(t()).pipe(nn(r=>r instanceof TA||Array.isArray(r)?ae(r):$t(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(k(an),k(P0))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class pU{}class gU{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function mU(n){throw n}function _U(n,e,t){return e.parse("/")}const yU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function g1(){const n=St(Ax),e=St(Lf),t=St(_f),r=St(an),i=St(P0),s=St(rE,{optional:!0})??[],o=St(hy,{optional:!0})??{},l=St(f1),u=St(h1,{optional:!0}),d=St(pU,{optional:!0}),f=St(uU,{optional:!0}),p=new Ht(null,n,e,t,r,i,wx(s));return d&&(p.urlHandlingStrategy=d),f&&(p.routeReuseStrategy=f),p.titleStrategy=u??l,function wU(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,p),p}let Ht=(()=>{class n{constructor(t,r,i,s,o,l,u){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new gt,this.errorHandler=mU,this.malformedUriErrorHandler=_U,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ae(void 0),this.urlHandlingStrategy=new gU,this.routeReuseStrategy=new hU,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(iE),this.configLoader.onLoadEndListener=y=>this.triggerEvent(new tH(y)),this.configLoader.onLoadStartListener=y=>this.triggerEvent(new eH(y)),this.ngModule=o.get(Rl),this.console=o.get(rL);const p=o.get(We);this.isNgZoneEnabled=p instanceof We&&We.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=function DB(){return new Ul(new Ve([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Hx(this.currentUrlTree,this.rootComponentType),this.transitions=new ei({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Cr(i=>0!==i.id),Fe(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),$s(i=>{let s=!1,o=!1;return ae(i).pipe(ar(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),$s(l=>{const u=this.browserUrlTree.toString(),d=!this.navigated||l.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||d)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return m1(l.source)&&(this.browserUrlTree=l.extractedUrl),ae(l).pipe($s(p=>{const y=this.transitions.getValue();return r.next(new ty(p.id,this.serializeUrl(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions.getValue()?Ni:Promise.resolve(p)}),function YH(n,e,t,r){return $s(i=>function WH(n,e,t,r,i){return new KH(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(Fe(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ar(p=>{this.currentNavigation={...this.currentNavigation,finalUrl:p.urlAfterRedirects},i.urlAfterRedirects=p.urlAfterRedirects}),function iU(n,e,t,r,i,s){return nn(o=>function XH(n,e,t,r,i,s,o="emptyOnly",l="legacy"){return new JH(n,e,t,r,i,o,l,s).recognize().pipe($s(u=>null===u?function QH(n){return new wt(e=>e.error(n))}(new ZH):ae(u)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i,s).pipe(Fe(l=>({...o,targetSnapshot:l}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),ar(p=>{if(i.targetSnapshot=p.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!p.extras.skipLocationChange){const v=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl);this.setBrowserUrl(v,p)}this.browserUrlTree=p.urlAfterRedirects}const y=new YB(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);r.next(y)}));if(d&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:y,extractedUrl:v,source:b,restoredState:I,extras:L}=l,V=new ty(y,this.serializeUrl(v),b,I);r.next(V);const G=Hx(v,this.rootComponentType).snapshot;return ae(i={...l,targetSnapshot:G,urlAfterRedirects:v,extras:{...L,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=l.rawUrl,l.resolve(null),Ni}),ar(l=>{const u=new ZB(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}),Fe(l=>i={...l,guards:wH(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function RH(n,e){return nn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ae({...t,guardsResult:!0}):function OH(n,e,t,r){return $t(n).pipe(nn(i=>function $H(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ae(s.map(l=>{const u=$f(e)??i,d=Uu(l,u);return Ra(function IH(n){return n&&Hf(n.canDeactivate)}(d)?d.canDeactivate(n,e,t,r):u.runInContext(()=>d(n,e,t,r))).pipe(xa())})).pipe(ju()):ae(!0)}(i.component,i.route,t,e,r)),xa(i=>!0!==i,!0))}(o,r,i,n).pipe(nn(l=>l&&function DH(n){return"boolean"==typeof n}(l)?function PH(n,e,t,r){return $t(e).pipe(Ea(i=>Rb(function FH(n,e){return null!==n&&e&&e(new nH(n)),ae(!0)}(i.route.parent,r),function kH(n,e){return null!==n&&e&&e(new iH(n)),ae(!0)}(i.route,r),function LH(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function CH(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Ob(()=>ae(o.guards.map(u=>{const d=$f(o.node)??t,f=Uu(u,d);return Ra(function AH(n){return n&&Hf(n.canActivateChild)}(f)?f.canActivateChild(r,n):d.runInContext(()=>f(r,n))).pipe(xa())})).pipe(ju())));return ae(s).pipe(ju())}(n,i.path,t),function NH(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ae(!0);const i=r.map(s=>Ob(()=>{const o=$f(e)??t,l=Uu(s,o);return Ra(function TH(n){return n&&Hf(n.canActivate)}(l)?l.canActivate(e,n):o.runInContext(()=>l(e,n))).pipe(xa())}));return ae(i).pipe(ju())}(n,i.route,t))),xa(i=>!0!==i,!0))}(r,s,n,e):ae(l)),Fe(l=>({...t,guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),ar(l=>{if(i.guardsResult=l.guardsResult,ql(l.guardsResult))throw zx(0,l.guardsResult);const u=new QB(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(u)}),Cr(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),nE(l=>{if(l.guards.canActivateChecks.length)return ae(l).pipe(ar(u=>{const d=new XB(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(d)}),$s(u=>{let d=!1;return ae(u).pipe(function sU(n,e){return nn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ae(t);let s=0;return $t(i).pipe(Ea(o=>function oU(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!d1(i)&&(s[xf]=i.title),function aU(n,e,t,r){const i=function lU(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ae({});const s={};return $t(i).pipe(nn(o=>function cU(n,e,t,r){const i=$f(e)??r,s=Uu(n,i);return Ra(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(xa(),ar(l=>{s[o]=l}))),kb(1),function wB(n){return Fe(()=>n)}(s),vo(o=>Jb(o)?Ni:Lu(o)))}(s,n,e,r).pipe(Fe(o=>(n._resolvedData=o,n.data=Ux(n,t).resolve,i&&d1(i)&&(n.data[xf]=i.title),null)))}(o.route,r,n,e)),ar(()=>s++),kb(1),nn(o=>s===i.length?ae(t):Ni))})}(this.paramsInheritanceStrategy,this.ngModule.injector),ar({next:()=>d=!0,complete:()=>{d||(this.restoreHistory(u),this.cancelNavigationTransition(u,"",2))}}))}),ar(u=>{const d=new JB(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(d)}))}),nE(l=>{const u=d=>{const f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(ar(p=>{d.component=p}),Fe(()=>{})));for(const p of d.children)f.push(...u(p));return f};return hx(u(l.targetSnapshot.root)).pipe(K_(),Vs(1))}),nE(()=>this.afterPreactivation()),Fe(l=>{const u=function cH(n,e,t){const r=Nf(n,e._root,t?t._root:void 0);return new Bx(r,e)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return i={...l,targetRouterState:u}}),ar(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>Fe(r=>(new vH(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),ar({next(){s=!0},complete(){s=!0}}),Fb(()=>{s||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),vo(l=>{if(o=!0,Kx(l)){Wx(l)||(this.navigated=!0,this.restoreHistory(i,!0));const u=new ny(i.id,this.serializeUrl(i.extractedUrl),l.message,l.cancellationCode);if(r.next(u),Wx(l)){const d=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),f={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||m1(i.source)};this.scheduleNavigation(d,"imperative",null,f,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const u=new Lx(i.id,this.serializeUrl(i.extractedUrl),l,i.targetSnapshot??void 0);r.next(u);try{i.resolve(this.errorHandler(l))}catch(d){i.reject(d)}}return Ni}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Xb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:l,preserveFragment:u}=r,d=i||this.routerState.root,f=u?this.currentUrlTree.fragment:o;let p=null;switch(l){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}return null!==p&&(p=this.removeEmptyProps(p)),jB(d,this.currentUrlTree,t,p,f??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ql(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function CU(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new U(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...yU}:!1===r?{...vU}:r,ql(t))return Ex(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Ex(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new zl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let l,u,d;o?(l=o.resolve,u=o.reject,d=o.promise):d=new Promise((y,v)=>{l=y,u=v});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),p=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:l,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(y=>Promise.reject(y))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new ny(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){cu()},n.\u0275prov=K({token:n,factory:function(){return g1()},providedIn:"root"}),n})();function m1(n){return"imperative"!==n}class _1{}let DU=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Cr(t=>t instanceof zl),Ea(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=l_(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,l=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(l,s.children??s._loadedRoutes))}return $t(i).pipe(xo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ae(null);const s=i.pipe(nn(o=>null===o?ae(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?$t([s,this.loader.loadComponent(r)]).pipe(xo()):s})}}return n.\u0275fac=function(t){return new(t||n)(k(Ht),k(P0),k(kr),k(_1),k(iE))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aE=new X("");let y1=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ty?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $x&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new $x(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){cu()},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();function qu(n,e){return{\u0275kind:n,\u0275providers:e}}function lE(n){return[{provide:rE,multi:!0,useValue:n}]}function w1(){const n=St(an);return e=>{const t=n.get(Pu);if(e!==t.components[0])return;const r=n.get(Ht),i=n.get(C1);1===n.get(cE)&&r.initialNavigation(),n.get(b1,null,ue.Optional)?.setUpPreloading(),n.get(aE,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const C1=new X("",{factory:()=>new gt}),cE=new X("",{providedIn:"root",factory:()=>1});const b1=new X("");function IU(n){return qu(0,[{provide:b1,useExisting:DU},{provide:_1,useExisting:n}])}const E1=new X("ROUTER_FORROOT_GUARD"),MU=[_f,{provide:Ax,useClass:Lb},{provide:Ht,useFactory:g1},Lf,{provide:Hs,useFactory:function v1(n){return n.routerState.root},deps:[Ht]},iE];function xU(){return new bI("Router",Ht)}let D1=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[MU,[],lE(t),{provide:E1,useFactory:kU,deps:[[Ht,new la,new gl]]},{provide:hy,useValue:r||{}},r?.useHash?{provide:Ps,useClass:zL}:{provide:Ps,useClass:WI},{provide:aE,useFactory:()=>{const n=St(Ht),e=St(c$),t=St(hy);return t.scrollOffset&&e.setOffset(t.scrollOffset),new y1(n,e,t)}},r?.preloadingStrategy?IU(r.preloadingStrategy).\u0275providers:[],{provide:bI,multi:!0,useFactory:xU},r?.initialNavigation?FU(r):[],[{provide:S1,useFactory:w1},{provide:gI,multi:!0,useExisting:S1}]]}}static forChild(t){return{ngModule:n,providers:[lE(t)]}}}return n.\u0275fac=function(t){return new(t||n)(k(E1,8))},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({imports:[Zb]}),n})();function kU(n){return"guarded"}function FU(n){return["disabled"===n.initialNavigation?qu(3,[{provide:h_,multi:!0,useFactory:()=>{const e=St(Ht);return()=>{e.setUpLocationChangeListener()}}},{provide:cE,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?qu(2,[{provide:cE,useValue:0},{provide:h_,multi:!0,deps:[an],useFactory:e=>{const t=e.get(jL,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const o=e.get(Ht),l=e.get(C1);(function i(s){e.get(Ht).events.pipe(Cr(l=>l instanceof zl||l instanceof ny||l instanceof Lx),Fe(l=>l instanceof zl||l instanceof ny&&(0===l.code||1===l.code)&&null),Cr(l=>null!==l),Vs(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),o.afterPreactivation=()=>(s(!0),r||l.closed?ae(void 0):l),o.initialNavigation()}))}}]).\u0275providers:[]]}const S1=new X("");let my=(()=>{class n extends ku{constructor(t,r,i){super(r,t),this.http=t,this.env=r,this.cookie=i}setSession(t,r){this.cookie.setCookie("token",t,10),this.cookie.setCookie("session_id",r,10),this.cookie.deleteCookie("extension")}setExtension(t){this.cookie.setCookie("extension",JSON.stringify(t),10)}getToken(){return this.cookie.getCookie("token")}renewSession(){const t=this.cookie.getCookie("token"),r=this.cookie.getCookie("session_id");this.cookie.setCookie("token",t,10),this.cookie.setCookie("session_id",r,10)}}return n.\u0275fac=function(t){return new(t||n)(k(kl),k(si),k(Nl))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T1=(()=>{class n{constructor(t,r,i,s,o){this.env=t,this.extService=r,this.router=i,this.cookie=s,this.auth=o,this._initializeCompleted=new ei(!1),this.initializeCompleted=this._initializeCompleted.asObservable()}initialize(){var t=this;return E(function*(){yield Pl(t.extService.getExtensionInfo()).then(function(){var r=E(function*(i){if(Ma.isEmpty(i?.data))t.router.navigate(["call-ended"]);else{const s=t.cookie.getCookie("session_id");t.webPhoneConfig={extension_number:i.data.ext_number,extension_password:i.data.ext_pass,sessionID:s,cif:i.data.cif,phone:i.data.phone,sip_server:t.env.sip_server,sip_domain:t.env.sip_domain},t.auth.setExtension({session_id:s,ext_number:t.webPhoneConfig.extension_number,ext_pass:t.webPhoneConfig.extension_password,cif:t.webPhoneConfig.cif,phone:t.webPhoneConfig.phone}),yield t.registPortsip()}});return function(i){return r.apply(this,arguments)}}()).catch(r=>{t.router.navigate(["permission-required"])})})()}registPortsip(){var t=this;return E(function*(){if(!t.webPhoneConfig)throw new Error("config is not defined");const{extension_number:r,extension_password:i,sip_domain:s,sip_server:o}=t.webPhoneConfig,d={uri:Hl.makeURI(`sip:${r}@${s}`),transportOption:{stunServers:[{urls:"stun:stun.example.com"},{urls:"stun:stun1.example.com"}]},register:!0,authorizationUsername:r,authorizationPassword:i,transportOptions:{wsServers:o},logLevel:"error",displayName:r,iceServers:[{urls:"stun:stun.example.com"},{urls:"stun:stun1.example.com"}]};t.userAgent=new Hl(d),t.registerer=new oB(t.userAgent,{}),yield t.userAgent.start().catch(f=>{console.error(f)}),yield t.registerer.register({requestDelegate:{onAccept:f=>{},onReject:f=>{console.log("onReject",f)}}}).catch(f=>{console.error(f)}),t._initializeCompleted.next(!0)})()}}return n.\u0275fac=function(t){return new(t||n)(k(si),k(aB),k(Ht),k(Nl),k(my))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),A1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(F(Ki),F(Ft))},n.\u0275dir=ie({type:n}),n})(),Gl=(()=>{class n extends A1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=on(n)))(r||n)}}(),n.\u0275dir=ie({type:n,features:[qe]}),n})();const ns=new X("NgValueAccessor"),VU={provide:ns,useExisting:at(()=>_y),multi:!0},HU=new X("CompositionEventMode");let _y=(()=>{class n extends A1{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function BU(){const n=Os()?Os().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(F(Ki),F(Ft),F(HU,8))},n.\u0275dir=ie({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&Ge("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Tt([VU]),qe]}),n})();function Oa(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function M1(n){return null!=n&&"number"==typeof n.length}const Gn=new X("NgValidators"),Pa=new X("NgAsyncValidators"),jU=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class qU{static min(e){return function x1(n){return e=>{if(Oa(e.value)||Oa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function R1(n){return e=>{if(Oa(e.value)||Oa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function O1(n){return Oa(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function P1(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function k1(n){return Oa(n.value)||jU.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function F1(n){return e=>Oa(e.value)||!M1(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return N1(e)}static pattern(e){return function L1(n){if(!n)return yy;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Oa(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return j1(e)}static composeAsync(e){return q1(e)}}function N1(n){return e=>M1(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function yy(n){return null}function $1(n){return null!=n}function V1(n){return rf(n)?$t(n):n}function B1(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function H1(n,e){return e.map(t=>t(n))}function U1(n){return n.map(e=>function zU(n){return!n.validate}(e)?e:t=>e.validate(t))}function j1(n){if(!n)return null;const e=n.filter($1);return 0==e.length?null:function(t){return B1(H1(t,e))}}function uE(n){return null!=n?j1(U1(n)):null}function q1(n){if(!n)return null;const e=n.filter($1);return 0==e.length?null:function(t){return function LU(...n){const e=Ep(n),{args:t,keys:r}=ux(n),i=new wt(s=>{const{length:o}=t;if(!o)return void s.complete();const l=new Array(o);let u=o,d=o;for(let f=0;f<o;f++){let p=!1;Kn(t[f]).subscribe(st(s,y=>{p||(p=!0,d--),l[f]=y},()=>u--,void 0,()=>{(!u||!p)&&(d||s.next(r?dx(r,l):l),s.complete())}))}});return e?i.pipe(xb(e)):i}(H1(t,e).map(V1)).pipe(Fe(B1))}}function dE(n){return null!=n?q1(U1(n)):null}function z1(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function G1(n){return n._rawValidators}function W1(n){return n._rawAsyncValidators}function hE(n){return n?Array.isArray(n)?n:[n]:[]}function vy(n,e){return Array.isArray(n)?n.includes(e):n===e}function K1(n,e){const t=hE(e);return hE(n).forEach(i=>{vy(t,i)||t.push(i)}),t}function Y1(n,e){return hE(e).filter(t=>!vy(n,t))}class Z1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class br extends Z1{get formDirective(){return null}get path(){return null}}class ka extends Z1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Q1{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let X1=(()=>{class n extends Q1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(F(ka,2))},n.\u0275dir=ie({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&ma("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[qe]}),n})(),J1=(()=>{class n extends Q1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(F(br,10))},n.\u0275dir=ie({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&ma("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[qe]}),n})();const jf="VALID",Cy="INVALID",zu="PENDING",qf="DISABLED";function mE(n){return(by(n)?n.validators:n)||null}function tR(n){return Array.isArray(n)?uE(n):n||null}function _E(n,e){return(by(e)?e.asyncValidators:n)||null}function nR(n){return Array.isArray(n)?dE(n):n||null}function by(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function rR(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new U(1e3,"");if(!r[t])throw new U(1001,"")}function iR(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new U(1002,"")})}class yE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=tR(this._rawValidators),this._composedAsyncValidatorFn=nR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===jf}get invalid(){return this.status===Cy}get pending(){return this.status==zu}get disabled(){return this.status===qf}get enabled(){return this.status!==qf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=tR(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=nR(e)}addValidators(e){this.setValidators(K1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(K1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Y1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Y1(e,this._rawAsyncValidators))}hasValidator(e){return vy(this._rawValidators,e)}hasAsyncValidator(e){return vy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=zu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=qf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jf||this.status===zu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qf:jf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=zu,this._hasOwnPendingAsyncValidator=!0;const t=V1(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?qf:this.errors?Cy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zu)?zu:this._anyControlsHaveStatus(Cy)?Cy:jf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){by(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class vE extends yE{constructor(e,t,r){super(mE(t),_E(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){iR(this,0,e),Object.keys(e).forEach(r=>{rR(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function zf(n,e){wE(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function ej(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&sR(n,e)})}(n,e),function nj(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function tj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&sR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function JU(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Dy(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),function Ty(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=G1(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=W1(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return Sy(e._rawValidators,r),Sy(e._rawAsyncValidators,r),t}(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Sy(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wE(n,e){const t=G1(n);null!==e.validator?n.setValidators(z1(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=W1(n);null!==e.asyncValidator?n.setAsyncValidators(z1(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Sy(e._rawValidators,i),Sy(e._rawAsyncValidators,i)}function sR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const aj={provide:br,useExisting:at(()=>Ay)},Gf=(()=>Promise.resolve())();let Ay=(()=>{class n extends br{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new it,this.form=new vE({},uE(t),dE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Gf.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),zf(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Gf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Gf.then(()=>{const r=this._findContainer(t.path),i=new vE({});(function oR(n,e){wE(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Gf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Gf.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function lR(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(F(Gn,10),F(Pa,10))},n.\u0275dir=ie({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&Ge("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Tt([aj]),qe]}),n})();function cR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function uR(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const lj=class extends yE{constructor(e=null,t,r){super(mE(t),_E(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),by(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=uR(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){cR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){cR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){uR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let gR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ie({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),_R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({}),n})();const DE=new X("NgModelWithFormControlWarning"),mj={provide:ka,useExisting:at(()=>SE)};let SE=(()=>{class n extends ka{constructor(t,r,i,s){super(),this._ngModelWarningConfig=s,this.update=new it,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=function bE(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===_y?t=s:function sj(n){return Object.getPrototypeOf(n.constructor)===Gl}(s)?r=s:i=s}),i||r||t||null}(0,i)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&Dy(r,this,!1),zf(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}(function CE(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)})(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Dy(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(F(Gn,10),F(Pa,10),F(ns,10),F(DE,8))},n.\u0275dir=ie({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Tt([mj]),qe,gr]}),n})();let Wl=(()=>{class n{constructor(){this._validator=yy}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):yy,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ie({type:n,features:[gr]}),n})();const Pj={provide:Gn,useExisting:at(()=>PE),multi:!0};let PE=(()=>{class n extends Wl{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function DR(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>N1(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=on(n)))(r||n)}}(),n.\u0275dir=ie({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&_n("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Tt([Pj]),qe]}),n})(),RR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({imports:[_R]}),n})(),OR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({imports:[RR]}),n})(),Fj=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:DE,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({imports:[RR]}),n})();const Nj=class PR extends yE{constructor(e,t,r){super(mE(t),_E(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){iR(this,0,e),e.forEach((r,i)=>{rR(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}},Lj=["otpInputElement"];function $j(n,e){if(1&n){const t=As();se(0,"div",2)(1,"label")(2,"input",3,4),Ge("keyup",function(i){const o=kt(t).index;return Je(Dt().handleKeyUp(o,i.key))})("keyup.backspace",function(){const s=kt(t).index;return Je(Dt().handleDelete(s))})("keyup.arrowLeft",function(){const s=kt(t).index;return Je(Dt().stepBackward(s))})("keyup.arrowRight",function(){const s=kt(t).index;return Je(Dt().stepForward(s))})("focus",function(){const s=kt(t).index;return Je(Dt().handleFocus(s))}),oe()()()}if(2&n){const t=e.$implicit,r=e.index,i=Dt();Ye("ngClass",null==i.otpConfig.classList?null:i.otpConfig.classList.inputBox),Ne(1),_n("aria-label",i.ariaLabels[r]),Ne(1),Ye("id","ngx-otp-input-"+r)("formControl",t)("ngxOtpPattern",i.otpConfig.pattern)("type",i.otpConfig.isPasswordInput?"password":"text")("ngClass",(null==i.styles?null:i.styles.length)>0?i.styles[r]:null)}}var Kl=(()=>(function(n){n[n.DEFAULT=0]="DEFAULT",n[n.LEGACY=1]="LEGACY"}(Kl||(Kl={})),Kl))();let kR=(()=>{class n{init2DArray(t){return new Array(t).fill(new Array)}toArray(t){return Array.isArray(t)?t:[t]}addItemToAll(t,r){if(t?.length>0)return t.map(i=>i.concat(r))}removeItemFromAll(t,r){if(t?.length>0)return t.map(i=>i.filter(s=>!r.includes(s)))}addItemAtIndex(t,r,i){if(t?.length>0)return t[r]=t[r].concat(i),t}removeItemAtIndex(t,r,i){if(t?.length>0)return t[r]=t[r].filter(s=>!i.includes(s)),t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})(),Vj=(()=>{class n{constructor(){this.allowedKeys=["Backspace","ArrowLeft","ArrowRight","Escape","Tab"]}onKeyDown(t){this.allowedKeys.includes(t.key)||"KeyA"===t.code&&!0===t.ctrlKey||"KeyC"===t.code&&!0===t.ctrlKey||"KeyV"===t.code&&!0===t.ctrlKey||"KeyX"===t.code&&!0===t.ctrlKey||"KeyA"===t.code&&!0===t.metaKey||"KeyC"===t.code&&!0===t.metaKey||"KeyV"===t.code&&!0===t.metaKey||"KeyX"===t.code&&!0===t.metaKey||this.pattern.test(t.key)||t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ie({type:n,selectors:[["","ngxOtpPattern",""]],hostBindings:function(t,r){1&t&&Ge("keydown",function(s){return r.onKeyDown(s)})},inputs:{pattern:["ngxOtpPattern","pattern"]}}),n})(),Bj=(()=>{class n{constructor(t,r){this.ngxOtpInputService=t,this.ref=r,this.ngxOtpArray=new Nj([]),this.ariaLabels=[],this.styles=[],this.otpConfig={otpLength:6,autofocus:!0,autoblur:!0,behavior:Kl.DEFAULT},this.defaultPattern=/^\d+$/,this.DEFAULT_ARIA_LABEL="One time password input",this.isNgxOtpArrayDisabled=!1,this.focusedInputHasValue=!1,this.otpChange=new it,this.fill=new it}onPaste(t){t.preventDefault(),this.handlePaste(t.clipboardData.getData("text"))}set disable(t){this.handleDisable(t),this.isNgxOtpArrayDisabled=t}set config(t){this.otpConfig={...this.otpConfig,...t},this.otpConfig.classList?.input&&this.setInitialStyles(),t.pattern||(this.otpConfig.pattern=this.defaultPattern)}set status(t){this.handleStatusChange(t)}ngOnInit(){this.setUpOtpForm(),this.setUpAriaLabels(),this.LAST_INPUT_INDEX=this.otpConfig.otpLength-1,this.otpFormChangeListener()}ngAfterViewInit(){this.setNativeHTMLElements(),this.setInitialFocus(),this.setNumericInputIfPossible(),this.handleDisable(this.isNgxOtpArrayDisabled)}ngOnDestroy(){this.ngxOtpArray$.unsubscribe()}clear(){this.removeStyleFromAll(this.otpConfig.classList?.inputFilled),this.ngxOtpArray.reset(),this.ref.detectChanges(),this.otpConfig.autofocus&&this.setFocus(0)}handleKeyUp(t,r){this.otpConfig.pattern.test(r)&&"Backspace"!==r&&(this.addStyle(t,this.otpConfig.classList?.inputFilled),this.ngxOtpArray.valid?this.blur():(this.getFormControlByIndex(t).setValue(r),this.stepForward(t)))}handleDelete(t){this.removeStyle(t,this.otpConfig.classList?.inputFilled),this.otpConfig.behavior===Kl.LEGACY&&!this.focusedInputHasValue||this.otpConfig.behavior!==Kl.LEGACY?this.stepBackward(t):this.focusedInputHasValue=!1}handleFocus(t){this.focusedInputHasValue=!!this.ngxOtpArray.controls[t].value,this.otpConfig.behavior===Kl.LEGACY&&this.focusedInputHasValue&&this.inputs[t].select()}stepBackward(t){t>0&&this.setFocus(t-1)}stepForward(t){t<this.LAST_INPUT_INDEX&&this.setFocus(t+1)}otpFormChangeListener(){this.ngxOtpArray$=this.ngxOtpArray.valueChanges.subscribe(t=>{this.otpChange.emit(t),this.ngxOtpArray.valid&&this.fill.emit(t.join(""))})}setUpOtpForm(){for(let t=0;t<this.otpConfig.otpLength;t++)this.ngxOtpArray.push(new lj(null,[qU.required]))}setUpAriaLabels(){const t=this.otpConfig.ariaLabels;this.ariaLabels=Array.isArray(t)?t:new Array(this.otpConfig.otpLength).fill(t||this.DEFAULT_ARIA_LABEL)}setNativeHTMLElements(){this.inputs=this.otpInputElements.map(t=>t.nativeElement)}setInitialFocus(){this.otpConfig.autofocus&&this.setFocus(0)}setInitialStyles(){this.styles=this.ngxOtpInputService.init2DArray(this.otpConfig.otpLength),this.addStyleToAll(this.otpConfig.classList.input)}setFocus(t){this.inputs[t].focus()}setNumericInputIfPossible(){this.otpConfig.numericInputMode&&(this.otpConfig.pattern=this.defaultPattern,this.inputs.map(t=>{t.setAttribute("inputmode","numeric"),t.setAttribute("pattern","[0-9]*")}))}blur(){this.otpConfig.autoblur&&this.inputs.map(t=>t.blur())}handlePaste(t){if(this.otpConfig.pattern.test(t)){let r=0;t.split("").slice(0,this.otpConfig.otpLength).map((i,s)=>{this.addStyle(s,this.otpConfig.classList?.inputFilled),this.getFormControlByIndex(s).setValue(i),r=s}),this.ngxOtpArray.valid?this.blur():this.setFocus(r+1)}}handleDisable(t){t?(this.ngxOtpArray.disable(),this.addStyleToAll(this.otpConfig.classList?.inputDisabled)):(this.ngxOtpArray.enable(),this.removeStyleFromAll(this.otpConfig.classList?.inputDisabled))}handleStatusChange(t){this.removeStyleFromAll([...this.ngxOtpInputService.toArray(this.otpConfig.classList?.inputSuccess),...this.ngxOtpInputService.toArray(this.otpConfig.classList?.inputError)]),t&&("success"===t?this.addStyleToAll(this.otpConfig.classList?.inputSuccess):"error"===t&&this.addStyleToAll(this.otpConfig.classList?.inputError))}getFormControlByIndex(t){return this.ngxOtpArray.controls[t]}addStyle(t,r){this.styles=this.ngxOtpInputService.addItemAtIndex(this.styles,t,this.ngxOtpInputService.toArray(r))}addStyleToAll(t){this.styles=this.ngxOtpInputService.addItemToAll(this.styles,this.ngxOtpInputService.toArray(t))}removeStyle(t,r){this.styles=this.ngxOtpInputService.removeItemAtIndex(this.styles,t,this.ngxOtpInputService.toArray(r))}removeStyleFromAll(t){this.styles=this.ngxOtpInputService.removeItemFromAll(this.styles,this.ngxOtpInputService.toArray(t))}}return n.\u0275fac=function(t){return new(t||n)(F(kR),F(Ca))},n.\u0275cmp=Fn({type:n,selectors:[["ngx-otp-input"]],viewQuery:function(t,r){if(1&t&&Mu(Lj,5),2&t){let i;ya(i=va())&&(r.otpInputElements=i)}},hostBindings:function(t,r){1&t&&Ge("paste",function(s){return r.onPaste(s)})},inputs:{disable:"disable",config:"config",status:"status"},outputs:{otpChange:"otpChange",fill:"fill"},decls:2,vars:2,consts:[[1,"ngx-otp-input-container",3,"ngClass"],["class","ngx-otp-input-box",3,"ngClass",4,"ngFor","ngForOf"],[1,"ngx-otp-input-box",3,"ngClass"],["maxlength","1","autocapitalize","off","spellcheck","false",1,"ngx-otp-input",3,"id","formControl","ngxOtpPattern","type","ngClass","keyup","keyup.backspace","keyup.arrowLeft","keyup.arrowRight","focus"],["otpInputElement",""]],template:function(t,r){1&t&&(se(0,"form",0),yn(1,$j,4,7,"div",1),oe()),2&t&&(Ye("ngClass",null==r.otpConfig.classList?null:r.otpConfig.classList.container),Ne(1),Ye("ngForOf",r.ngxOtpArray.controls))},dependencies:[gR,_y,X1,J1,PE,SE,Ay,x_,oM,Vj],styles:[".ngx-otp-input-container[_ngcontent-%COMP%]{display:flex}.ngx-otp-input-box[_ngcontent-%COMP%]{margin:0 5px}.ngx-otp-input-box[_ngcontent-%COMP%]:first-child{margin-left:0}.ngx-otp-input-box[_ngcontent-%COMP%]:last-child{margin-right:0}.ngx-otp-input[_ngcontent-%COMP%]{width:35px;height:35px;text-align:center;font-size:1.25rem;border:1px solid #212121;border-radius:4px;outline:0}.ngx-otp-input-disabled[_ngcontent-%COMP%]{opacity:.3}"],changeDetection:0}),n})(),Hj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({providers:[kR],imports:[Fj,OR,ob]}),n})();function Uj(n,e){1&n&&(se(0,"h4",4),Ue(1," Sai OTP, vui l\xf2ng th\u1eed l\u1ea1i "),oe())}const jj=function(n){return{color:n}};let qj=(()=>{class n{constructor(t,r){this.otp=t,this.webphone=r,this.onOTPSuccess=new it}ngOnInit(){this.userPhone=`*****${this.webphone.webPhoneConfig.phone.slice(7)}`,this.isResendOTPAvailable=!0,this.resentOTPTimeout=0,this.otpInputConfig={otpLength:6,numericInputMode:!0,autofocus:!0},this.resetCountDownInterval()}otpOnChange(t){var r=this;return E(function*(){try{if(t.filter(s=>!s).length>0)return;r.isOTPInvalid=!1;const i=t.reduce((s,o)=>10*s+parseInt(o),0).toString();yield r.otp.verifyOTP(i),r.onOTPSuccess.emit(!0)}catch{r.isOTPInvalid=!0}})()}resetCountDownInterval(){clearInterval(this.countDownInterval),this.otpTimeOut=60,this.countDownInterval=setInterval(()=>{0!=this.otpTimeOut&&(this.otpTimeOut=this.otpTimeOut-1)},1e3)}resendOTP(){var t=this;return E(function*(){try{yield t.otp.resendOTP(),t.isOTPInvalid=!1,t.isResendOTPAvailable=!1,setTimeout(()=>{t.isResendOTPAvailable=!0},6e4),t.resentOTPTimeout=Date.now()+6e4,t.resetCountDownInterval()}catch{t.isOTPInvalid=!0}})()}}return n.\u0275fac=function(t){return new(t||n)(F(wV),F(T1))},n.\u0275cmp=Fn({type:n,selectors:[["app-otp-input"]],outputs:{onOTPSuccess:"onOTPSuccess"},decls:9,vars:8,consts:[[1,"wrapper","d-flex","flex-column","align-items-center","justify-content-center"],[1,"mb-4",3,"config","otpChange"],["class","mt-4 text-danger",4,"ngIf"],[1,"btn","mb-2",3,"disabled","ngStyle","click"],[1,"mt-4","text-danger"]],template:function(t,r){1&t&&(se(0,"div",0)(1,"h4"),Ue(2),oe(),se(3,"ngx-otp-input",1),Ge("otpChange",function(s){return r.otpOnChange(s)}),oe(),yn(4,Uj,2,0,"h4",2),se(5,"button",3),Ge("click",function(){return r.resendOTP()}),Ue(6," G\u1eedi l\u1ea1i m\xe3 OTP "),oe(),se(7,"span"),Ue(8),oe()()),2&t&&(Ne(2),_a("Nh\u1eadp m\xe3 x\xe1c nh\u1eadn \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi qua s\u1ed1 \u0111i\u1ec7n tho\u1ea1i ",r.userPhone,""),Ne(1),Ye("config",r.otpInputConfig),Ne(1),Ye("ngIf",r.isOTPInvalid),Ne(1),Ye("disabled",!r.isResendOTPAvailable)("ngStyle",Iu(6,jj,r.isResendOTPAvailable?"#01ad53":"#7e8481")),Ne(3),_a("OTP h\u1ebft hi\u1ec7u l\u1ef1c sau ",r.otpTimeOut," gi\xe2y"))},dependencies:[R_,dM,Bj],styles:['.wrapper[_ngcontent-%COMP%]{padding:2rem;text-align:center}.wrapper[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:500}.wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-weight:500}.wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem}  .ngx-otp-input{background-color:transparent!important;border:0!important;border-radius:0!important;border-bottom:1px solid #b5bec1!important;font-weight:500!important}  .ngx-otp-input:focus{border-color:#01ad53!important}  .ngx-otp-input::placeholder{content:"*"}  .otp-invalid .ngx-otp-input{border-color:red!important}.text-danger[_ngcontent-%COMP%]{color:red}']}),n})();class NR{static secondToTimeString(e){const t=Math.floor(e/60),r=e-60*t;return this.str_pad_left(t,"0",2)+":"+this.str_pad_left(r,"0",2)}static str_pad_left(e,t,r){return(new Array(r+1).join(t)+e).slice(-r)}static checkCurrentTime(){const e=new Date;return e.getHours()>7&&e.getHours()<22}}let LR=!1,zj=(()=>{class n{constructor(t){this.title="VPBank",t.canceledNavigationResolution="computed",this.reloadSubscription=t.events.subscribe(r=>{r instanceof ty&&(LR=!t.navigated)})}ngOnDestroy(){this.reloadSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(F(Ht))},n.\u0275cmp=Fn({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&Wt(0,"router-outlet")},dependencies:[Yb]}),n})(),Gj=(()=>{class n extends ku{constructor(t,r,i){super(t,r),this.env=t,this.http=r,this.cookie=i}getContract(){var t=this;return E(function*(){const r=t.cookie.getCookie("session_id");return Pl(t.get(`/webrtc/contracts/${r}`))})()}updateContractStatus(t,r){var i=this;return E(function*(){return Pl(i.request(Fl.PUT,`/webrtc/contracts/${t}`,{status:r?"ok":"not_ok"}))})()}}return n.\u0275fac=function(t){return new(t||n)(k(si),k(kl),k(Nl))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wj=(()=>{class n extends ku{constructor(t,r){super(t,r),this.env=t,this.http=r}setNewcallLog(t){return Pl(this.request(Fl.POST,"/webrtc/calllogs",t))}}return n.\u0275fac=function(t){return new(t||n)(k(si),k(kl))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Kj=(()=>{class n extends ku{constructor(t,r){super(t,r),this.env=t,this.http=r}checkAgentState(t){var r=this;return E(function*(){return Pl(r.get(`/webrtc/call-status/${t}`))})()}}return n.\u0275fac=function(t){return new(t||n)(k(si),k(kl))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yj(n,e){if(1&n&&(se(0,"div",25),Ue(1),oe()),2&n){const t=Dt(2);Ne(1),_a(" ",t.callTimeCount," ")}}function Zj(n,e){1&n&&(se(0,"div",26)(1,"div",27),Wt(2,"img",28)(3,"div",29)(4,"div",30),oe(),se(5,"div",31)(6,"div",32),Ue(7," \u0110ang k\u1ebft n\u1ed1i t\u1edbi chuy\xean vi\xean... "),oe(),se(8,"div",33),Wt(9,"img",34),oe()()())}function Qj(n,e){if(1&n){const t=As();se(0,"div",35)(1,"div",36),Wt(2,"div",37),oe(),se(3,"div",38)(4,"p"),Ue(5," By sending confirmation code to VPBank you agree to our "),se(6,"a",39),Ue(7,"Terms and Conditions"),oe()(),se(8,"div",40)(9,"div",41),Ge("click",function(){return kt(t),Je(Dt(2).setStatusContract(!1))}),Ue(10," T\u1eeb ch\u1ed1i "),oe(),se(11,"div",42),Ge("click",function(){return kt(t),Je(Dt(2).setStatusContract(!0))}),Ue(12," \u0110\u1ed3ng \xfd "),oe()()()()}if(2&n){const t=Dt(2);Ne(2),Ye("innerHTML",t.sessionContract.content,um)}}function Xj(n,e){if(1&n){const t=As();se(0,"div",43)(1,"app-otp-input",44),Ge("onOTPSuccess",function(i){return kt(t),Je(Dt(2).onOTPSuccess(i))}),oe()()}}function Jj(n,e){if(1&n){const t=As();se(0,"div",50),Ge("click",function(){return kt(t),Je(Dt(3).endCalls())}),Ue(1," OK "),oe()}}function e8(n,e){if(1&n){const t=As();se(0,"div",51)(1,"div",52),Ge("click",function(){return kt(t),Je(Dt(3).confirmTerminateCall(!1))}),Ue(2," Kh\xf4ng "),oe(),se(3,"div",53),Ge("click",function(){return kt(t),Je(Dt(3).confirmTerminateCall(!0))}),Ue(4," K\u1ebft th\xfac "),oe()()}}function t8(n,e){if(1&n&&(se(0,"div",45)(1,"div",46)(2,"h3",47),Ue(3,"Th\xf4ng b\xe1o"),oe(),se(4,"p"),Ue(5),oe(),yn(6,Jj,2,0,"div",48),yn(7,e8,5,0,"div",49),oe()()),2&n){const t=Dt(2);Ne(5),_a(" ",t.notification," "),Ne(1),Ye("ngIf",!t.isConfirmEndCall),Ne(1),Ye("ngIf",t.isConfirmEndCall)}}const n8=function(n){return{"microphone-off":n}},r8=function(n){return{"pull-over-opened":n}};function i8(n,e){if(1&n){const t=As();e_(0),se(1,"div",3)(2,"div",4)(3,"div",5),yn(4,Yj,2,1,"div",6),se(5,"div",7),Wt(6,"video",8),oe(),se(7,"div",9),Wt(8,"video",10),oe(),yn(9,Zj,10,0,"div",11),oe(),se(10,"div",12)(11,"button",13),Ge("click",function(){return kt(t),Je(Dt().processCallAudio())}),Wt(12,"img",14),oe(),se(13,"button",15),Ge("click",function(){return kt(t),Je(Dt().switchCamera())}),Wt(14,"img",16),oe(),se(15,"button",17),Ge("click",function(){return kt(t),Je(Dt().handleMidCallTerminate())}),Ue(16," K\u1ebft th\xfac "),oe()()(),Ue(17," = "),se(18,"div",18)(19,"div",19)(20,"span",20),Ge("click",function(){kt(t);const i=Dt();return Je("upgrade"==i.pullOverFormType?i.setStatusContract(!1):i.isShowPullOverBox=!1)}),Wt(21,"img",21),oe(),se(22,"h4"),Ue(23),oe()(),yn(24,Qj,13,1,"div",22),yn(25,Xj,2,0,"div",23),oe()(),yn(26,t8,8,3,"div",24),t_()}if(2&n){const t=Dt();Ne(4),Ye("ngIf",t.callingTime),Ne(2),Ye("volume",1)("srcObject",t.remoteVideoStream),Ne(2),Ye("volume",0)("srcObject",t.localVideoStream),Ne(1),Ye("ngIf",t.isShowWatingScreen),Ne(2),Ye("ngClass",Iu(13,n8,t.isMicMuted)),Ne(1),Ye("src",t.isMicMuted?"assets/icons/microphone-off.svg":"assets/icons/microphone-on.svg",er),Ne(6),Ye("ngClass",Iu(15,r8,t.isShowPullOverBox)),Ne(5),_a(" ","upgrade"==t.pullOverFormType?"Gi\u1ea5y \u0111\u1ec1 ngh\u1ecb n\xe2ng c\u1ea5p g\xf3i EKYC":"Nh\u1eadp OTP"," "),Ne(1),Ye("ngIf","upgrade"===t.pullOverFormType),Ne(1),Ye("ngIf","OTP"===t.pullOverFormType),Ne(1),Ye("ngIf",t.isShowNotification)}}let $R=(()=>{class n{constructor(t,r,i,s,o,l,u,d,f){this.env=t,this.router=r,this.webphone=i,this.auth=s,this.cookie=o,this.contract=l,this.callLog=u,this.location=d,this.agentService=f,this.auth.getToken()||this.router.navigate(["permission-required"]),history.pushState(null,"",window.location.href),this.location.onPopState(()=>{history.pushState(null,"",window.location.href)})}ngOnInit(){var t=this;return E(function*(){if(!navigator.mediaDevices.getSupportedConstraints().facingMode)throw new Error;navigator.mediaDevices.enumerateDevices().then(i=>{t.devices=i.filter(s=>"videoinput"===s.kind)}),t.isMicMuted=!1,t.isAgentHasContract=!1,t.isAgentAnswered=!1,t.isOTPSuccess=!1,t.isOutOfficeTime=!1,t.getAgentStatus=!1,t.isCallEnded=!1,yield t.setupMediaDevice("user").then(()=>{t.isMediaDevicesReady=!0,t.webphone.initialize(),navigator.mediaDevices.enumerateDevices().then(i=>{t.devices=i.filter(s=>"videoinput"===s.kind)}),LR?t.router.navigate(["call-ended",{hasFinish:!1}]):t.webphone.initializeCompleted.subscribe(function(){var i=E(function*(s){s&&(yield t.checkNewCallAvailable().then(o=>{o?t.makeCall():(t.isShowNotification=!0,t.isOutOfficeTime=!0)}))});return function(s){return i.apply(this,arguments)}}())}).catch(i=>{t.isCallProgressing=!1,t.router.navigate(["permission-required",{noDevice:!0}])})})()}checkNewCallAvailable(){var t=this;return E(function*(){let r=!1;if(t.env?.office_time){const i=new Date,s=new Date,o=t.env.office_time.split("-")[0],l=t.env.office_time.split("-")[1],u=i.setHours(o.split(":")[0],o.split(":")[1]??0).valueOf(),d=s.setHours(l.split(":")[0],l.split(":")[1]??0).valueOf();r=!(u<Date.now()&&Date.now()<d)}else r=!NR.checkCurrentTime();return!r||(t.notification="Xin l\u1ed7i Qu\xfd kh\xe1ch, hi\u1ec7n t\u1ea5t c\u1ea3 c\xe1c t\u1ed5ng \u0111\xe0i vi\xean \u0111\u1ec1u \u0111ang b\u1eadn ho\u1eb7c h\u1ebft gi\u1edd h\u1ed7 tr\u1ee3. Qu\xfd kh\xe1ch vui l\xf2ng g\u1ecdi l\u1ea1i trong khung gi\u1edd 8h-22h. C\xe1m \u01a1n Qu\xfd kh\xe1ch!",!1)})()}changeCameraDevice(t){this.devices.find(s=>s.deviceId==this.deviceId),this.setupMediaDevice(this.facingMode,{audio:!0,mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:this.deviceId}})}setupMediaDevice(t="user",r){var i=this;return E(function*(){if(!navigator.mediaDevices)throw new Error;if(!navigator.mediaDevices.getSupportedConstraints().facingMode)throw new Error;i.constrainOption={audio:!0,video:{width:1280,height:720,facingMode:{exact:t},mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i.deviceId}}},r&&(i.constrainOption=r);try{i.localVideoStream&&i.localVideoStream.getTracks().forEach(y=>y.stop()),i.stream=yield navigator.mediaDevices.getUserMedia(i.constrainOption);let u=i.stream.getVideoTracks()[0];const d=i.stream.getAudioTracks()[0];let f=i.webphone.session?.sessionDescriptionHandler?.peerConnection;if(f)for(var o=0;o<f.getSenders().length;o++)f.getSenders()[o].track.kind===u.kind?f.getSenders()[o].replaceTrack(u):f.getSenders()[o].track.kind===d.kind&&f.getSenders()[o].replaceTrack(d)}catch{throw new Error}i.facingMode=t,i.localVideoStream=i.stream})()}switchCamera(){this.setupMediaDevice("environment"==this.facingMode?"user":"environment")}startTimer(){var t=this;this.callingTime=0;const r=this.env?.ivr_ring_time;this.interval=setInterval(E(function*(){t.callingTime++,r&&(t.callingTime==Number(r)&&!t.getAgentStatus&&t.agentService.checkAgentState(t.callSessionId).then(i=>{t.agentStatus=i?.status,t.getAgentStatus=!0}),t.callingTime>Number(r)&&0==t.agentStatus&&t.getAgentStatus&&!t.isCallEnded&&(t.handleAgentBusy(),t.isCallEnded=!0,t.webphone.outGoingInviter.state==H.Initial||t.webphone.outGoingInviter.state==H.Establishing?t.webphone.outGoingInviter.cancel().then():t.webphone.session?.bye().then()))}),1e3)}get callTimeCount(){return NR.secondToTimeString(this.callingTime)}makeCall(){var t=this;return E(function*(){t.isShowWatingScreen=!0;const i=Hl.makeURI(`sip:${t.env.default_call_target}@${t.env.sip_domain}`);if(i)try{const{sessionID:s,phone:o,cif:l}=t.webphone.webPhoneConfig,u={audio:!0,video:{width:1280,height:720}},d=new cx(t.webphone.userAgent,i,{earlyMedia:!0,extraHeaders:[`X-Vpbank-SessionId:${s}`,`X-Vpbank-Phone:${o}`,`X-Vpbank-Cif:${l}`],params:{fromDisplayName:`${s}-${o}-${l}`}});t.webphone.outGoingInviter=d,t.webphone.session=d,t.sessionStateListener();const f={sessionDescriptionHandlerOptions:{constraints:u},requestDelegate:{onProgress:(p=E(function*(y){setTimeout(()=>{const v=document.getElementById("ringBackAudio");v&&v.play()}),t.createCallLog(y)}),function(v){return p.apply(this,arguments)}),onReject:p=>{t.isShowNotification=!1,t.isConfirmEndCall||t.handleAgentBusy()},onAccept:p=>{t.startCallAt=(new Date).getTime(),t.createCallLog(p),t.isAgentAnswered=!0,t.processCall()}}};t.webphone.outGoingInviter.invite(f)}catch(s){t.isCallProgressing=!1,console.error("ERROR in answer",s)}var p})()}createCallLog(t){const r=t.message.headers;if(this.callSessionId=Ma.first(r["X-Session-Id"])?.raw??"",!this.isCalllogCreated){const i={call_id:Ma.first(r["Call-ID"])?.parsed,callee:Ma.first(r.To)?.parsed.uri.normal.user,caller:Ma.first(r.From)?.parsed.uri.normal.user,call_log_session_id:Ma.first(r["X-Session-Id"])?.raw,direction:"out",session_id:this.cookie.getCookie("session_id")};this.callLog.setNewcallLog(i).then(s=>{s&&(this.isCalllogCreated=!0)})}}handleAgentBusy(){this.isAgentBusy=!0,this.isCallProgressing=!1,this.isShowNotification=!0,this.notification="Xin l\u1ed7i Qu\xfd kh\xe1ch, hi\u1ec7n t\u1ea1i t\u1ea5t c\u1ea3 t\u1ed5ng \u0111\xe0i vi\xean \u0111\u1ec1u \u0111ang b\u1eadn, Qu\xfd kh\xe1ch vui l\xf2ng g\u1ecdi l\u1ea1i sau \xedt ph\xfat. ";const t=document.getElementById("ringBackAudio");t&&(t.pause(),t.currentTime=0)}hangUpCall(){var t=this;return E(function*(){t.webphone.outGoingInviter.state==H.Initial||t.webphone.outGoingInviter.state==H.Establishing?t.webphone.outGoingInviter.cancel().then():t.webphone.session?.bye().then(),t.remoteVideoStream=new MediaStream,t.localVideoStream?.getTracks().forEach(function(r){r.stop()}),t.isCallProgressing=!1,t.localVideoStream=new MediaStream,t.isAgentAnswered?t.router.navigate(["call-ended",{hasFinish:t.isOTPSuccess}]):setTimeout(()=>{t.router.navigate(["permission-required"])},500)})()}endCalls(){if(this.isOutOfficeTime)return void this.router.navigate(["permission-required",{isBusy:!0}]);this.remoteVideoStream=new MediaStream,this.localVideoStream?.getTracks().forEach(function(r){r.stop()}),this.isCallProgressing=!1,this.localVideoStream=new MediaStream;const t=this.env?.ivr_ring_time;if(t)if(this.callingTime<Number(t))this.agentService.checkAgentState(this.callSessionId).then(r=>(this.agentStatus=r?.status,this.getAgentStatus=!0,0==this.agentStatus?void this.router.navigate(["permission-required",{isBusy:!1}]):void this.router.navigate(["call-ended",{hasFinish:this.isOTPSuccess}])));else{if(0==this.agentStatus&&this.getAgentStatus)return void this.router.navigate(["permission-required",{isBusy:!1}]);this.isAgentAnswered?this.router.navigate(["call-ended",{hasFinish:this.isOTPSuccess}]):setTimeout(()=>{this.router.navigate(["permission-required"])},500)}else this.isAgentAnswered?this.router.navigate(["call-ended",{hasFinish:this.isOTPSuccess}]):setTimeout(()=>{this.router.navigate(["permission-required"])},500)}processCall(){const t=this.webphone.session.sessionDescriptionHandler;if(t&&t instanceof Ls){const i=t.remoteMediaStream;setTimeout(()=>{this.remoteVideoStream=i})}const r=document.getElementById("ringBackAudio");r&&(r.pause(),r.currentTime=0),this.isShowWatingScreen=!1,this.isCallProgressing=!0,this.startTimer(),this.setCheckContractInterval()}setCheckContractInterval(){this.checkContractInterval=setInterval(()=>{this.contract.getContract().then(t=>{Ma.isEmpty(t.data)||(this.pullOverFormType="upgrade",this.isShowPullOverBox=!0,this.sessionContract=t.data,this.isAgentHasContract=!0,setTimeout(()=>{clearInterval(this.checkContractInterval)}))})},5e3)}setStatusContract(t){var r=this;return E(function*(){yield r.contract.updateContractStatus(r.sessionContract.id,t).then(()=>{t?r.pullOverFormType="OTP":(r.isShowPullOverBox=!1,r.setCheckContractInterval())})})()}sessionStateListener(){this.webphone.session.stateChange.addListener(t=>{t===H.Terminated&&(this.isCallEnded?this.router.navigate(["call-ended",{hasFinish:this.isOTPSuccess}]):this.isConfirmEndCall?this.isAgentAnswered&&this.router.navigate(["call-ended",{hasFinish:this.isOTPSuccess}]):this.handleAgentBusy())})}processCallAudio(){this.isMicMuted=!this.isMicMuted,this.localVideoStream.getAudioTracks()[0].enabled=!this.isMicMuted;const r=this;this.webphone.session.sessionDescriptionHandler.peerConnection.getSenders().forEach(i=>{"audio"==i.track.kind&&(i.track.enabled=!r.isMicMuted)})}onOTPSuccess(t){t&&(this.isShowPullOverBox=!1,this.isOTPSuccess=!0)}handleMidCallTerminate(){var t=this;return E(function*(){t.isConfirmEndCall=!0,t.notification="Qu\xfd kh\xe1ch c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n k\u1ebft th\xfac cu\u1ed9c g\u1ecdi video ?",t.isShowNotification=!0})()}confirmTerminateCall(t){t&&this.hangUpCall(),t||(this.isConfirmEndCall=!1),this.isShowNotification=!1}ngOnDestroy(){this.localVideoStream&&this.localVideoStream.getTracks().forEach(r=>r.stop()),clearInterval(this.checkContractInterval),clearInterval(this.interval)}}return n.\u0275fac=function(t){return new(t||n)(F(si),F(Ht),F(T1),F(my),F(Nl),F(Gj),F(Wj),F(Ps),F(Kj))},n.\u0275cmp=Fn({type:n,selectors:[["app-main"]],decls:3,vars:1,consts:[["src","assets/ringback.wav","loop","","id","ringBackAudio"],["ringBack",""],[4,"ngIf"],[1,"wrapper","d-flex","flex-column","align-items-center","justify-content-center",2,"width","100vw","height","100vh","background-color","white"],[1,"content"],[1,"call-screen","d-flex","flex-column","align-items-center"],["class","timer text-light",4,"ngIf"],[1,"remote-video-container"],["playsinline","","autoplay","",1,"remoteVideo",3,"volume","srcObject"],[1,"local-video-container","d-flex","flex-column","align-items-center","justify-content-center"],["playsinline","","autoplay","","muted","",1,"localVideo",3,"volume","srcObject"],["class","waiting-screen-overlay d-flex align-items-center justify-content-center w-100 h-100",4,"ngIf"],[1,"controller","d-flex","align-items-center"],[1,"btn","microphone-toggler",3,"ngClass","click"],["alt","",3,"src"],[1,"btn","camera-switcher",3,"click"],["src","assets/icons/camera-switcher.svg","alt",""],[1,"btn","btn-danger","text-light","call","btn-endcall","rounded-pill",3,"click"],[1,"pull-over-layer",3,"ngClass"],[1,"pull-over-header","d-flex","align-items-center"],[1,"mx-3","close-btn",3,"click"],["src","assets/icons/close-icon.svg","alt",""],["class","upgrade-offer-form",4,"ngIf"],["class","otp-input-form",4,"ngIf"],["class","notification-overlay d-flex flex-column align-items-center justify-content-center",4,"ngIf"],[1,"timer","text-light"],[1,"waiting-screen-overlay","d-flex","align-items-center","justify-content-center","w-100","h-100"],[1,"d-flex","align-items-center","justify-content-center","waiting-image"],["src","assets/images/waiting-icon.png","alt","",1,"position-relative"],[1,"circle",2,"animation-delay","-1s"],[1,"circle",2,"animation-delay","0s"],[1,"waiting-footer","position-absolute","w-100","d-flex","flex-column","align-items-center","justify-content-center","px-4"],[1,"waiting-text","text-light","mb-4"],[1,"waiting-ad","w-100"],["src","assets/images/ad.png","alt","",1,"w-100"],[1,"upgrade-offer-form"],[1,"form-content"],[3,"innerHTML"],[1,"form-footer"],["href","javascript:void(0)"],[1,"d-flex","form-actions"],[1,"btn","w-50","decline-btn",3,"click"],[1,"btn","w-50","accept-btn",3,"click"],[1,"otp-input-form"],[1,"w-100",3,"onOTPSuccess"],[1,"notification-overlay","d-flex","flex-column","align-items-center","justify-content-center"],[1,"notification","text-center"],[1,"header"],["class","footer",3,"click",4,"ngIf"],["class","footer row end-call-confirm",4,"ngIf"],[1,"footer",3,"click"],[1,"footer","row","end-call-confirm"],[1,"w-50","text-black",3,"click"],[1,"w-50","text-danger",3,"click"]],template:function(t,r){1&t&&(Wt(0,"audio",0,1),yn(2,i8,27,17,"ng-container",2)),2&t&&(Ne(2),Ye("ngIf",r.isMediaDevicesReady))},styles:['.wrapper[_ngcontent-%COMP%]{max-height:100vh;overflow:hidden;position:relative}.content[_ngcontent-%COMP%]{width:100%;height:100%;min-width:360px;max-width:1024px;margin:auto;position:relative;background-color:#000}.call-screen[_ngcontent-%COMP%]{height:calc(95vh - 10rem);background-color:#000;position:relative}.call-screen[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]{top:1rem;z-index:2;font-size:1rem;position:absolute;text-shadow:0px 0px 5px rgba(0,0,0,.5)}.call-screen[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]:before{position:absolute;content:"";height:5px;width:5px;left:-10px;top:40%;background-color:red;border-radius:50%;animation:2s blink ease infinite}.call-screen[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;object-fit:scale-down}.call-screen[_ngcontent-%COMP%]   .local-video-container[_ngcontent-%COMP%]{height:100%;border-bottom-right-radius:2rem;border-bottom-left-radius:2rem;overflow:hidden}.call-screen[_ngcontent-%COMP%]   .local-video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{transform:rotateY(180deg)}.call-screen[_ngcontent-%COMP%]   .remote-video-container[_ngcontent-%COMP%]{width:8rem;height:-moz-fit-content;height:fit-content;top:4rem;left:70%;z-index:2;position:absolute}.call-screen[_ngcontent-%COMP%]   .remote-video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:.5rem}.controller[_ngcontent-%COMP%]{padding:0 2rem;height:10rem;background-color:#000}.controller[_ngcontent-%COMP%]   .microphone-toggler[_ngcontent-%COMP%], .controller[_ngcontent-%COMP%]   .camera-switcher[_ngcontent-%COMP%]{width:4rem;height:4rem;border-radius:50%;display:flex;align-items:center;justify-content:center;background-color:#2e2e2e}.controller[_ngcontent-%COMP%]   .microphone-toggler[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .controller[_ngcontent-%COMP%]   .camera-switcher[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5rem}.controller[_ngcontent-%COMP%]   .microphone-toggler[_ngcontent-%COMP%]{margin-right:1.5rem}.controller[_ngcontent-%COMP%]   .microphone-toggler[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.25rem}.controller[_ngcontent-%COMP%]   .microphone-toggler.microphone-off[_ngcontent-%COMP%]{background-color:#d3d3d3}.controller[_ngcontent-%COMP%]   .btn-endcall[_ngcontent-%COMP%]{margin-left:auto;height:4rem;width:8rem}.notification-overlay[_ngcontent-%COMP%]{z-index:3;position:absolute;top:0;left:0;width:100vw;height:100vh;background-color:#00000073;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.notification-overlay[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{width:75%;min-height:10rem;background-color:#fff;border-radius:1rem;position:relative;padding-top:1rem;overflow:hidden}.notification-overlay[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:500}.notification-overlay[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:1rem 2rem}.notification-overlay[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{cursor:pointer;width:calc(100% - 1px);border-radius:0 0 1rem 1rem;background-color:#f4f7f8;padding:1.5rem;color:#01ad53;font-weight:500}.notification-overlay[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .footer.end-call-confirm[_ngcontent-%COMP%]{margin:0;border-top:1px solid #DADEE0}.notification-overlay[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .footer.end-call-confirm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:relative}.notification-overlay[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .footer.end-call-confirm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child:after{content:"";height:5rem;width:1px;background-color:#dadee0;position:absolute;right:0;top:-1.5rem}.waiting-screen-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:calc(95vh - 10rem)!important;background:linear-gradient(0deg,rgba(0,0,0,.88),rgba(0,0,0,.88));opacity:.75}.waiting-screen-overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{z-index:999;width:6rem}.waiting-screen-overlay[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{border-radius:50%;background-color:#34b95e;opacity:.1;width:16rem;height:16rem;position:absolute;animation:scaleIn 2s infinite cubic-bezier(.36,.11,.89,.32)}.waiting-screen-overlay[_ngcontent-%COMP%]   .waiting-image[_ngcontent-%COMP%]{position:relative}.waiting-screen-overlay[_ngcontent-%COMP%]   .waiting-image[_ngcontent-%COMP%]:after{position:absolute;content:"";width:16rem;height:16rem;border-radius:50%;background-color:#34b95e;opacity:.1;transform:scale(.6)}.waiting-screen-overlay[_ngcontent-%COMP%]   .waiting-footer[_ngcontent-%COMP%]{position:relative;bottom:1.5rem}.waiting-screen-overlay[_ngcontent-%COMP%]   .waiting-text[_ngcontent-%COMP%]{font-size:.85rem}.pull-over-layer[_ngcontent-%COMP%]{width:100%;height:80vh;max-width:1024px;bottom:-100%;position:absolute;background-color:#f4f7f8;transition:all 1s ease}.pull-over-layer[_ngcontent-%COMP%]   .pull-over-header[_ngcontent-%COMP%]{background-color:#fff;padding:.5rem 0;height:7%}.pull-over-layer[_ngcontent-%COMP%]   .pull-over-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{cursor:pointer;position:absolute}.pull-over-layer[_ngcontent-%COMP%]   .pull-over-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 auto;font-weight:500}.pull-over-layer.pull-over-opened[_ngcontent-%COMP%]{bottom:0}.upgrade-offer-form[_ngcontent-%COMP%], .otp-input-form[_ngcontent-%COMP%]{position:relative;height:93%;width:100%}.upgrade-offer-form[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{max-height:80%;overflow:scroll;padding:2rem}.upgrade-offer-form[_ngcontent-%COMP%]   .form-footer[_ngcontent-%COMP%]{width:100%;font-size:1rem;font-weight:500;padding-top:1rem;background-color:#fff;box-shadow:0 -2px 8px #0000001a;position:absolute;bottom:0}.upgrade-offer-form[_ngcontent-%COMP%]   .form-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0 1rem}.upgrade-offer-form[_ngcontent-%COMP%]   .form-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#01ad53}.upgrade-offer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{border-top:1px solid #dadee0}.upgrade-offer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:0;padding:1.5rem;font-weight:700}.upgrade-offer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .decline-btn[_ngcontent-%COMP%]{border-right:1px solid #dadee0}.upgrade-offer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{color:#01ad53}@keyframes blink{0%,to{opacity:0}50%{opacity:1}}@keyframes scaleIn{0%{transform:scale(.6);opacity:.1}to{transform:scale(1.5);opacity:0}}']}),n})();function s8(n,e){if(1&n){const t=As();se(0,"div",15)(1,"button",16),Ge("click",function(){return kt(t),Je(Dt().openAppLink())}),Ue(2,"M\u1edf VPBank NEO"),oe()()}}function o8(n,e){if(1&n){const t=As();se(0,"div",15)(1,"button",16),Ge("click",function(){return kt(t),Je(Dt().reCall())}),Ue(2,"G\u1ecdi l\u1ea1i"),oe()()}}function a8(n,e){1&n&&(se(0,"p"),Ue(1," Qu\xfd kh\xe1ch c\u1ea7n cho ph\xe9p truy c\u1eadp Camera v\xe0 Microphone t\u1ea1i "),se(2,"span",22),Ue(3,"\u201cC\xe0i \u0111\u1eb7t\u201d"),oe(),Ue(4," tr\xean thi\u1ebft b\u1ecb \u0111\u1ec3 c\xf3 th\u1ec3 tham gia cu\u1ed9c g\u1ecdi video. "),oe())}function l8(n,e){1&n&&(se(0,"p"),Ue(1," Qu\xfd kh\xe1ch \u0111\xe3 th\u1ef1c hi\u1ec7n g\u1ecdi l\u1ea1i qu\xe1 3 l\u1ea7n, vui l\xf2ng truy c\u1eadp VPBank NEO \u0111\u1ec3 kh\u1edfi t\u1ea1o l\u1ea1i cu\u1ed9c g\u1ecdi. "),oe())}const c8=function(n){return{"text-danger":n}};function u8(n,e){if(1&n){const t=As();se(0,"div",17)(1,"div",18)(2,"h3",19),Ue(3,"Th\xf4ng b\xe1o"),oe(),yn(4,a8,5,0,"p",20),yn(5,l8,2,0,"p",20),se(6,"div",21),Ge("click",function(){return kt(t),Je(Dt().removeMessage())}),Ue(7,"\u0110\xe3 hi\u1ec3u"),oe()()()}if(2&n){const t=Dt();Ne(2),Ye("ngClass",Iu(3,c8,t.noDevice)),Ne(2),Ye("ngIf",t.noDevice),Ne(1),Ye("ngIf",t.retryTimeExceed)}}const d8=[{path:"main",component:$R,canDeactivate:[(()=>{class n{canDeactivate(t,r,i,s){return!t.isCallProgressing||(t.handleMidCallTerminate(),!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"permission-required",component:(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.route=r,this.cookie=i,this.location=s,this.env=o,history.pushState(null,"",window.location.href),this.location.onPopState(()=>{history.pushState(null,"",window.location.href)})}ngOnInit(){this.route.params.subscribe(t=>{"true"==t.noDevice&&(this.noDevice=!0),"true"==t.isBusy&&(this.busy=!0)}),this.noDevice&&(this.showErrorMessage=!0)}reCall(){const t=localStorage.getItem("callRetry")??"0";parseInt(t)>=2?(this.retryTimeExceed=!0,this.showErrorMessage=!0,this.cookie.clearCookie()):this.countUpAndRecall(t)}countUpAndRecall(t){localStorage.setItem("callRetry",`${parseInt(t)+1}`),this.router.navigate(["main"])}openAppLink(){window.open(this.env.app_link,"_blank")}removeMessage(){this.noDevice=!1,this.showErrorMessage=!1}}return n.\u0275fac=function(t){return new(t||n)(F(Ht),F(Hs),F(Nl),F(Ps),F(si))},n.\u0275cmp=Fn({type:n,selectors:[["app-permission-required"]],decls:26,vars:3,consts:[[1,"wrapper"],[1,"d-flex","header"],[1,"header-left-side","d-flex","flex-column","justify-content-end","text-center"],["src","assets/icons/vpbank-logo.svg","alt",""],[1,"header-right-side"],["src","assets/images/notice-bg.png","alt",""],[1,"body"],[1,"notice"],["src","assets/images/notice-2.png","alt",""],[1,"attention"],[1,"d-flex","align-items-center"],["src","assets/icons/alert.svg","alt",""],["class","action",4,"ngIf","ngIfElse"],["retryCall",""],["class","notification-overlay d-flex flex-column align-items-center justify-content-center",4,"ngIf"],[1,"action"],[1,"btn","btn-success","w-100",3,"click"],[1,"notification-overlay","d-flex","flex-column","align-items-center","justify-content-center"],[1,"notification","text-center"],[1,"header",3,"ngClass"],[4,"ngIf"],[1,"footer",3,"click"],[2,"font-weight","500"]],template:function(t,r){if(1&t&&(se(0,"div",0)(1,"div",1)(2,"div",2),Wt(3,"img",3),se(4,"p"),Ue(5,"Ch\xe0o m\u1eebng qu\xfd kh\xe1ch \u0111\u1ebfn v\u1edbi"),oe()(),se(6,"div",4),Wt(7,"img",5),oe()(),se(8,"div",6)(9,"h3"),Ue(10,"H\u1ec7 th\u1ed1ng \u0111\u1ecbnh danh v\xe0 n\xe2ng c\u1ea5p t\xe0i kho\u1ea3n c\u1ee7a VPBank"),oe(),se(11,"div",7),Wt(12,"img",8),oe(),se(13,"div",9)(14,"div",10),Wt(15,"img",11),se(16,"h4"),Ue(17,"L\u01b0u \xfd"),oe()(),se(18,"p"),Ue(19," \u0110\u1ec3 th\u1ef1c hi\u1ec7n \u0111\u01b0\u1ee3c cu\u1ed9c g\u1ecdi video, Qu\xfd kh\xe1ch c\u1ea7n cho ph\xe9p \u1ee9ng d\u1ee5ng truy c\u1eadp Microphone v\xe0 Camera. "),oe(),se(20,"p"),Ue(21,' Tr\u01b0\u1eddng h\u1ee3p \u0111\xe3 t\u1eeb ch\u1ed1i, vui l\xf2ng b\u1ea5m "Th\u1ef1c hi\u1ec7n l\u1ea1i cu\u1ed9c g\u1ecdi" \u0111\u1ec3 c\u1ea5p l\u1ea1i quy\u1ec1n truy c\u1eadp, t\u1ed1i \u0111a 3 l\u1ea7n." '),oe()(),yn(22,s8,3,0,"div",12),yn(23,o8,3,0,"ng-template",null,13,KA),oe(),yn(25,u8,8,5,"div",14),oe()),2&t){const i=Eu(24);Ne(22),Ye("ngIf",r.retryTimeExceed||r.busy)("ngIfElse",i),Ne(3),Ye("ngIf",r.showErrorMessage)}},dependencies:[x_,R_],styles:['.wrapper[_ngcontent-%COMP%]{width:100vw;height:100vh;min-width:360px;max-width:1024px;margin:auto}.header[_ngcontent-%COMP%]   .header-left-side[_ngcontent-%COMP%]{width:50%;margin-left:2rem}.header[_ngcontent-%COMP%]   .header-left-side[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70%;margin-bottom:1rem}.header[_ngcontent-%COMP%]   .header-left-side[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:#8e989a;text-align:left}.header[_ngcontent-%COMP%]   .header-right-side[_ngcontent-%COMP%]{width:50%}.header[_ngcontent-%COMP%]   .header-right-side[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;margin-bottom:-2rem}.body[_ngcontent-%COMP%]{padding:0 2rem}.body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:500;width:80%;font-style:normal;font-size:1.5rem}.body[_ngcontent-%COMP%]   .notice[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.body[_ngcontent-%COMP%]   .attention[_ngcontent-%COMP%]{margin-top:2rem}.body[_ngcontent-%COMP%]   .attention[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 5px .5rem;font-weight:500}.body[_ngcontent-%COMP%]   .attention[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;margin-left:1.2rem;font-weight:500}.body[_ngcontent-%COMP%]   .attention[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:after{content:"";position:absolute;left:-1rem;top:.75rem;width:5px;height:5px;border-radius:50%;background-color:#000}.body[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{padding:1rem 0}.body[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{font-size:16px;font-weight:500;background-color:#01ad53;height:44px}.notification-overlay[_ngcontent-%COMP%]{z-index:3;position:absolute;top:0;left:0;width:100vw;height:100vh;background-color:#00000073;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.notification-overlay[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{width:75%;min-height:10rem;background-color:#fff;border-radius:1rem;position:relative;padding-top:1rem;overflow:hidden}.notification-overlay[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:500;padding-top:.25rem}.notification-overlay[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0 2rem 1rem}.notification-overlay[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{cursor:pointer;width:calc(100% - 1px);border-radius:0 0 1rem 1rem;background-color:#f4f7f8;padding:1.5rem;color:#01ad53;font-weight:500}']}),n})()},{path:"call-ended",component:(()=>{class n{constructor(t,r,i){this.env=t,this.location=r,this.route=i,history.pushState(null,"",window.location.href),this.location.onPopState(()=>{history.pushState(null,"",window.location.href)})}ngOnInit(){this.route.params.subscribe(t=>{"true"==t.hasFinish?(this.title="\u0110\xe3 ho\xe0n t\u1ea5t cu\u1ed9c g\u1ecdi",this.color="success"):(this.title="\u0110\xe3 d\u1eebng cu\u1ed9c g\u1ecdi",this.color="danger")})}openAppLink(){window.open(this.env.app_link,"_blank")}}return n.\u0275fac=function(t){return new(t||n)(F(si),F(Ps),F(Hs))},n.\u0275cmp=Fn({type:n,selectors:[["app-call-ended"]],decls:10,vars:4,consts:[[1,"wrapper","d-flex","flex-column","align-items-center"],["src","assets/images/call-ended-bg.png","alt","",1,"bg"],["src","assets/icons/vpbank-logo.svg","alt","",1,"logo"],[1,"call-ended-message","text-center"],[1,"btn","btn-success",3,"click"]],template:function(t,r){1&t&&(se(0,"div",0),Wt(1,"img",1)(2,"img",2),se(3,"div",3)(4,"h4"),Ue(5),oe(),se(6,"p"),Ue(7," Qu\xfd kh\xe1ch vui l\xf2ng truy c\u1eadp l\u1ea1i VPBank NEO \u0111\u1ec3 ti\u1ebfp t\u1ee5c s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5. "),oe(),se(8,"button",4),Ge("click",function(){return r.openAppLink()}),Ue(9,"M\u1edf VPBank NEO"),oe()()()),2&t&&(Ne(4),IT(r.color),Ne(1),c0(r.title))},styles:[".wrapper[_ngcontent-%COMP%]{width:100vw;min-width:360px;max-width:1024px;margin:auto}.wrapper[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{width:100%;max-height:40vh;object-fit:cover}.wrapper[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:10rem}.call-ended-message[_ngcontent-%COMP%]{padding:2.5rem}.call-ended-message[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#00b74f;font-weight:500;font-size:1.2rem}.call-ended-message[_ngcontent-%COMP%]   h4.danger[_ngcontent-%COMP%]{color:#ec1c24}.call-ended-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.call-ended-message[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0 3rem;height:44px;background-color:#01ad53;font-weight:600;margin-top:2rem;font-size:1.2rem}"]}),n})()},{path:"",component:(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.auth=i}ngOnInit(){this.route.queryParams.subscribe(t=>{Ma.isEmpty(t)||(this.auth.setSession(t.token,t.session_id),localStorage.clear())}),this.router.navigate(["main"])}}return n.\u0275fac=function(t){return new(t||n)(F(Ht),F(Hs),F(my))},n.\u0275cmp=Fn({type:n,selectors:[["app-main-page"]],decls:0,vars:0,template:function(t,r){},styles:[".local-video[_ngcontent-%COMP%]{position:absolute;max-width:100vw;max-height:100vh;overflow-y:hidden;background-color:#000}.local-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:scale-down}.remote-video[_ngcontent-%COMP%]{position:absolute;top:0;right:0;z-index:99;width:5rem;max-height:10rem;overflow-y:hidden;border-radius:5px}.remote-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:scale-down}.remote-video[_ngcontent-%COMP%]   video.hidden[_ngcontent-%COMP%]{display:hidden}.remote-video[_ngcontent-%COMP%]   .waiting-for-agent[_ngcontent-%COMP%]{width:5rem;height:8rem;background-color:#fff}.remote-video[_ngcontent-%COMP%]   .waiting-for-agent[_ngcontent-%COMP%]   .agent-avatar[_ngcontent-%COMP%]{width:2rem;height:2rem}.remote-video[_ngcontent-%COMP%]   .waiting-for-agent[_ngcontent-%COMP%]   .agent-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem;border:1px solid gray;border-radius:50%}.controller[_ngcontent-%COMP%]{bottom:5rem;left:0}.controller[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:3rem;height:3rem;background-color:#0003}.controller[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{width:5rem;height:5rem;background-color:red}.circle-pulse[_ngcontent-%COMP%]{animation:pulse 2s infinite;border-radius:50%}@keyframes pulse{0%{box-shadow:0 0 #008000b3}70%{box-shadow:0 0 0 10px #0080001a}to{box-shadow:0 0 0 5px #008000b3}}  .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:gray}  mat-spinner{width:3rem!important;height:3rem!important}  mat-spinner svg{width:3rem!important;height:3rem!important}"]}),n})()}];let h8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({imports:[D1.forRoot(d8),D1]}),n})();class VR{}const bo="*";function p8(n,e){return{type:7,name:n,definitions:e,options:{}}}function BR(n,e=null){return{type:4,styles:e,timings:n}}function HR(n,e=null){return{type:3,steps:n,options:e}}function UR(n,e=null){return{type:2,steps:n,options:e}}function Gu(n){return{type:6,styles:n,offset:null}}function jR(n,e,t){return{type:0,name:n,styles:e,options:t}}function qR(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function zR(n=null){return{type:9,options:n}}function GR(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function WR(n){Promise.resolve().then(n)}class Kf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){WR(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class KR{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?WR(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,l)=>Math.max(o,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function YR(n){return new U(3e3,!1)}function Y8(){return typeof window<"u"&&typeof window.document<"u"}function NE(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Fa(n){switch(n.length){case 0:return new Kf;case 1:return n[0];default:return new KR(n)}}function ZR(n,e,t,r,i=new Map,s=new Map){const o=[],l=[];let u=-1,d=null;if(r.forEach(f=>{const p=f.get("offset"),y=p==u,v=y&&d||new Map;f.forEach((b,I)=>{let L=I,V=b;if("offset"!==I)switch(L=e.normalizePropertyName(L,o),V){case"!":V=i.get(I);break;case bo:V=s.get(I);break;default:V=e.normalizeStyleValue(I,L,V,o)}v.set(L,V)}),y||l.push(v),d=v,u=p}),o.length)throw function L8(n){return new U(3502,!1)}();return l}function LE(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&$E(t,"start",n)));break;case"done":n.onDone(()=>r(t&&$E(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&$E(t,"destroy",n)))}}function $E(n,e,t){const s=VE(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function VE(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ri(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function QR(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let BE=(n,e)=>!1,XR=(n,e,t)=>[],JR=null;function HE(n){const e=n.parentNode||n.host;return e===JR?null:e}(NE()||typeof Element<"u")&&(Y8()?(JR=(()=>document.documentElement)(),BE=(n,e)=>{for(;e;){if(e===n)return!0;e=HE(e)}return!1}):BE=(n,e)=>n.contains(e),XR=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Yl=null,eO=!1;const tO=BE,nO=XR;let rO=(()=>{class n{validateStyleProperty(t){return function Q8(n){Yl||(Yl=function X8(){return typeof document<"u"?document.body:null}()||{},eO=!!Yl.style&&"WebkitAppearance"in Yl.style);let e=!0;return Yl.style&&!function Z8(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Yl.style,!e&&eO&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Yl.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return tO(t,r)}getParentElement(t){return HE(t)}query(t,r,i){return nO(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,l=[],u){return new Kf(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})(),UE=(()=>{class n{}return n.NOOP=new rO,n})();const jE="ng-enter",Iy="ng-leave",My="ng-trigger",xy=".ng-trigger",sO="ng-animating",qE=".ng-animating";function Eo(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:zE(parseFloat(e[1]),e[2])}function zE(n,e){return"s"===e?1e3*n:n}function Ry(n,e,t){return n.hasOwnProperty("duration")?n:function t3(n,e,t){let i,s=0,o="";if("string"==typeof n){const l=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return e.push(YR()),{duration:0,delay:0,easing:""};i=zE(parseFloat(l[1]),l[2]);const u=l[3];null!=u&&(s=zE(parseFloat(u),l[4]));const d=l[5];d&&(o=d)}else i=n;if(!t){let l=!1,u=e.length;i<0&&(e.push(function g8(){return new U(3100,!1)}()),l=!0),s<0&&(e.push(function m8(){return new U(3101,!1)}()),l=!0),l&&e.splice(u,0,YR())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Yf(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function oO(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Na(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function lO(n,e,t){return t?e+":"+t+";":""}function cO(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=lO(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=lO(0,o3(t),n.style[t]));n.setAttribute("style",e)}function Us(n,e,t){n.style&&(e.forEach((r,i)=>{const s=WE(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),NE()&&cO(n))}function Zl(n,e){n.style&&(e.forEach((t,r)=>{const i=WE(r);n.style[i]=""}),NE()&&cO(n))}function Zf(n){return Array.isArray(n)?1==n.length?n[0]:UR(n):n}const GE=new RegExp("{{\\s*(.+?)\\s*}}","g");function uO(n){let e=[];if("string"==typeof n){let t;for(;t=GE.exec(n);)e.push(t[1]);GE.lastIndex=0}return e}function Qf(n,e,t){const r=n.toString(),i=r.replace(GE,(s,o)=>{let l=e[o];return null==l&&(t.push(function y8(n){return new U(3003,!1)}()),l=""),l.toString()});return i==r?n:i}function Oy(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const s3=/-+([a-z0-9])/g;function WE(n){return n.replace(s3,(...e)=>e[1].toUpperCase())}function o3(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ii(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function v8(n){return new U(3004,!1)}()}}function dO(n,e){return window.getComputedStyle(n)[e]}function h3(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function f3(n,e,t){if(":"==n[0]){const u=function p3(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function P8(n){return new U(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof u)return void e.push(u);n=u}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function O8(n){return new U(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(hO(i,o));"<"==s[0]&&!("*"==i&&"*"==o)&&e.push(hO(o,i))}(r,t,e)):t.push(n),t}const Ny=new Set(["true","1"]),Ly=new Set(["false","0"]);function hO(n,e){const t=Ny.has(n)||Ly.has(n),r=Ny.has(e)||Ly.has(e);return(i,s)=>{let o="*"==n||n==i,l="*"==e||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?Ny.has(n):Ly.has(n)),!l&&r&&"boolean"==typeof s&&(l=s?Ny.has(e):Ly.has(e)),o&&l}}const g3=new RegExp("s*:selfs*,?","g");function KE(n,e,t,r){return new m3(n).build(e,t,r)}class m3{constructor(e){this._driver=e}build(e,t,r){const i=new v3(t);return this._resetContextStyleTimingState(i),ii(this,Zf(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function C8(){return new U(3006,!1)}()),e.definitions.forEach(l=>{if(this._resetContextStyleTimingState(t),0==l.type){const u=l,d=u.name;d.toString().split(/\s*,\s*/).forEach(f=>{u.name=f,s.push(this.visitState(u,t))}),u.name=d}else if(1==l.type){const u=this.visitTransition(l,t);r+=u.queryCount,i+=u.depCount,o.push(u)}else t.errors.push(function b8(){return new U(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(l=>{l instanceof Map&&l.forEach(u=>{uO(u).forEach(d=>{o.hasOwnProperty(d)||s.add(d)})})}),s.size&&(Oy(s.values()),t.errors.push(function E8(n,e){return new U(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ii(this,Zf(e.animation),t);return{type:1,matchers:h3(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ql(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ii(this,r,t)),options:Ql(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const l=ii(this,o,t);return i=Math.max(i,t.currentTime),l});return t.currentTime=i,{type:3,steps:s,options:Ql(e.options)}}visitAnimate(e,t){const r=function C3(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return YE(Ry(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=YE(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=Ry(t,e);return YE(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Gu({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,l=!1;if(!o){l=!0;const d={};r.easing&&(d.easing=r.easing),o=Gu(d)}t.currentTime+=r.duration+r.delay;const u=this.visitStyle(o,t);u.isEmptyStep=l,i=u}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let l of i)"string"==typeof l?l===bo?r.push(l):t.errors.push(new U(3002,!1)):r.push(oO(l));let s=!1,o=null;return r.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(o=l.get("easing"),l.delete("easing")),!s))for(let u of l.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,u)=>{const d=t.collectedStyles.get(t.currentQuerySelector),f=d.get(u);let p=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push(function S8(n,e,t,r,i){return new U(3010,!1)}()),p=!1),s=f.startTime),p&&d.set(u,{startTime:s,endTime:i}),t.options&&function r3(n,e,t){const r=e.params||{},i=uO(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function _8(n){return new U(3001,!1)}())})}(l,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function T8(){return new U(3011,!1)}()),r;let s=0;const o=[];let l=!1,u=!1,d=0;const f=e.steps.map(V=>{const G=this._makeStyleAst(V,t);let C=null!=G.offset?G.offset:function w3(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(G.styles),W=0;return null!=C&&(s++,W=G.offset=C),u=u||W<0||W>1,l=l||W<d,d=W,o.push(W),G});u&&t.errors.push(function A8(){return new U(3012,!1)}()),l&&t.errors.push(function I8(){return new U(3200,!1)}());const p=e.steps.length;let y=0;s>0&&s<p?t.errors.push(function M8(){return new U(3202,!1)}()):0==s&&(y=1/(p-1));const v=p-1,b=t.currentTime,I=t.currentAnimateTimings,L=I.duration;return f.forEach((V,G)=>{const C=y>0?G==v?1:y*G:o[G],W=C*L;t.currentTime=b+I.delay+W,I.duration=W,this._validateStyleAst(V,t),V.offset=C,r.styles.push(V)}),r}visitReference(e,t){return{type:8,animation:ii(this,Zf(e.animation),t),options:Ql(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ql(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ql(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function _3(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(g3,"")),n=n.replace(/@\*/g,xy).replace(/@\w+/g,t=>xy+"-"+t.slice(1)).replace(/:animating/g,qE),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,ri(t.collectedStyles,t.currentQuerySelector,new Map);const l=ii(this,Zf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:l,originalSelector:e.selector,options:Ql(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function x8(){return new U(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Ry(e.timings,t.errors,!0);return{type:12,animation:ii(this,Zf(e.animation),t),timings:r,options:null}}}class v3{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ql(n){return n?(n=Yf(n)).params&&(n.params=function y3(n){return n?Yf(n):null}(n.params)):n={},n}function YE(n,e,t){return{duration:n,delay:e,easing:t}}function ZE(n,e,t,r,i,s,o=null,l=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:l}}class $y{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const D3=new RegExp(":enter","g"),T3=new RegExp(":leave","g");function QE(n,e,t,r,i,s=new Map,o=new Map,l,u,d=[]){return(new A3).buildKeyframes(n,e,t,r,i,s,o,l,u,d)}class A3{buildKeyframes(e,t,r,i,s,o,l,u,d,f=[]){d=d||new $y;const p=new XE(e,t,d,i,s,f,[]);p.options=u;const y=u.delay?Eo(u.delay):0;p.currentTimeline.delayNextStep(y),p.currentTimeline.setStyles([o],null,p.errors,u),ii(this,r,p);const v=p.timelines.filter(b=>b.containsAnimation());if(v.length&&l.size){let b;for(let I=v.length-1;I>=0;I--){const L=v[I];if(L.element===t){b=L;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([l],null,p.errors,u)}return v.length?v.map(b=>b.buildKeyframes()):[ZE(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:Eo(Qf(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Eo(r.duration):null,l=null!=r.delay?Eo(r.delay):null;return 0!==o&&e.forEach(u=>{const d=t.appendInstructionToTimeline(u,o,l);s=Math.max(s,d.duration+d.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ii(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Vy);const o=Eo(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ii(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Eo(e.options.delay):0;e.steps.forEach(o=>{const l=t.createSubContext(e.options);s&&l.delayNextStep(s),ii(this,o,l),i=Math.max(i,l.currentTimeline.currentTime),r.push(l.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Ry(t.params?Qf(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,l=t.createSubContext().currentTimeline;l.easing=r.easing,e.styles.forEach(u=>{l.forwardTime((u.offset||0)*s),l.setStyles(u.styles,u.easing,t.errors,t.options),l.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(l),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Eo(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Vy);let o=r;const l=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=l.length;let u=null;l.forEach((d,f)=>{t.currentQueryIndex=f;const p=t.createSubContext(e.options,d);s&&p.delayNextStep(s),d===t.element&&(u=p.currentTimeline),ii(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,p.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),l=o*(t.currentQueryTotal-1);let u=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=l-u;break;case"full":u=r.currentStaggerTime}const f=t.currentTimeline;u&&f.delayNextStep(u);const p=f.currentTime;ii(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}}const Vy={};class XE{constructor(e,t,r,i,s,o,l,u){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Vy,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new By(this._driver,t,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Eo(r.duration)),null!=r.delay&&(i.delay=Eo(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(l=>{(!t||!o.hasOwnProperty(l))&&(o[l]=Qf(s[l],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new XE(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Vy,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new I3(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let l=[];if(i&&l.push(this.element),e.length>0){e=(e=e.replace(D3,"."+this._enterClassName)).replace(T3,"."+this._leaveClassName);let d=this._driver.query(this.element,e,1!=r);0!==r&&(d=r<0?d.slice(d.length+r,d.length):d.slice(0,r)),l.push(...d)}return!s&&0==l.length&&o.push(function R8(n){return new U(3014,!1)}()),l}}class By{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new By(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||bo),this._currentKeyframe.set(t,bo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function M3(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,bo)}else Na(i,t)}),t}(e,this._globalTimelineStyles);for(let[l,u]of o){const d=Qf(u,s,r);this._pendingStyles.set(l,d),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??bo),this._updateStyle(l,d)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((l,u)=>{const d=Na(l,new Map,this._backFill);d.forEach((f,p)=>{"!"===f?e.add(p):f===bo&&t.add(p)}),r||d.set("offset",u/this.duration),i.push(d)});const s=e.size?Oy(e.values()):[],o=t.size?Oy(t.values()):[];if(r){const l=i[0],u=new Map(l);l.set("offset",0),u.set("offset",1),i=[l,u]}return ZE(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class I3 extends By{constructor(e,t,r,i,s,o,l=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=l,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,l=t/o,u=Na(e[0]);u.set("offset",0),s.push(u);const d=Na(e[0]);d.set("offset",gO(l)),s.push(d);const f=e.length-1;for(let p=1;p<=f;p++){let y=Na(e[p]);const v=y.get("offset");y.set("offset",gO((t+v*r)/o)),s.push(y)}r=o,t=0,i="",e=s}return ZE(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function gO(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class JE{}const x3=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class R3 extends JE{normalizePropertyName(e,t){return WE(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(x3.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const l=r.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&0==l[1].length&&i.push(function w8(n,e){return new U(3005,!1)}())}return o+s}}function mO(n,e,t,r,i,s,o,l,u,d,f,p,y){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:l,queriedElements:u,preStyleProps:d,postStyleProps:f,totalTime:p,errors:y}}const eD={};class _O{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function O3(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,l,u,d,f){const p=[],y=this.ast.options&&this.ast.options.params||eD,b=this.buildStyles(r,l&&l.params||eD,p),I=u&&u.params||eD,L=this.buildStyles(i,I,p),V=new Set,G=new Map,C=new Map,W="void"===i,Re={params:P3(I,y),delay:this.ast.options?.delay},He=f?[]:QE(e,t,this.ast.animation,s,o,b,L,Re,d,p);let Rt=0;if(He.forEach(bn=>{Rt=Math.max(bn.duration+bn.delay,Rt)}),p.length)return mO(t,this._triggerName,r,i,W,b,L,[],[],G,C,Rt,p);He.forEach(bn=>{const cr=bn.element,Va=ri(G,cr,new Set);bn.preStyleProps.forEach(D=>Va.add(D));const Mi=ri(C,cr,new Set);bn.postStyleProps.forEach(D=>Mi.add(D)),cr!==t&&V.add(cr)});const lr=Oy(V.values());return mO(t,this._triggerName,r,i,W,b,L,He,lr,G,C,Rt)}}function P3(n,e){const t=Yf(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class k3{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Yf(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,l)=>{o&&(o=Qf(o,i,t));const u=this.normalizer.normalizePropertyName(l,t);o=this.normalizer.normalizeStyleValue(l,u,o,t),r.set(u,o)})}),r}}class N3{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new k3(i.style,i.options&&i.options.params||{},r))}),yO(this.states,"true","1"),yO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new _O(e,i,this.states))}),this.fallbackTransition=function L3(n,e,t){return new _O(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,l)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function yO(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const $3=new $y;class V3{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=KE(this._driver,t,r,[]);if(r.length)throw function $8(n){return new U(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=ZR(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const l=new Map;if(s?(o=QE(this._driver,t,s,jE,Iy,new Map,new Map,r,$3,i),o.forEach(f=>{const p=ri(l,f.element,new Map);f.postStyleProps.forEach(y=>p.set(y,null))})):(i.push(function V8(){return new U(3300,!1)}()),o=[]),i.length)throw function B8(n){return new U(3504,!1)}();l.forEach((f,p)=>{f.forEach((y,v)=>{f.set(v,this._driver.computeStyle(p,v,bo))})});const d=Fa(o.map(f=>{const p=l.get(f.element);return this._buildPlayer(f,new Map,p)}));return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function H8(n){return new U(3301,!1)}();return t}listen(e,t,r,i){const s=VE(t,"","","");return LE(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const vO="ng-animate-queued",tD="ng-animate-disabled",q3=[],wO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},z3={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ai="__ng_removed";class nD{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Y3(n){return n??null}(r?e.value:e),r){const s=Yf(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Xf="void",rD=new nD(Xf);class G3{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ii(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function U8(n,e){return new U(3302,!1)}();if(null==r||0==r.length)throw function j8(n){return new U(3303,!1)}();if(!function Z3(n){return"start"==n||"done"==n}(r))throw function q8(n,e){return new U(3400,!1)}();const s=ri(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const l=ri(this._engine.statesByElement,e,new Map);return l.has(t)||(Ii(e,My),Ii(e,My+"-"+t),l.set(t,rD)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(t)||l.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function z8(n){return new U(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new iD(this.id,t,e);let l=this._engine.statesByElement.get(e);l||(Ii(e,My),Ii(e,My+"-"+t),this._engine.statesByElement.set(e,l=new Map));let u=l.get(t);const d=new nD(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&d.absorbOptions(u.options),l.set(t,d),u||(u=rD),d.value!==Xf&&u.value===d.value){if(!function J3(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(u.params,d.params)){const I=[],L=s.matchStyles(u.value,u.params,I),V=s.matchStyles(d.value,d.params,I);I.length?this._engine.reportError(I):this._engine.afterFlush(()=>{Zl(e,L),Us(e,V)})}return}const y=ri(this._engine.playersByElement,e,[]);y.forEach(I=>{I.namespaceId==this.id&&I.triggerName==t&&I.queued&&I.destroy()});let v=s.matchTransition(u.value,d.value,e,d.params),b=!1;if(!v){if(!i)return;v=s.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:v,fromState:u,toState:d,player:o,isFallbackTransition:b}),b||(Ii(e,vO),o.onStart(()=>{Wu(e,vO)})),o.onDone(()=>{let I=this.players.indexOf(o);I>=0&&this.players.splice(I,1);const L=this._engine.playersByElement.get(e);if(L){let V=L.indexOf(o);V>=0&&L.splice(V,1)}}),this.players.push(o),y.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,xy,!0);r.forEach(i=>{if(i[Ai])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const l=[];if(s.forEach((u,d)=>{if(o.set(d,u.value),this._triggers.has(d)){const f=this.trigger(e,d,Xf,i);f&&l.push(f)}}),l.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Fa(l).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const u=this._triggers.get(o).fallbackTransition,d=r.get(o)||rD,f=new nD(Xf),p=new iD(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:u,fromState:d,toState:f,player:p,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ai];(!s||s===wO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ii(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(l=>{if(l.name==r.triggerName){const u=VE(s,r.triggerName,r.fromState.value,r.toState.value);u._data=e,LE(r.player,l.phase,u,l.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class W3{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new G3(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,l=this.driver.getParentElement(t);for(;l;){const u=i.get(l);if(u){const d=r.indexOf(u);r.splice(d+1,0,e),o=!0;break}l=this.driver.getParentElement(l)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(Hy(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Hy(t))return;const s=t[Ai];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ii(e,tD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Wu(e,tD))}removeNode(e,t,r,i){if(Hy(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Ai]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Hy(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,xy,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,qE,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Fa(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ai];if(t&&t.setForRemoval){if(e[Ai]=wO,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(tD)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ii(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Fa(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function G8(n){return new U(3402,!1)}()}_flushAnimations(e,t){const r=new $y,i=[],s=new Map,o=[],l=new Map,u=new Map,d=new Map,f=new Set;this.disabledNodes.forEach(S=>{f.add(S);const R=this.driver.query(S,".ng-animate-queued",!0);for(let x=0;x<R.length;x++)f.add(R[x])});const p=this.bodyNode,y=Array.from(this.statesByElement.keys()),v=EO(y,this.collectedEnterElements),b=new Map;let I=0;v.forEach((S,R)=>{const x=jE+I++;b.set(R,x),S.forEach(be=>Ii(be,x))});const L=[],V=new Set,G=new Set;for(let S=0;S<this.collectedLeaveElements.length;S++){const R=this.collectedLeaveElements[S],x=R[Ai];x&&x.setForRemoval&&(L.push(R),V.add(R),x.hasAnimation?this.driver.query(R,".ng-star-inserted",!0).forEach(be=>V.add(be)):G.add(R))}const C=new Map,W=EO(y,Array.from(V));W.forEach((S,R)=>{const x=Iy+I++;C.set(R,x),S.forEach(be=>Ii(be,x))}),e.push(()=>{v.forEach((S,R)=>{const x=b.get(R);S.forEach(be=>Wu(be,x))}),W.forEach((S,R)=>{const x=C.get(R);S.forEach(be=>Wu(be,x))}),L.forEach(S=>{this.processLeaveNode(S)})});const Re=[],He=[];for(let S=this._namespaceList.length-1;S>=0;S--)this._namespaceList[S].drainQueuedTransitions(t).forEach(x=>{const be=x.player,Te=x.element;if(Re.push(be),this.collectedEnterElements.length){const ur=Te[Ai];if(ur&&ur.setForMove){if(ur.previousTriggersValues&&ur.previousTriggersValues.has(x.triggerName)){const nc=ur.previousTriggersValues.get(x.triggerName),xi=this.statesByElement.get(x.element);if(xi&&xi.has(x.triggerName)){const Zy=xi.get(x.triggerName);Zy.value=nc,xi.set(x.triggerName,Zy)}}return void be.destroy()}}const tn=!p||!this.driver.containsElement(p,Te),me=C.get(Te),is=b.get(Te),Ot=this._buildInstruction(x,r,is,me,tn);if(Ot.errors&&Ot.errors.length)return void He.push(Ot);if(tn)return be.onStart(()=>Zl(Te,Ot.fromStyles)),be.onDestroy(()=>Us(Te,Ot.toStyles)),void i.push(be);if(x.isFallbackTransition)return be.onStart(()=>Zl(Te,Ot.fromStyles)),be.onDestroy(()=>Us(Te,Ot.toStyles)),void i.push(be);const CP=[];Ot.timelines.forEach(ur=>{ur.stretchStartingKeyframe=!0,this.disabledNodes.has(ur.element)||CP.push(ur)}),Ot.timelines=CP,r.append(Te,Ot.timelines),o.push({instruction:Ot,player:be,element:Te}),Ot.queriedElements.forEach(ur=>ri(l,ur,[]).push(be)),Ot.preStyleProps.forEach((ur,nc)=>{if(ur.size){let xi=u.get(nc);xi||u.set(nc,xi=new Set),ur.forEach((Zy,ID)=>xi.add(ID))}}),Ot.postStyleProps.forEach((ur,nc)=>{let xi=d.get(nc);xi||d.set(nc,xi=new Set),ur.forEach((Zy,ID)=>xi.add(ID))})});if(He.length){const S=[];He.forEach(R=>{S.push(function W8(n,e){return new U(3505,!1)}())}),Re.forEach(R=>R.destroy()),this.reportError(S)}const Rt=new Map,lr=new Map;o.forEach(S=>{const R=S.element;r.has(R)&&(lr.set(R,R),this._beforeAnimationBuild(S.player.namespaceId,S.instruction,Rt))}),i.forEach(S=>{const R=S.element;this._getPreviousPlayers(R,!1,S.namespaceId,S.triggerName,null).forEach(be=>{ri(Rt,R,[]).push(be),be.destroy()})});const bn=L.filter(S=>SO(S,u,d)),cr=new Map;bO(cr,this.driver,G,d,bo).forEach(S=>{SO(S,u,d)&&bn.push(S)});const Mi=new Map;v.forEach((S,R)=>{bO(Mi,this.driver,new Set(S),u,"!")}),bn.forEach(S=>{const R=cr.get(S),x=Mi.get(S);cr.set(S,new Map([...Array.from(R?.entries()??[]),...Array.from(x?.entries()??[])]))});const D=[],Do=[],Ba={};o.forEach(S=>{const{element:R,player:x,instruction:be}=S;if(r.has(R)){if(f.has(R))return x.onDestroy(()=>Us(R,be.toStyles)),x.disabled=!0,x.overrideTotalTime(be.totalTime),void i.push(x);let Te=Ba;if(lr.size>1){let me=R;const is=[];for(;me=me.parentNode;){const Ot=lr.get(me);if(Ot){Te=Ot;break}is.push(me)}is.forEach(Ot=>lr.set(Ot,Te))}const tn=this._buildAnimation(x.namespaceId,be,Rt,s,Mi,cr);if(x.setRealPlayer(tn),Te===Ba)D.push(x);else{const me=this.playersByElement.get(Te);me&&me.length&&(x.parentPlayer=Fa(me)),i.push(x)}}else Zl(R,be.fromStyles),x.onDestroy(()=>Us(R,be.toStyles)),Do.push(x),f.has(R)&&i.push(x)}),Do.forEach(S=>{const R=s.get(S.element);if(R&&R.length){const x=Fa(R);S.setRealPlayer(x)}}),i.forEach(S=>{S.parentPlayer?S.syncPlayerEvents(S.parentPlayer):S.destroy()});for(let S=0;S<L.length;S++){const R=L[S],x=R[Ai];if(Wu(R,Iy),x&&x.hasAnimation)continue;let be=[];if(l.size){let tn=l.get(R);tn&&tn.length&&be.push(...tn);let me=this.driver.query(R,qE,!0);for(let is=0;is<me.length;is++){let Ot=l.get(me[is]);Ot&&Ot.length&&be.push(...Ot)}}const Te=be.filter(tn=>!tn.destroyed);Te.length?Q3(this,R,Te):this.processLeaveNode(R)}return L.length=0,D.forEach(S=>{this.players.push(S),S.onDone(()=>{S.destroy();const R=this.players.indexOf(S);this.players.splice(R,1)}),S.play()}),D}elementContainsData(e,t){let r=!1;const i=t[Ai];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const l=this.playersByQueriedElement.get(e);l&&(o=l)}else{const l=this.playersByElement.get(e);if(l){const u=!s||s==Xf;l.forEach(d=>{d.queued||!u&&d.triggerName!=i||o.push(d)})}}return(r||i)&&(o=o.filter(l=>!(r&&r!=l.namespaceId||i&&i!=l.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,l=t.isRemovalTransition?void 0:t.triggerName;for(const u of t.timelines){const d=u.element,f=d!==s,p=ri(r,d,[]);this._getPreviousPlayers(d,f,o,l,t.toState).forEach(v=>{const b=v.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),v.destroy(),p.push(v)})}Zl(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const l=t.triggerName,u=t.element,d=[],f=new Set,p=new Set,y=t.timelines.map(b=>{const I=b.element;f.add(I);const L=I[Ai];if(L&&L.removedBeforeQueried)return new Kf(b.duration,b.delay);const V=I!==u,G=function X3(n){const e=[];return DO(n,e),e}((r.get(I)||q3).map(Rt=>Rt.getRealPlayer())).filter(Rt=>!!Rt.element&&Rt.element===I),C=s.get(I),W=o.get(I),Re=ZR(0,this._normalizer,0,b.keyframes,C,W),He=this._buildPlayer(b,Re,G);if(b.subTimeline&&i&&p.add(I),V){const Rt=new iD(e,l,I);Rt.setRealPlayer(He),d.push(Rt)}return He});d.forEach(b=>{ri(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function K3(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,b.element,b))}),f.forEach(b=>Ii(b,sO));const v=Fa(y);return v.onDestroy(()=>{f.forEach(b=>Wu(b,sO)),Us(u,t.toStyles)}),p.forEach(b=>{ri(i,b,[]).push(v)}),v}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Kf(e.duration,e.delay)}}class iD{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Kf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>LE(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ri(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Hy(n){return n&&1===n.nodeType}function CO(n,e){const t=n.style.display;return n.style.display=e??"none",t}function bO(n,e,t,r,i){const s=[];t.forEach(u=>s.push(CO(u)));const o=[];r.forEach((u,d)=>{const f=new Map;u.forEach(p=>{const y=e.computeStyle(d,p,i);f.set(p,y),(!y||0==y.length)&&(d[Ai]=z3,o.push(d))}),n.set(d,f)});let l=0;return t.forEach(u=>CO(u,s[l++])),o}function EO(n,e){const t=new Map;if(n.forEach(l=>t.set(l,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(l){if(!l)return 1;let u=s.get(l);if(u)return u;const d=l.parentNode;return u=t.has(d)?d:i.has(d)?1:o(d),s.set(l,u),u}return e.forEach(l=>{const u=o(l);1!==u&&t.get(u).push(l)}),t}function Ii(n,e){n.classList?.add(e)}function Wu(n,e){n.classList?.remove(e)}function Q3(n,e,t){Fa(t).onDone(()=>n.processLeaveNode(e))}function DO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof KR?DO(r.players,e):e.push(r)}}function SO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class Uy{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new W3(e,t,r),this._timelineEngine=new V3(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let l=this._triggerCache[o];if(!l){const u=[],f=KE(this._driver,s,u,[]);if(u.length)throw function N8(n,e){return new U(3404,!1)}();l=function F3(n,e,t){return new N3(n,e,t)}(i,f,this._normalizer),this._triggerCache[o]=l}this._transitionEngine.registerTrigger(t,i,l)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=QR(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,l]=QR(r);return this._timelineEngine.listen(o,t,l,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let t6=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Us(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Us(this._element,this._initialStyles),this._endStyles&&(Us(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Zl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zl(this._element,this._endStyles),this._endStyles=null),Us(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function sD(n){let e=null;return n.forEach((t,r)=>{(function n6(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class TO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:dO(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class r6{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return tO(e,t)}getParentElement(e){return HE(e)}query(e,t,r){return nO(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const u={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(u.easing=s);const d=new Map,f=o.filter(v=>v instanceof TO);(function a3(n,e){return 0===n||0===e})(r,i)&&f.forEach(v=>{v.currentSnapshot.forEach((b,I)=>d.set(I,b))});let p=function n3(n){return n.length?n[0]instanceof Map?n:n.map(e=>oO(e)):[]}(t).map(v=>Na(v));p=function l3(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(l=>o.set(l,dO(n,l)))}}return e}(e,p,d);const y=function e6(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=sD(e[0]),e.length>1&&(r=sD(e[e.length-1]))):e instanceof Map&&(t=sD(e)),t||r?new t6(n,t,r):null}(e,p);return new TO(e,p,u,y)}}let i6=(()=>{class n extends VR{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Sr.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?UR(t):t;return AO(this._renderer,null,r,"register",[i]),new s6(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(k(Sl),k(ze))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();class s6 extends class f8{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new o6(this._id,e,t||{},this._renderer)}}class o6{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return AO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function AO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const IO="@.disabled";let a6=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const l=o?.parentNode(s);l&&o.removeChild(l,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let f=this._rendererCache.get(s);return f||(f=new MO("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,f)),f}const o=r.id,l=r.id+"-"+this._currentId;this._currentId++,this.engine.register(l,t);const u=f=>{Array.isArray(f)?f.forEach(u):this.engine.registerTrigger(o,l,t,f.name,f)};return r.data.animation.forEach(u),new l6(this,l,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,l]=s;o(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(k(Sl),k(Uy),k(We))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();class MO{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==IO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class l6 extends MO{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==IO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function c6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function u6(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,l=>{this.factory.scheduleListenerCallback(l._data||-1,r,l)})}return this.delegate.listen(e,t,r)}}let d6=(()=>{class n extends Uy{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(k(ze),k(UE),k(JE),k(Pu))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();const xO=[{provide:VR,useClass:i6},{provide:JE,useFactory:function h6(){return new R3}},{provide:Uy,useClass:d6},{provide:Sl,useFactory:function f6(n,e,t){return new a6(n,e,t)},deps:[$_,Uy,We]}],oD=[{provide:UE,useFactory:()=>new r6},{provide:Ou,useValue:"BrowserAnimations"},...xO],RO=[{provide:UE,useClass:rO},{provide:Ou,useValue:"NoopAnimations"},...xO];let p6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?RO:oD}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({providers:oD,imports:[kM]}),n})();function ep(n,e=0){return function g6(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function OO(n){return Array.isArray(n)?n:[n]}function hn(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Xl(n){return n instanceof Ft?n.nativeElement:n}const m6=["addListener","removeListener"],_6=["addEventListener","removeEventListener"],y6=["on","off"];function aD(n,e,t,r){if(Ze(t)&&(r=t,t=void 0),r)return aD(n,e,t).pipe(xb(r));const[i,s]=function C6(n){return Ze(n.addEventListener)&&Ze(n.removeEventListener)}(n)?_6.map(o=>l=>n[o](e,l,t)):function v6(n){return Ze(n.addListener)&&Ze(n.removeListener)}(n)?m6.map(PO(n,e)):function w6(n){return Ze(n.on)&&Ze(n.off)}(n)?y6.map(PO(n,e)):[];if(!i&&id(n))return nn(o=>aD(o,e,t))(Kn(n));if(!i)throw new TypeError("Invalid event target");return new wt(o=>{const l=(...u)=>o.next(1<u.length?u:u[0]);return i(l),()=>s(l)})}function PO(n,e){return t=>r=>n[t](e,r)}class b6 extends fn{constructor(e,t){super()}schedule(e,t=0){return this}}const qy={setInterval(n,e,...t){const{delegate:r}=qy;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=qy;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class lD extends b6{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return qy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&qy.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,kn(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const tp={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=tp;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new fn(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=tp;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=tp;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},kO={now:()=>(kO.delegate||Date).now(),delegate:void 0};class np{constructor(e,t=np.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}np.now=kO.now;class cD extends np{constructor(e,t=np.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}new class D6 extends cD{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class E6 extends lD{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=tp.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(tp.cancelAnimationFrame(t),e._scheduled=void 0)}});let uD,T6=1;const zy={};function FO(n){return n in zy&&(delete zy[n],!0)}const A6={setImmediate(n){const e=T6++;return zy[e]=!0,uD||(uD=Promise.resolve()),uD.then(()=>FO(e)&&n()),e},clearImmediate(n){FO(n)}},{setImmediate:I6,clearImmediate:M6}=A6,Gy={setImmediate(...n){const{delegate:e}=Gy;return(e?.setImmediate||I6)(...n)},clearImmediate(n){const{delegate:e}=Gy;return(e?.clearImmediate||M6)(n)},delegate:void 0},dD=(new class R6 extends cD{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class x6 extends lD{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Gy.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(Gy.clearImmediate(t),e._scheduled=void 0)}}),new cD(lD)),P6=dD;function NO(n,e=dD){return function k6(n){return Pt((e,t)=>{let r=!1,i=null,s=null,o=!1;const l=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const d=i;i=null,t.next(d)}o&&t.complete()},u=()=>{s=null,o&&t.complete()};e.subscribe(st(t,d=>{r=!0,i=d,s||Kn(n(d)).subscribe(s=st(t,l,u))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>function N6(n=0,e,t=P6){let r=-1;return null!=e&&(bp(e)?t=e:r=e),new wt(i=>{let s=function F6(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e))}let hD;try{hD=typeof Intl<"u"&&Intl.v8BreakIterator}catch{hD=!1}let rp,Jl,pD,rs=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function l$(n){return n===fM}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!hD)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(k(p_))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fD(n){return function L6(){if(null==rp&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>rp=!0}))}finally{rp=rp||!1}return rp}()?n:!!n.capture}function $6(){if(null==Jl){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Jl=!1,Jl;if("scrollBehavior"in document.documentElement.style)Jl=!0;else{const n=Element.prototype.scrollTo;Jl=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Jl}function $O(n){if(function V6(){if(null==pD){const n=typeof document<"u"?document.head:null;pD=!(!n||!n.createShadowRoot&&!n.attachShadow)}return pD}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function gD(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function ec(n){return n.composedPath?n.composedPath()[0]:n.target}function mD(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const B6=new X("cdk-dir-doc",{providedIn:"root",factory:function H6(){return St(ze)}}),U6=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let _D=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new it,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function j6(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?U6.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(k(B6,8))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ip=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({}),n})(),z6=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new gt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new wt(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(NO(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ae()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Cr(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Xl(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>aD(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(k(We),k(rs),k(ze,8))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yD=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new gt,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(NO(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(k(rs),k(We),k(ze,8))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({}),n})(),BO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({imports:[[ip,VO],ip,VO]}),n})();class vD{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class wD extends vD{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class HO extends vD{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class W6 extends vD{constructor(e){super(),this.element=e instanceof Ft?e.nativeElement:e}}class CD{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof wD?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof HO?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof W6?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class K6 extends CD{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{const l=o.element,u=this._document.createComment("dom-portal");l.parentNode.insertBefore(u,l),this.outletElement.appendChild(l),this._attachedPortal=o,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(l,u)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||an.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let UO=(()=>{class n extends CD{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new it,this.attachDomPortal=s=>{const o=s.element,l=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(l,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(o,l)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(F(lo),F(bi),F(ze))},n.\u0275dir=ie({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[qe]}),n})(),jO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({}),n})();function qO(n){return Pt((e,t)=>{Kn(n).subscribe(st(t,()=>t.complete(),ss)),!t.closed&&e.subscribe(t)})}const zO=$6();class Y6{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=hn(-this._previousScrollPosition.left),e.style.top=hn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),zO&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),zO&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class Z6{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class GO{enable(){}disable(){}attach(){}}function bD(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function WO(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Q6{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();bD(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let X6=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new GO,this.close=o=>new Z6(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Y6(this._viewportRuler,this._document),this.reposition=o=>new Q6(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(k(z6),k(yD),k(We),k(ze))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class KO{constructor(e){if(this.scrollStrategy=new GO,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class J6{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let YO=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(k(ze))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),e7=(()=>{class n extends YO{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const l=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(i)):l.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(k(ze),k(We,8))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),t7=(()=>{class n extends YO{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=ec(s)},this._clickListener=s=>{const o=ec(s),l="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const u=this._attachedOverlays.slice();for(let d=u.length-1;d>-1;d--){const f=u[d];if(f._outsidePointerEvents.observers.length<1||!f.hasAttached())continue;if(f.overlayElement.contains(o)||f.overlayElement.contains(l))break;const p=f._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(s)):p.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(k(ze),k(rs),k(We,8))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ED=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||mD()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),mD()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(k(ze),k(rs))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class n7{constructor(e,t,r,i,s,o,l,u,d){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=l,this._location=u,this._outsideClickDispatcher=d,this._backdropElement=null,this._backdropClick=new gt,this._attachments=new gt,this._detachments=new gt,this._locationChanges=fn.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new gt,this._outsidePointerEvents=new gt,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Vs(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=hn(this._config.width),e.height=hn(this._config.height),e.minWidth=hn(this._config.minWidth),e.minHeight=hn(this._config.minHeight),e.maxWidth=hn(this._config.maxWidth),e.maxHeight=hn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;e&&(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const i=OO(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(qO(Ip(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const ZO="cdk-overlay-connected-position-bounding-box",r7=/([A-Za-z%]+)$/;class i7{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new gt,this._resizeSubscription=fn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(ZO),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let l of this._preferredPositions){let u=this._getOriginPoint(e,i,l),d=this._getOverlayPoint(u,t,l),f=this._getOverlayFit(d,t,r,l);if(f.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(l,u);this._canFitWithFlexibleDimensions(f,d,r)?s.push({position:l,origin:u,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(u,l)}):(!o||o.overlayFit.visibleArea<f.visibleArea)&&(o={overlayFit:f,overlayPoint:d,originPoint:u,position:l,overlayRect:t})}if(s.length){let l=null,u=-1;for(const d of s){const f=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);f>u&&(u=f,l=d)}return this._isPushed=!1,void this._applyPosition(l.position,l.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&tc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ZO),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,l=this._isRtl()?e.left:e.right;i="start"==r.originX?o:l}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=XO(t);let{x:o,y:l}=e,u=this._getOffset(i,"x"),d=this._getOffset(i,"y");u&&(o+=u),d&&(l+=d);let y=0-l,v=l+s.height-r.height,b=this._subtractOverflows(s.width,0-o,o+s.width-r.width),I=this._subtractOverflows(s.height,y,v),L=b*I;return{visibleArea:L,isCompletelyWithinViewport:s.width*s.height===L,fitsInViewportVertically:I===s.height,fitsInViewportHorizontally:b==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=QO(this._overlayRef.getConfig().minHeight),l=QO(this._overlayRef.getConfig().minWidth),d=e.fitsInViewportHorizontally||null!=l&&l<=s;return(e.fitsInViewportVertically||null!=o&&o<=i)&&d}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=XO(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),l=Math.max(e.y+i.height-s.height,0),u=Math.max(s.top-r.top-e.y,0),d=Math.max(s.left-r.left-e.x,0);let f=0,p=0;return f=i.width<=s.width?d||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,p=i.height<=s.height?u||-l:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:f,y:p},{x:e.x+f,y:e.y+p}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new J6(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,l,f,p,y;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)l=r.height-e.y+2*this._viewportMargin,s=r.height-l+this._viewportMargin;else{const v=Math.min(r.bottom-e.y+r.top,e.y),b=this._lastBoundingBoxSize.height;s=2*v,o=e.y-v,s>b&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-b/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)y=r.width-e.x+this._viewportMargin,f=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)p=e.x,f=r.right-e.x;else{const v=Math.min(r.right-e.x+r.left,e.x),b=this._lastBoundingBoxSize.width;f=2*v,p=e.x-v,f>b&&!this._isInitialRender&&!this._growAfterOpen&&(p=e.x-b/2)}return{top:o,left:p,bottom:l,right:y,width:f,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=hn(r.height),i.top=hn(r.top),i.bottom=hn(r.bottom),i.width=hn(r.width),i.left=hn(r.left),i.right=hn(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=hn(s)),o&&(i.maxWidth=hn(o))}this._lastBoundingBoxSize=r,tc(this._boundingBox.style,i)}_resetBoundingBoxStyles(){tc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){tc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const f=this._viewportRuler.getViewportScrollPosition();tc(r,this._getExactOverlayY(t,e,f)),tc(r,this._getExactOverlayX(t,e,f))}else r.position="static";let l="",u=this._getOffset(t,"x"),d=this._getOffset(t,"y");u&&(l+=`translateX(${u}px) `),d&&(l+=`translateY(${d}px)`),r.transform=l.trim(),o.maxHeight&&(i?r.maxHeight=hn(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=hn(o.maxWidth):s&&(r.maxWidth="")),tc(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=hn(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=hn(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:WO(e,r),isOriginOutsideView:bD(e,r),isOverlayClipped:WO(t,r),isOverlayOutsideView:bD(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&OO(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Ft)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function tc(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function QO(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(r7);return t&&"px"!==t?null:parseFloat(e)}return n||null}function XO(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const JO="cdk-global-overlay-wrapper";class s7{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(JO),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:l}=r,u=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),d=!("100%"!==s&&"100vh"!==s||l&&"100%"!==l&&"100vh"!==l);e.position=this._cssPosition,e.marginLeft=u?"0":this._leftOffset,e.marginTop=d?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,u?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(JO),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let o7=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new s7}flexibleConnectedTo(t){return new i7(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(k(yD),k(ze),k(rs),k(ED))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),a7=0,Ky=(()=>{class n{constructor(t,r,i,s,o,l,u,d,f,p,y){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=l,this._ngZone=u,this._document=d,this._directionality=f,this._location=p,this._outsideClickDispatcher=y}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new KO(t);return o.direction=o.direction||this._directionality.value,new n7(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+a7++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Pu)),new K6(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(k(X6),k(ED),k(lo),k(o7),k(e7),k(an),k(We),k(ze),k(_D),k(_f),k(t7))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();const u7={provide:new X("cdk-connected-overlay-scroll-strategy"),deps:[Ky],useFactory:function c7(n){return()=>n.scrollStrategies.reposition()}};let d7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({providers:[Ky,u7],imports:[[ip,jO,BO],BO]}),n})();function C7(n,e){return n===e}let nP=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function S7(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function D7(n){try{return n.frameElement}catch{return null}}(function P7(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===iP(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=iP(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function R7(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function O7(n){return!function A7(n){return function M7(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function T7(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function I7(n){return function x7(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||rP(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(k(rs))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rP(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function iP(n){if(!rP(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class k7{constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Vs(1)).subscribe(e)}}let F7=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new k7(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(k(nP),k(We),k(ze))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const N7=new X("cdk-input-modality-detector-options"),L7={ignoreKeys:[18,17,224,91,16]},Yu=fD({passive:!0,capture:!0});let $7=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new ei(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(l=>l===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ec(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function sP(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(o)?"keyboard":"mouse"),this._mostRecentTarget=ec(o))},this._onTouchstart=o=>{!function oP(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(o)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ec(o)):this._modality.next("keyboard")},this._options={...L7,...s},this.modalityDetected=this._modality.pipe(function v7(n){return Cr((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(function w7(n,e=as){return n=n??C7,Pt((t,r)=>{let i,s=!0;t.subscribe(st(r,o=>{const l=e(o);(s||!n(i,l))&&(s=!1,i=l,r.next(o))}))})}()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Yu),i.addEventListener("mousedown",this._onMousedown,Yu),i.addEventListener("touchstart",this._onTouchstart,Yu)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Yu),document.removeEventListener("mousedown",this._onMousedown,Yu),document.removeEventListener("touchstart",this._onTouchstart,Yu))}}return n.\u0275fac=function(t){return new(t||n)(k(rs),k(We),k(ze),k(N7,8))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const B7=new X("cdk-focus-monitor-default-options"),Yy=fD({passive:!0,capture:!0});let lP=(()=>{class n{constructor(t,r,i,s,o){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new gt,this._rootNodeFocusAndBlurListener=l=>{const u=ec(l),d="focus"===l.type?this._onFocus:this._onBlur;for(let f=u;f;f=f.parentElement)d.call(this,l,f)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,r=!1){const i=Xl(t);if(!this._platform.isBrowser||1!==i.nodeType)return ae(null);const s=$O(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const l={checkChildren:r,subject:new gt,rootNode:s};return this._elementInfo.set(i,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(t){const r=Xl(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Xl(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([l,u])=>this._originChanged(l,r,u)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=ec(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Yy),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Yy)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(qO(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Yy),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Yy),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(k(We),k(rs),k($7),k(ze,8),k(B7,8))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cP="cdk-high-contrast-black-on-white",uP="cdk-high-contrast-white-on-black",DD="cdk-high-contrast-active";let H7=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(DD),t.remove(cP),t.remove(uP),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(DD),t.add(cP)):2===r&&(t.add(DD),t.add(uP))}}}return n.\u0275fac=function(t){return new(t||n)(k(rs),k(ze))},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const j7=new X("mat-sanity-checks",{providedIn:"root",factory:function U7(){return!0}});let La=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!mD()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(k(H7),k(j7,8),k(ze))},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({imports:[[ip],ip]}),n})();function fP(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}let t5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({imports:[[La],La]}),n})();function n5(n,e){}class TD{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const r5={dialogContainer:p8("dialogContainer",[jR("void, exit",Gu({opacity:0,transform:"scale(0.7)"})),jR("enter",Gu({transform:"none"})),qR("* => enter",HR([BR("150ms cubic-bezier(0, 0, 0.2, 1)",Gu({transform:"none",opacity:1})),GR("@*",zR(),{optional:!0})])),qR("* => void, * => exit",HR([BR("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Gu({opacity:0})),GR("@*",zR(),{optional:!0})]))])};let s5=(()=>{class n extends CD{constructor(t,r,i,s,o,l,u,d){super(),this._elementRef=t,this._focusTrapFactory=r,this._changeDetectorRef=i,this._config=o,this._interactivityChecker=l,this._ngZone=u,this._focusMonitor=d,this._animationStateChanged=new it,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=f=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(f)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=gD())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const r=gD(),i=this._elementRef.nativeElement;(!r||r===this._document.body||r===i||i.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=gD();return t===r||t.contains(r)}}return n.\u0275fac=function(t){return new(t||n)(F(Ft),F(F7),F(Ca),F(ze,8),F(TD),F(nP),F(We),F(lP))},n.\u0275dir=ie({type:n,viewQuery:function(t,r){if(1&t&&Mu(UO,7),2&t){let i;ya(i=va())&&(r._portalOutlet=i.first)}},features:[qe]}),n})(),o5=(()=>{class n extends s5{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=on(n)))(r||n)}}(),n.\u0275cmp=Fn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,r){1&t&&o0("@dialogContainer.start",function(s){return r._onAnimationStart(s)})("@dialogContainer.done",function(s){return r._onAnimationDone(s)}),2&t&&(r_("id",r._id),_n("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),u0("@dialogContainer",r._state))},features:[qe],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&yn(0,n5,0,0,"ng-template",0)},dependencies:[UO],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[r5.dialogContainer]}}),n})(),a5=0;class l5{constructor(e,t,r="mat-dialog-"+a5++){this._overlayRef=e,this._containerInstance=t,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new gt,this._afterClosed=new gt,this._beforeClosed=new gt,this._state=0,t._id=r,t._animationStateChanged.pipe(Cr(i=>"opened"===i.state),Vs(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Cr(i=>"closed"===i.state),Vs(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Cr(i=>27===i.keyCode&&!this.disableClose&&!function y7(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(i))).subscribe(i=>{i.preventDefault(),_P(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():_P(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Cr(t=>"closing"===t.state),Vs(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function _P(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const c5=new X("MatDialogData"),u5=new X("mat-dialog-default-options"),yP=new X("mat-dialog-scroll-strategy"),h5={provide:yP,deps:[Ky],useFactory:function d5(n){return()=>n.scrollStrategies.block()}};let f5=(()=>{class n{constructor(t,r,i,s,o,l,u,d,f,p){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=u,this._dialogContainerType=d,this._dialogDataToken=f,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new gt,this._afterOpenedAtThisLevel=new gt,this._ariaHiddenElements=new Map,this.afterAllClosed=Ob(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(gx(void 0))),this._scrollStrategy=l}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){r=function g5(n,e){return{...e,...n}}(r,this._defaultOptions||new TD),r.id&&this.getDialogById(r.id);const i=this._createOverlay(r),s=this._attachDialogContainer(i,r),o=this._attachDialogContent(t,s,i,r);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const r=this._getOverlayConfig(t);return this._overlay.create(r)}_getOverlayConfig(t){const r=new KO({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachDialogContainer(t,r){const s=an.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:TD,useValue:r}]}),o=new wD(this._dialogContainerType,r.viewContainerRef,s,r.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,r,i,s){const o=new this._dialogRefConstructor(i,r,s.id);if(t instanceof xs)r.attachTemplatePortal(new HO(t,null,{$implicit:s.data,dialogRef:o}));else{const l=this._createInjector(s,o,r),u=r.attachComponentPortal(new wD(t,s.viewContainerRef,l,s.componentFactoryResolver));o.componentInstance=u.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,r,i){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:r}];return t.direction&&(!s||!s.get(_D,null,ue.Optional))&&o.push({provide:_D,useValue:{value:t.direction,change:ae()}}),an.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){let s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){cu()},n.\u0275dir=ie({type:n}),n})(),p5=(()=>{class n extends f5{constructor(t,r,i,s,o,l,u,d){super(t,r,s,l,u,o,l5,o5,c5,d)}}return n.\u0275fac=function(t){return new(t||n)(k(Ky),k(an),k(_f,8),k(u5,8),k(yP),k(n,12),k(ED),k(Ou,8))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})(),m5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({providers:[p5,h5],imports:[[d7,jO,La],La]}),n})(),vP=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),w5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({providers:[vP]}),n})(),wP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({}),n})(),k5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({imports:[[wP,t5,La,w5],wP,La]}),n})();function F5(n,e){if(1&n&&(ms(),Wt(0,"circle",4)),2&n){const t=Dt(),r=Eu(1);Su("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),_n("r",t._getCircleRadius())}}function N5(n,e){if(1&n&&(ms(),Wt(0,"circle",4)),2&n){const t=Dt(),r=Eu(1);Su("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),_n("r",t._getCircleRadius())}}const $5=fP(class{constructor(n){this._elementRef=n}},"primary"),V5=new X("mat-progress-spinner-default-options",{providedIn:"root",factory:function B5(){return{diameter:100}}});class $a extends $5{constructor(e,t,r,i,s,o,l,u){super(e),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=fn.EMPTY,this.mode="determinate";const d=$a._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),d.has(r.head)||d.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&l&&o&&u&&(this._resizeSubscription=l.change(150).subscribe(()=>{"indeterminate"===this.mode&&u.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=ep(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=ep(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,ep(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=$O(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,r=$a._diameters;let i=r.get(e);if(!i||!i.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),i||(i=new Set,r.set(e,i)),i.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}$a._diameters=new WeakMap,$a.\u0275fac=function(e){return new(e||$a)(F(Ft),F(rs),F(ze,8),F(Ou,8),F(V5),F(Ca),F(yD),F(We))},$a.\u0275cmp=Fn({type:$a,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(_n("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),Su("width",t.diameter,"px")("height",t.diameter,"px"),ma("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[qe],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(ms(),se(0,"svg",0,1),yn(2,F5,1,11,"circle",2),yn(3,N5,1,9,"circle",3),oe()),2&e&&(Su("width",t.diameter,"px")("height",t.diameter,"px"),Ye("ngSwitch","indeterminate"===t.mode),_n("viewBox",t._getViewBox()),Ne(2),Ye("ngSwitchCase",!0),Ne(1),Ye("ngSwitchCase",!1))},dependencies:[O_,cM],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let U5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n}),n.\u0275inj=lt({imports:[[La,ob],La]}),n})(),j5=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}intercept(t,r){const i=this.auth.getToken();return i&&(t=t.clone({setHeaders:{Authorization:"Bearer "+i,"Content-Type":"application/json"}})),r.handle(t).pipe(vo(s=>(401===s.status&&this.router.navigate(["call-ended"]),Lu(s))))}}return n.\u0275fac=function(t){return new(t||n)(k(my),k(Ht))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})(),q5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pt({type:n,bootstrap:[zj]}),n.\u0275inj=lt({providers:[{provide:yb,useClass:j5,multi:!0}],imports:[kM,h8,p6,vV,OR,m5,k5,U5,Hj]}),n})();!function Lp(n,e,t){const r=n.\u0275cmp;r.directiveDefs=()=>("function"==typeof e?e():e).map(vc),r.pipeDefs=()=>("function"==typeof t?t():t).map(Tn)}($R,[x_,R_,qj],[]);const z5={production:!0,public_key:"",base_url:"",sip_server:"",sip_domain:"",default_call_target:"",app_link:"",office_time:"",ivr_ring_time:""},G5=function(){var n=E(function*(e){try{const r=yield(yield fetch("https://thaonq94.github.io/webrtc/assets/app-config.json")).json();for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&void 0!==e[i]&&(e[i]=r[i])}catch{}return e});return function(t){return n.apply(this,arguments)}}(),si=new X("environment");!function(){var n=E(function*(){G5(z5).then(e=>{e.production&&(function bL(){OI=!1}(),console.log=function(){}),Z$([{provide:si,useValue:e}]).bootstrapModule(q5).catch(t=>{console.error(t)})})});return function(){return n.apply(this,arguments)}}()()},489:function(Ri,js,rc){var So;Ri=rc.nmd(Ri),function(){var E,kn="Expected a function",ic="__lodash_hash_undefined__",Ua="__lodash_placeholder__",Ws=1/0,ki=9007199254740991,ai=4294967295,gt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ks="[object Arguments]",Ga="[object Array]",st="[object Boolean]",Wa="[object Date]",To="[object Error]",ed="[object Function]",td="[object GeneratorFunction]",li="[object Map]",lc="[object Number]",ls="[object Object]",lp="[object Promise]",Ao="[object RegExp]",ci="[object Set]",Io="[object String]",cc="[object Symbol]",uc="[object WeakMap]",$r="[object ArrayBuffer]",Mo="[object DataView]",cp="[object Float32Array]",nd="[object Float64Array]",up="[object Int8Array]",rd="[object Int16Array]",dp="[object Int32Array]",hp="[object Uint8Array]",fp="[object Uint8ClampedArray]",pp="[object Uint16Array]",gp="[object Uint32Array]",id=/\b__p \+= '';/g,mp=/\b(__p \+=) '' \+/g,_p=/(__e\(.*?\)|\b__t\)) \+\n'';/g,sd=/&(?:amp|lt|gt|quot|#39);/g,od=/[&<>"']/g,ev=RegExp(sd.source),yp=RegExp(od.source),vp=/<%-([\s\S]+?)%>/g,wp=/<%([\s\S]+?)%>/g,ad=/<%=([\s\S]+?)%>/g,Kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tv=/^\w*$/,nv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ld=/[\\^$.*+?()[\]{}|]/g,rv=RegExp(ld.source),dc=/^\s+/,iv=/\s/,sv=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fi=/\{\n\/\* \[wrapped with (.+)\] \*/,ov=/,? & /,nn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xo=/[()=,{}\[\]\/\s]/,Ni=/\\(\\)?/g,PD=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Cp=/\w*$/,bp=/^[-+]0x[0-9a-f]+$/i,cd=/^0b[01]+$/i,Ep=/^\[object .+?Constructor\]$/,Ka=/^0o[0-7]+$/i,av=/^(?:0|[1-9]\d*)$/,Dp=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ya=/($^)/,lv=/['\n\r\u2028\u2029\\]/g,hc="\\ud800-\\udfff",Tp="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ap="\\u2700-\\u27bf",$t="a-z\\xdf-\\xf6\\xf8-\\xff",fc="A-Z\\xc0-\\xd6\\xd8-\\xde",ot="\\ufe0e\\ufe0f",pc="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",at="["+hc+"]",pe="["+pc+"]",Ro="["+Tp+"]",hv="\\d+",U="["+Ap+"]",Za="["+$t+"]",ye="[^"+hc+pc+hv+Ap+$t+fc+"]",je="\\ud83c[\\udffb-\\udfff]",pv="[^"+hc+"]",hd="(?:\\ud83c[\\udde6-\\uddff]){2}",Oo="[\\ud800-\\udbff][\\udc00-\\udfff]",rn="["+fc+"]",Mp="(?:"+Za+"|"+ye+")",kD="(?:"+rn+"|"+ye+")",ui="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",mv="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",_v="(?:"+Ro+"|"+je+")?",yv="["+ot+"]?",xp=yv+_v+"(?:\\u200d(?:"+[pv,hd,Oo].join("|")+")"+yv+_v+")*",LD="(?:"+[U,hd,Oo].join("|")+")"+xp,dr="(?:"+[pv+Ro+"?",Ro,hd,Oo,at].join("|")+")",Qe=RegExp("['\u2019]","g"),$D=RegExp(Ro,"g"),Rp=RegExp(je+"(?="+je+")|"+dr+xp,"g"),VD=RegExp([rn+"?"+Za+"+"+ui+"(?="+[pe,rn,"$"].join("|")+")",kD+"+"+mv+"(?="+[pe,rn+Mp,"$"].join("|")+")",rn+"?"+Mp+"+"+ui,rn+"+"+mv,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hv,LD].join("|"),"g"),K=RegExp("[\\u200d"+hc+Tp+ot+"]"),BD=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,lt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gc=-1,Ct={};Ct[cp]=Ct[nd]=Ct[up]=Ct[rd]=Ct[dp]=Ct[hp]=Ct[fp]=Ct[pp]=Ct[gp]=!0,Ct[Ks]=Ct[Ga]=Ct[$r]=Ct[st]=Ct[Mo]=Ct[Wa]=Ct[To]=Ct[ed]=Ct[li]=Ct[lc]=Ct[ls]=Ct[Ao]=Ct[ci]=Ct[Io]=Ct[uc]=!1;var ht={};ht[Ks]=ht[Ga]=ht[$r]=ht[Mo]=ht[st]=ht[Wa]=ht[cp]=ht[nd]=ht[up]=ht[rd]=ht[dp]=ht[li]=ht[lc]=ht[ls]=ht[Ao]=ht[ci]=ht[Io]=ht[cc]=ht[hp]=ht[fp]=ht[pp]=ht[gp]=!0,ht[To]=ht[ed]=ht[uc]=!1;var mc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fd=parseFloat,Pp=parseInt,kp="object"==typeof global&&global&&global.Object===Object&&global,ue="object"==typeof self&&self&&self.Object===Object&&self,Yt=kp||ue||Function("return this")(),Fp=js&&!js.nodeType&&js,Dn=Fp&&Ri&&!Ri.nodeType&&Ri,pd=Dn&&Dn.exports===Fp,Np=pd&&kp.process,Zt=function(){try{return Dn&&Dn.require&&Dn.require("util").types||Np&&Np.binding&&Np.binding("util")}catch{}}(),Dr=Zt&&Zt.isArrayBuffer,bv=Zt&&Zt.isDate,Ev=Zt&&Zt.isMap,Sr=Zt&&Zt.isRegExp,ft=Zt&&Zt.isSet,Dv=Zt&&Zt.isTypedArray;function Tr(O,B,N){switch(N.length){case 0:return O.call(B);case 1:return O.call(B,N[0]);case 2:return O.call(B,N[0],N[1]);case 3:return O.call(B,N[0],N[1],N[2])}return O.apply(B,N)}function Po(O,B,N,te){for(var Ee=-1,Ke=null==O?0:O.length;++Ee<Ke;){var Xt=O[Ee];B(te,Xt,N(Xt),O)}return te}function Se(O,B){for(var N=-1,te=null==O?0:O.length;++N<te&&!1!==B(O[N],N,O););return O}function _c(O,B){for(var N=null==O?0:O.length;N--&&!1!==B(O[N],N,O););return O}function yc(O,B){for(var N=-1,te=null==O?0:O.length;++N<te;)if(!B(O[N],N,O))return!1;return!0}function di(O,B){for(var N=-1,te=null==O?0:O.length,Ee=0,Ke=[];++N<te;){var Xt=O[N];B(Xt,N,O)&&(Ke[Ee++]=Xt)}return Ke}function Qa(O,B){return!(null==O||!O.length)&&Qt(O,B,0)>-1}function Vr(O,B,N){for(var te=-1,Ee=null==O?0:O.length;++te<Ee;)if(N(B,O[te]))return!0;return!1}function ct(O,B){for(var N=-1,te=null==O?0:O.length,Ee=Array(te);++N<te;)Ee[N]=B(O[N],N,O);return Ee}function cs(O,B){for(var N=-1,te=B.length,Ee=O.length;++N<te;)O[Ee+N]=B[N];return O}function Fn(O,B,N,te){var Ee=-1,Ke=null==O?0:O.length;for(te&&Ke&&(N=O[++Ee]);++Ee<Ke;)N=B(N,O[Ee],Ee,O);return N}function Lp(O,B,N,te){var Ee=null==O?0:O.length;for(te&&Ee&&(N=O[--Ee]);Ee--;)N=B(N,O[Ee],Ee,O);return N}function vc(O,B){for(var N=-1,te=null==O?0:O.length;++N<te;)if(B(O[N],N,O))return!0;return!1}var $p=us("length");function gd(O,B,N){var te;return N(O,function(Ee,Ke,Xt){if(B(Ee,Ke,Xt))return te=Ke,!1}),te}function ie(O,B,N,te){for(var Ee=O.length,Ke=N+(te?1:-1);te?Ke--:++Ke<Ee;)if(B(O[Ke],Ke,O))return Ke;return-1}function Qt(O,B,N){return B==B?function Av(O,B,N){for(var te=N-1,Ee=O.length;++te<Ee;)if(O[te]===B)return te;return-1}(O,B,N):ie(O,Sn,N)}function nt(O,B,N,te){for(var Ee=N-1,Ke=O.length;++Ee<Ke;)if(te(O[Ee],B))return Ee;return-1}function Sn(O){return O!=O}function Tn(O,B){var N=null==O?0:O.length;return N?Ce(O,B)/N:NaN}function us(O){return function(B){return null==B?E:B[O]}}function Nn(O){return function(B){return null==O?E:O[B]}}function hr(O,B,N,te,Ee){return Ee(O,function(Ke,Xt,yt){N=te?(te=!1,Ke):B(N,Ke,Xt,yt)}),N}function Ce(O,B){for(var N,te=-1,Ee=O.length;++te<Ee;){var Ke=B(O[te]);Ke!==E&&(N=N===E?Ke:N+Ke)}return N}function mt(O,B){for(var N=-1,te=Array(O);++N<O;)te[N]=B(N);return te}function ds(O){return O&&O.slice(0,Ja(O)+1).replace(dc,"")}function Xe(O){return function(B){return O(B)}}function Li(O,B){return ct(B,function(N){return O[N]})}function _t(O,B){return O.has(B)}function ko(O,B){for(var N=-1,te=O.length;++N<te&&Qt(B,O[N],0)>-1;);return N}function Fo(O,B){for(var N=O.length;N--&&Qt(B,O[N],0)>-1;);return N}function Ae(O,B){for(var N=O.length,te=0;N--;)O[N]===B&&++te;return te}var wc=Nn({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),No=Nn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function md(O){return"\\"+mc[O]}function Vt(O){return K.test(O)}function pr(O){var B=-1,N=Array(O.size);return O.forEach(function(te,Ee){N[++B]=[Ee,te]}),N}function Zs(O,B){return function(N){return O(B(N))}}function $i(O,B){for(var N=-1,te=O.length,Ee=0,Ke=[];++N<te;){var Xt=O[N];(Xt===B||Xt===Ua)&&(O[N]=Ua,Ke[Ee++]=N)}return Ke}function rt(O){var B=-1,N=Array(O.size);return O.forEach(function(te){N[++B]=te}),N}function hs(O){return Vt(O)?function An(O){for(var B=Rp.lastIndex=0;Rp.test(O);)++B;return B}(O):$p(O)}function Ln(O){return Vt(O)?function Iv(O){return O.match(Rp)||[]}(O):function pt(O){return O.split("")}(O)}function Ja(O){for(var B=O.length;B--&&iv.test(O.charAt(B)););return B}var Qs=Nn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),$o=function O(B){var a,N=(B=null==B?Yt:$o.defaults(Yt.Object(),B,$o.pick(Yt,lt))).Array,te=B.Date,Ee=B.Error,Ke=B.Function,Xt=B.Math,yt=B.Object,Vp=B.RegExp,HD=B.String,Hr=B.TypeError,_d=N.prototype,el=yt.prototype,yd=B["__core-js_shared__"],vd=Ke.prototype.toString,ut=el.hasOwnProperty,jD=0,Mv=(a=/[^.]+$/.exec(yd&&yd.keys&&yd.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",wd=el.toString,qD=vd.call(yt),Bp=Yt._,Cd=Vp("^"+vd.call(ut).replace(ld,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bd=pd?B.Buffer:E,Xs=B.Symbol,Ed=B.Uint8Array,fs=bd?bd.allocUnsafe:E,bc=Zs(yt.getPrototypeOf,yt),gr=yt.create,Dd=el.propertyIsEnumerable,Ec=_d.splice,Hp=Xs?Xs.isConcatSpreadable:E,Vo=Xs?Xs.iterator:E,ps=Xs?Xs.toStringTag:E,Dc=function(){try{var a=no(yt,"defineProperty");return a({},"",{}),a}catch{}}(),Sd=B.clearTimeout!==Yt.clearTimeout&&B.clearTimeout,xv=te&&te.now!==Yt.Date.now&&te.now,Ar=B.setTimeout!==Yt.setTimeout&&B.setTimeout,Bo=Xt.ceil,Sc=Xt.floor,tl=yt.getOwnPropertySymbols,Rv=bd?bd.isBuffer:E,Ov=B.isFinite,Ut=_d.join,Pv=Zs(yt.keys,yt),sn=Xt.max,Jt=Xt.min,mr=te.now,kv=B.parseInt,Tc=Xt.random,Ho=_d.reverse,$n=no(B,"DataView"),nl=no(B,"Map"),Uo=no(B,"Promise"),jo=no(B,"Set"),Ir=no(B,"WeakMap"),qo=no(yt,"create"),zo=Ir&&new Ir,fe={},Up=ro($n),zD=ro(nl),Fv=ro(Uo),Nv=ro(jo),Lv=ro(Ir),rl=Xs?Xs.prototype:E,il=rl?rl.valueOf:E,jp=rl?rl.toString:E;function m(a){if(Mt(a)&&!De(a)&&!(a instanceof le)){if(a instanceof Je)return a;if(ut.call(a,"__wrapped__"))return xn(a)}return new Je(a)}var Oe=function(){function a(){}return function(c){if(!Et(c))return{};if(gr)return gr(c);a.prototype=c;var h=new a;return a.prototype=E,h}}();function kt(){}function Je(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=E}function le(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ai,this.__views__=[]}function Vi(a){var c=-1,h=null==a?0:a.length;for(this.clear();++c<h;){var g=a[c];this.set(g[0],g[1])}}function It(a){var c=-1,h=null==a?0:a.length;for(this.clear();++c<h;){var g=a[c];this.set(g[0],g[1])}}function fi(a){var c=-1,h=null==a?0:a.length;for(this.clear();++c<h;){var g=a[c];this.set(g[0],g[1])}}function Ui(a){var c=-1,h=null==a?0:a.length;for(this.__data__=new fi;++c<h;)this.add(a[c])}function _r(a){var c=this.__data__=new It(a);this.size=c.size}function Jp(a,c){var h=De(a),g=!h&&oo(a),_=!h&&!g&&Pr(a),w=!h&&!g&&!_&&Wr(a),T=h||g||_||w,M=T?mt(a.length,HD):[],P=M.length;for(var j in a)(c||ut.call(a,j))&&(!T||!("length"==j||_&&("offset"==j||"parent"==j)||w&&("buffer"==j||"byteLength"==j||"byteOffset"==j)||Wi(j,P)))&&M.push(j);return M}function eg(a){var c=a.length;return c?a[vs(0,c-1)]:E}function Vn(a,c){return qc(Qn(a),pi(c,0,a.length))}function gs(a){return qc(Qn(a))}function bt(a,c,h){(h!==E&&!er(a[c],h)||h===E&&!(c in a))&&ji(a,c,h)}function ms(a,c,h){var g=a[c];(!ut.call(a,c)||!er(g,h)||h===E&&!(c in a))&&ji(a,c,h)}function Ac(a,c){for(var h=a.length;h--;)if(er(a[h][0],c))return h;return-1}function jv(a,c,h,g){return xr(a,function(_,w,T){c(g,_,h(_),T)}),g}function tg(a,c){return a&&_i(c,xt(c),a)}function ji(a,c,h){"__proto__"==c&&Dc?Dc(a,c,{configurable:!0,enumerable:!0,value:h,writable:!0}):a[c]=h}function Wo(a,c){for(var h=-1,g=c.length,_=N(g),w=null==a;++h<g;)_[h]=w?E:$h(a,c[h]);return _}function pi(a,c,h){return a==a&&(h!==E&&(a=a<=h?a:h),c!==E&&(a=a>=c?a:c)),a}function Bn(a,c,h,g,_,w){var T,M=1&c,P=2&c,j=4&c;if(h&&(T=_?h(a,g,_,w):h(a)),T!==E)return T;if(!Et(a))return a;var q=De(a);if(q){if(T=function Ag(a){var c=a.length,h=new a.constructor(c);return c&&"string"==typeof a[0]&&ut.call(a,"index")&&(h.index=a.index,h.input=a.input),h}(a),!M)return Qn(a,T)}else{var z=Mn(a),Y=z==ed||z==td;if(Pr(a))return mg(a,M);if(z==ls||z==Ks||Y&&!_){if(T=P||Y?{}:iw(a),!M)return P?function tw(a,c){return _i(a,Dg(a),c)}(a,function qv(a,c){return a&&_i(c,Nt(c),a)}(T,a)):function ew(a,c){return _i(a,Zd(a),c)}(a,tg(T,a))}else{if(!ht[z])return _?a:{};T=function Ig(a,c,h){var g=a.constructor;switch(c){case $r:return Ud(a);case st:case Wa:return new g(+a);case Mo:return function QD(a,c){var h=c?Ud(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.byteLength)}(a,h);case cp:case nd:case up:case rd:case dp:case hp:case fp:case pp:case gp:return Zn(a,h);case li:return new g;case lc:case Io:return new g(a);case Ao:return function XD(a){var c=new a.constructor(a.source,Cp.exec(a));return c.lastIndex=a.lastIndex,c}(a);case ci:return new g;case cc:return function _g(a){return il?yt(il.call(a)):{}}(a)}}(a,z,M)}}w||(w=new _r);var ne=w.get(a);if(ne)return ne;w.set(a,T),mm(a)?a.forEach(function(he){T.add(Bn(he,c,h,he,a,w))}):Mh(a)&&a.forEach(function(he,Pe){T.set(Pe,Bn(he,c,h,Pe,a,w))});var xe=q?E:(j?P?Wd:$c:P?Nt:xt)(a);return Se(xe||a,function(he,Pe){xe&&(he=a[Pe=he]),ms(T,Pe,Bn(he,c,h,Pe,a,w))}),T}function Rd(a,c,h){var g=h.length;if(null==a)return!g;for(a=yt(a);g--;){var _=h[g],T=a[_];if(T===E&&!(_ in a)||!(0,c[_])(T))return!1}return!0}function ng(a,c,h){if("function"!=typeof a)throw new Hr(kn);return yl(function(){a.apply(E,h)},c)}function Mr(a,c,h,g){var _=-1,w=Qa,T=!0,M=a.length,P=[],j=c.length;if(!M)return P;h&&(c=ct(c,Xe(h))),g?(w=Vr,T=!1):c.length>=200&&(w=_t,T=!1,c=new Ui(c));e:for(;++_<M;){var q=a[_],z=null==h?q:h(q);if(q=g||0!==q?q:0,T&&z==z){for(var Y=j;Y--;)if(c[Y]===z)continue e;P.push(q)}else w(c,z,g)||P.push(q)}return P}m.templateSettings={escape:vp,evaluate:wp,interpolate:ad,variable:"",imports:{_:m}},(m.prototype=kt.prototype).constructor=m,(Je.prototype=Oe(kt.prototype)).constructor=Je,(le.prototype=Oe(kt.prototype)).constructor=le,Vi.prototype.clear=function Td(){this.__data__=qo?qo(null):{},this.size=0},Vi.prototype.delete=function GD(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c},Vi.prototype.get=function $v(a){var c=this.__data__;if(qo){var h=c[a];return h===ic?E:h}return ut.call(c,a)?c[a]:E},Vi.prototype.has=function WD(a){var c=this.__data__;return qo?c[a]!==E:ut.call(c,a)},Vi.prototype.set=function zp(a,c){var h=this.__data__;return this.size+=this.has(a)?0:1,h[a]=qo&&c===E?ic:c,this},It.prototype.clear=function Bi(){this.__data__=[],this.size=0},It.prototype.delete=function Gp(a){var c=this.__data__,h=Ac(c,a);return!(h<0||(h==c.length-1?c.pop():Ec.call(c,h,1),--this.size,0))},It.prototype.get=function Go(a){var c=this.__data__,h=Ac(c,a);return h<0?E:c[h][1]},It.prototype.has=function Hi(a){return Ac(this.__data__,a)>-1},It.prototype.set=function Vv(a,c){var h=this.__data__,g=Ac(h,a);return g<0?(++this.size,h.push([a,c])):h[g][1]=c,this},fi.prototype.clear=function Bv(){this.size=0,this.__data__={hash:new Vi,map:new(nl||It),string:new Vi}},fi.prototype.delete=function Hv(a){var c=Yd(this,a).delete(a);return this.size-=c?1:0,c},fi.prototype.get=function Ad(a){return Yd(this,a).get(a)},fi.prototype.has=function Id(a){return Yd(this,a).has(a)},fi.prototype.set=function Wp(a,c){var h=Yd(this,a),g=h.size;return h.set(a,c),this.size+=h.size==g?0:1,this},Ui.prototype.add=Ui.prototype.push=function Uv(a){return this.__data__.set(a,ic),this},Ui.prototype.has=function Kp(a){return this.__data__.has(a)},_r.prototype.clear=function Yp(){this.__data__=new It,this.size=0},_r.prototype.delete=function Zp(a){var c=this.__data__,h=c.delete(a);return this.size=c.size,h},_r.prototype.get=function Qp(a){return this.__data__.get(a)},_r.prototype.has=function Xp(a){return this.__data__.has(a)},_r.prototype.set=function Md(a,c){var h=this.__data__;if(h instanceof It){var g=h.__data__;if(!nl||g.length<199)return g.push([a,c]),this.size=++h.size,this;h=this.__data__=new fi(g)}return h.set(a,c),this.size=h.size,this};var xr=Lc(yr),rg=Lc(Ic,!0);function zv(a,c){var h=!0;return xr(a,function(g,_,w){return h=!!c(g,_,w)}),h}function _s(a,c,h){for(var g=-1,_=a.length;++g<_;){var w=a[g],T=c(w);if(null!=T&&(M===E?T==T&&!nr(T):h(T,M)))var M=T,P=w}return P}function ig(a,c){var h=[];return xr(a,function(g,_,w){c(g,_,w)&&h.push(g)}),h}function pn(a,c,h,g,_){var w=-1,T=a.length;for(h||(h=sw),_||(_=[]);++w<T;){var M=a[w];c>0&&h(M)?c>1?pn(M,c-1,h,g,_):cs(_,M):g||(_[_.length]=M)}return _}var sg=fl(),Gv=fl(!0);function yr(a,c){return a&&sg(a,c,xt)}function Ic(a,c){return a&&Gv(a,c,xt)}function ol(a,c){return di(c,function(h){return Gr(a[h])})}function gi(a,c){for(var h=0,g=(c=qi(c,a)).length;null!=a&&h<g;)a=a[zr(c[h++])];return h&&h==g?a:E}function Pd(a,c,h){var g=c(a);return De(a)?g:cs(g,h(a))}function In(a){return null==a?a===E?"[object Undefined]":"[object Null]":ps&&ps in yt(a)?function eS(a){var c=ut.call(a,ps),h=a[ps];try{a[ps]=E;var g=!0}catch{}var _=wd.call(a);return g&&(c?a[ps]=h:delete a[ps]),_}(a):function Rg(a){return wd.call(a)}(a)}function ys(a,c){return a>c}function Wv(a,c){return null!=a&&ut.call(a,c)}function Ko(a,c){return null!=a&&c in yt(a)}function Yo(a,c,h){for(var g=h?Vr:Qa,_=a[0].length,w=a.length,T=w,M=N(w),P=1/0,j=[];T--;){var q=a[T];T&&c&&(q=ct(q,Xe(c))),P=Jt(q.length,P),M[T]=!h&&(c||_>=120&&q.length>=120)?new Ui(T&&q):E}q=a[0];var z=-1,Y=M[0];e:for(;++z<_&&j.length<P;){var ne=q[z],ce=c?c(ne):ne;if(ne=h||0!==ne?ne:0,!(Y?_t(Y,ce):g(j,ce,h))){for(T=w;--T;){var xe=M[T];if(!(xe?_t(xe,ce):g(a[T],ce,h)))continue e}Y&&Y.push(ce),j.push(ne)}}return j}function Zo(a,c,h){var g=null==(a=Jd(a,c=qi(c,a)))?a:a[zr(Jn(c))];return null==g?E:Tr(g,a,h)}function Fd(a){return Mt(a)&&In(a)==Ks}function al(a,c,h,g,_){return a===c||(null==a||null==c||!Mt(a)&&!Mt(c)?a!=a&&c!=c:function ll(a,c,h,g,_,w){var T=De(a),M=De(c),P=T?Ga:Mn(a),j=M?Ga:Mn(c),q=(P=P==Ks?ls:P)==ls,z=(j=j==Ks?ls:j)==ls,Y=P==j;if(Y&&Pr(a)){if(!Pr(c))return!1;T=!0,q=!1}if(Y&&!q)return w||(w=new _r),T||Wr(a)?bg(a,c,h,g,_,w):function Eg(a,c,h,g,_,w,T){switch(h){case Mo:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case $r:return!(a.byteLength!=c.byteLength||!w(new Ed(a),new Ed(c)));case st:case Wa:case lc:return er(+a,+c);case To:return a.name==c.name&&a.message==c.message;case Ao:case Io:return a==c+"";case li:var M=pr;case ci:if(M||(M=rt),a.size!=c.size&&!(1&g))return!1;var j=T.get(a);if(j)return j==c;g|=2,T.set(a,c);var q=bg(M(a),M(c),g,_,w,T);return T.delete(a),q;case cc:if(il)return il.call(a)==il.call(c)}return!1}(a,c,P,h,g,_,w);if(!(1&h)){var ne=q&&ut.call(a,"__wrapped__"),ce=z&&ut.call(c,"__wrapped__");if(ne||ce){var xe=ne?a.value():a,he=ce?c.value():c;return w||(w=new _r),_(xe,he,h,g,w)}}return!!Y&&(w||(w=new _r),function ml(a,c,h,g,_,w){var T=1&h,M=$c(a),P=M.length;if(P!=$c(c).length&&!T)return!1;for(var z=P;z--;){var Y=M[z];if(!(T?Y in c:ut.call(c,Y)))return!1}var ne=w.get(a),ce=w.get(c);if(ne&&ce)return ne==c&&ce==a;var xe=!0;w.set(a,c),w.set(c,a);for(var he=T;++z<P;){var Pe=a[Y=M[z]],$e=c[Y];if(g)var Un=T?g($e,Pe,Y,c,a,w):g(Pe,$e,Y,a,c,w);if(!(Un===E?Pe===$e||_(Pe,$e,h,g,w):Un)){xe=!1;break}he||(he="constructor"==Y)}if(xe&&!he){var jn=a.constructor,Gt=c.constructor;jn!=Gt&&"constructor"in a&&"constructor"in c&&!("function"==typeof jn&&jn instanceof jn&&"function"==typeof Gt&&Gt instanceof Gt)&&(xe=!1)}return w.delete(a),w.delete(c),xe}(a,c,h,g,_,w))}(a,c,h,g,al,_))}function cl(a,c,h,g){var _=h.length,w=_,T=!g;if(null==a)return!w;for(a=yt(a);_--;){var M=h[_];if(T&&M[2]?M[1]!==a[M[0]]:!(M[0]in a))return!1}for(;++_<w;){var P=(M=h[_])[0],j=a[P],q=M[1];if(T&&M[2]){if(j===E&&!(P in a))return!1}else{var z=new _r;if(g)var Y=g(j,q,P,a,c,z);if(!(Y===E?al(q,j,3,g,z):Y))return!1}}return!0}function ul(a){return!(!Et(a)||function rS(a){return!!Mv&&Mv in a}(a))&&(Gr(a)?Cd:Ep).test(ro(a))}function Ld(a){return"function"==typeof a?a:null==a?rr:"object"==typeof a?De(a)?lg(a[0],a[1]):Qo(a):Tl(a)}function xc(a){if(!Hc(a))return Pv(a);var c=[];for(var h in yt(a))ut.call(a,h)&&"constructor"!=h&&c.push(h);return c}function $d(a,c){return a<c}function dl(a,c){var h=-1,g=tr(a)?N(a.length):[];return xr(a,function(_,w,T){g[++h]=c(_,w,T)}),g}function Qo(a){var c=Vc(a);return 1==c.length&&c[0][2]?aw(c[0][0],c[0][1]):function(h){return h===a||cl(h,a,c)}}function lg(a,c){return Mg(a)&&ow(c)?aw(zr(a),c):function(h){var g=$h(h,a);return g===E&&g===c?Vh(h,a):al(c,g,3)}}function hl(a,c,h,g,_){a!==c&&sg(c,function(w,T){if(_||(_=new _r),Et(w))!function cg(a,c,h,g,_,w,T){var M=eh(a,h),P=eh(c,h),j=T.get(P);if(j)bt(a,h,j);else{var q=w?w(M,P,h+"",a,c,T):E,z=q===E;if(z){var Y=De(P),ne=!Y&&Pr(P),ce=!Y&&!ne&&Wr(P);q=P,Y||ne||ce?De(M)?q=M:zt(M)?q=Qn(M):ne?(z=!1,q=mg(P,!0)):ce?(z=!1,q=Zn(P,!0)):q=[]:kr(P)||oo(P)?(q=M,oo(M)?q=ym(M):(!Et(M)||Gr(M))&&(q=iw(P))):z=!1}z&&(T.set(P,q),_(q,P,g,w,T),T.delete(P)),bt(a,h,q)}}(a,c,T,h,hl,g,_);else{var M=g?g(eh(a,T),w,T+"",a,c,_):E;M===E&&(M=w),bt(a,T,M)}},Nt)}function Js(a,c){var h=a.length;if(h)return Wi(c+=c<0?h:0,h)?a[c]:E}function ug(a,c,h){c=c.length?ct(c,function(w){return De(w)?function(T){return gi(T,1===w.length?w[0]:w)}:w}):[rr];var g=-1;return c=ct(c,Xe(de())),function Q(O,B){var N=O.length;for(O.sort(B);N--;)O[N]=O[N].value;return O}(dl(a,function(w,T,M){return{criteria:ct(c,function(j){return j(w)}),index:++g,value:w}}),function(w,T){return function na(a,c,h){for(var g=-1,_=a.criteria,w=c.criteria,T=_.length,M=h.length;++g<T;){var P=Fc(_[g],w[g]);if(P)return g>=M?P:P*("desc"==h[g]?-1:1)}return a.index-c.index}(w,T,h)})}function Rc(a,c,h){for(var g=-1,_=c.length,w={};++g<_;){var T=c[g],M=gi(a,T);h(M,T)&&Pc(w,qi(T,a),M)}return w}function Oc(a,c,h,g){var _=g?nt:Qt,w=-1,T=c.length,M=a;for(a===c&&(c=Qn(c)),h&&(M=ct(a,Xe(h)));++w<T;)for(var P=0,j=c[w],q=h?h(j):j;(P=_(M,q,P,g))>-1;)M!==a&&Ec.call(M,P,1),Ec.call(a,P,1);return a}function eo(a,c){for(var h=a?c.length:0,g=h-1;h--;){var _=c[h];if(h==g||_!==w){var w=_;Wi(_)?Ec.call(a,_,1):fg(a,_)}}return a}function vs(a,c){return a+Sc(Tc()*(c-a+1))}function ws(a,c){var h="";if(!a||c<1||c>ki)return h;do{c%2&&(h+=a),(c=Sc(c/2))&&(a+=a)}while(c);return h}function Me(a,c){return Uc(Xd(a,c,rr),a+"")}function Vd(a){return eg(ga(a))}function Jo(a,c){var h=ga(a);return qc(h,pi(c,0,h.length))}function Pc(a,c,h,g){if(!Et(a))return a;for(var _=-1,w=(c=qi(c,a)).length,T=w-1,M=a;null!=M&&++_<w;){var P=zr(c[_]),j=h;if("__proto__"===P||"constructor"===P||"prototype"===P)return a;if(_!=T){var q=M[P];(j=g?g(q,P,M):E)===E&&(j=Et(q)?q:Wi(c[_+1])?[]:{})}ms(M,P,j),M=M[P]}return a}var dg=zo?function(a,c){return zo.set(a,c),a}:rr,X=Dc?function(a,c){return Dc(a,"toString",{configurable:!0,enumerable:!1,value:jh(c),writable:!0})}:rr;function YD(a){return qc(ga(a))}function Ur(a,c,h){var g=-1,_=a.length;c<0&&(c=-c>_?0:_+c),(h=h>_?_:h)<0&&(h+=_),_=c>h?0:h-c>>>0,c>>>=0;for(var w=N(_);++g<_;)w[g]=a[g+c];return w}function ZD(a,c){var h;return xr(a,function(g,_,w){return!(h=c(g,_,w))}),!!h}function Bd(a,c,h){var g=0,_=null==a?g:a.length;if("number"==typeof c&&c==c&&_<=2147483647){for(;g<_;){var w=g+_>>>1,T=a[w];null!==T&&!nr(T)&&(h?T<=c:T<c)?g=w+1:_=w}return _}return hg(a,c,rr,h)}function hg(a,c,h,g){var _=0,w=null==a?0:a.length;if(0===w)return 0;for(var T=(c=h(c))!=c,M=null===c,P=nr(c),j=c===E;_<w;){var q=Sc((_+w)/2),z=h(a[q]),Y=z!==E,ne=null===z,ce=z==z,xe=nr(z);if(T)var he=g||ce;else he=j?ce&&(g||Y):M?ce&&Y&&(g||!ne):P?ce&&Y&&!ne&&(g||!xe):!ne&&!xe&&(g?z<=c:z<c);he?_=q+1:w=q}return Jt(w,4294967294)}function Qv(a,c){for(var h=-1,g=a.length,_=0,w=[];++h<g;){var T=a[h],M=c?c(T):T;if(!h||!er(M,P)){var P=M;w[_++]=0===T?0:T}}return w}function Xv(a){return"number"==typeof a?a:nr(a)?NaN:+a}function gn(a){if("string"==typeof a)return a;if(De(a))return ct(a,gn)+"";if(nr(a))return jp?jp.call(a):"";var c=a+"";return"0"==c&&1/a==-Ws?"-0":c}function to(a,c,h){var g=-1,_=Qa,w=a.length,T=!0,M=[],P=M;if(h)T=!1,_=Vr;else if(w>=200){var j=c?null:rw(a);if(j)return rt(j);T=!1,_=_t,P=new Ui}else P=c?[]:M;e:for(;++g<w;){var q=a[g],z=c?c(q):q;if(q=h||0!==q?q:0,T&&z==z){for(var Y=P.length;Y--;)if(P[Y]===z)continue e;c&&P.push(z),M.push(q)}else _(P,z,h)||(P!==M&&P.push(z),M.push(q))}return M}function fg(a,c){return null==(a=Jd(a,c=qi(c,a)))||delete a[zr(Jn(c))]}function jt(a,c,h,g){return Pc(a,c,h(gi(a,c)),g)}function ea(a,c,h,g){for(var _=a.length,w=g?_:-1;(g?w--:++w<_)&&c(a[w],w,a););return h?Ur(a,g?0:w,g?w+1:_):Ur(a,g?w+1:0,g?_:w)}function ta(a,c){var h=a;return h instanceof le&&(h=h.value()),Fn(c,function(g,_){return _.func.apply(_.thisArg,cs([g],_.args))},h)}function pg(a,c,h){var g=a.length;if(g<2)return g?to(a[0]):[];for(var _=-1,w=N(g);++_<g;)for(var T=a[_],M=-1;++M<g;)M!=_&&(w[_]=Mr(w[_]||T,a[M],c,h));return to(pn(w,1),c,h)}function gg(a,c,h){for(var g=-1,_=a.length,w=c.length,T={};++g<_;)h(T,a[g],g<w?c[g]:E);return T}function Hn(a){return zt(a)?a:[]}function jr(a){return"function"==typeof a?a:rr}function qi(a,c){return De(a)?a:Mg(a,c)?[a]:kg(et(a))}var kc=Me;function Rr(a,c,h){var g=a.length;return h=h===E?g:h,!c&&h>=g?a:Ur(a,c,h)}var Hd=Sd||function(a){return Yt.clearTimeout(a)};function mg(a,c){if(c)return a.slice();var h=a.length,g=fs?fs(h):new a.constructor(h);return a.copy(g),g}function Ud(a){var c=new a.constructor(a.byteLength);return new Ed(c).set(new Ed(a)),c}function Zn(a,c){var h=c?Ud(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.length)}function Fc(a,c){if(a!==c){var h=a!==E,g=null===a,_=a==a,w=nr(a),T=c!==E,M=null===c,P=c==c,j=nr(c);if(!M&&!j&&!w&&a>c||w&&T&&P&&!M&&!j||g&&T&&P||!h&&P||!_)return 1;if(!g&&!w&&!j&&a<c||j&&h&&_&&!g&&!w||M&&h&&_||!T&&_||!P)return-1}return 0}function Jv(a,c,h,g){for(var _=-1,w=a.length,T=h.length,M=-1,P=c.length,j=sn(w-T,0),q=N(P+j),z=!g;++M<P;)q[M]=c[M];for(;++_<T;)(z||_<w)&&(q[h[_]]=a[_]);for(;j--;)q[M++]=a[_++];return q}function jd(a,c,h,g){for(var _=-1,w=a.length,T=-1,M=h.length,P=-1,j=c.length,q=sn(w-M,0),z=N(q+j),Y=!g;++_<q;)z[_]=a[_];for(var ne=_;++P<j;)z[ne+P]=c[P];for(;++T<M;)(Y||_<w)&&(z[ne+h[T]]=a[_++]);return z}function Qn(a,c){var h=-1,g=a.length;for(c||(c=N(g));++h<g;)c[h]=a[h];return c}function _i(a,c,h,g){var _=!h;h||(h={});for(var w=-1,T=c.length;++w<T;){var M=c[w],P=g?g(h[M],a[M],M,h,a):E;P===E&&(P=a[M]),_?ji(h,M,P):ms(h,M,P)}return h}function Nc(a,c){return function(h,g){var _=De(h)?Po:jv,w=c?c():{};return _(h,a,de(g,2),w)}}function ra(a){return Me(function(c,h){var g=-1,_=h.length,w=_>1?h[_-1]:E,T=_>2?h[2]:E;for(w=a.length>3&&"function"==typeof w?(_--,w):E,T&&mn(h[0],h[1],T)&&(w=_<3?E:w,_=1),c=yt(c);++g<_;){var M=h[g];M&&a(c,M,g,w)}return c})}function Lc(a,c){return function(h,g){if(null==h)return h;if(!tr(h))return a(h,g);for(var _=h.length,w=c?_:-1,T=yt(h);(c?w--:++w<_)&&!1!==g(T[w],w,T););return h}}function fl(a){return function(c,h,g){for(var _=-1,w=yt(c),T=g(c),M=T.length;M--;){var P=T[a?M:++_];if(!1===h(w[P],P,w))break}return c}}function ia(a){return function(c){var h=Vt(c=et(c))?Ln(c):E,g=h?h[0]:c.charAt(0),_=h?Rr(h,1).join(""):c.slice(1);return g[a]()+_}}function Cs(a){return function(c){return Fn(Fm(ve(c).replace(Qe,"")),a,"")}}function bs(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var h=Oe(a.prototype),g=a.apply(h,c);return Et(g)?g:h}}function yg(a){return function(c,h,g){var _=yt(c);if(!tr(c)){var w=de(h,3);c=xt(c),h=function(M){return w(_[M],M,_)}}var T=a(c,h,g);return T>-1?_[w?c[T]:T]:E}}function vg(a){return Or(function(c){var h=c.length,g=h,_=Je.prototype.thru;for(a&&c.reverse();g--;){var w=c[g];if("function"!=typeof w)throw new Hr(kn);if(_&&!T&&"wrapper"==Gi(w))var T=new Je([],!0)}for(g=T?g:h;++g<h;){var M=Gi(w=c[g]),P="wrapper"==M?Kd(w):E;T=P&&_l(P[0])&&424==P[1]&&!P[4].length&&1==P[9]?T[Gi(P[0])].apply(T,P[3]):1==w.length&&_l(w)?T[M]():T.thru(w)}return function(){var j=arguments,q=j[0];if(T&&1==j.length&&De(q))return T.plant(q).value();for(var z=0,Y=h?c[z].apply(this,j):q;++z<h;)Y=c[z].call(this,Y);return Y}})}function pl(a,c,h,g,_,w,T,M,P,j){var q=128&c,z=1&c,Y=2&c,ne=24&c,ce=512&c,xe=Y?E:bs(a);return function he(){for(var Pe=arguments.length,$e=N(Pe),Un=Pe;Un--;)$e[Un]=arguments[Un];if(ne)var jn=yi(he),Gt=Ae($e,jn);if(g&&($e=Jv($e,g,_,ne)),w&&($e=jd($e,w,T,ne)),Pe-=Gt,ne&&Pe<j){var Lt=$i($e,jn);return aa(a,c,pl,he.placeholder,h,$e,Lt,M,P,j-Pe)}var Xr=z?h:this,Yi=Y?Xr[a]:a;return Pe=$e.length,M?$e=Xn($e,M):ce&&Pe>1&&$e.reverse(),q&&P<Pe&&($e.length=P),this&&this!==Yt&&this instanceof he&&(Yi=xe||bs(Yi)),Yi.apply(Xr,$e)}}function sa(a,c){return function(h,g){return function KD(a,c,h,g){return yr(a,function(_,w,T){c(g,h(_),w,T)}),g}(h,a,c(g),{})}}function zi(a,c){return function(h,g){var _;if(h===E&&g===E)return c;if(h!==E&&(_=h),g!==E){if(_===E)return g;"string"==typeof h||"string"==typeof g?(h=gn(h),g=gn(g)):(h=Xv(h),g=Xv(g)),_=a(h,g)}return _}}function qd(a){return Or(function(c){return c=ct(c,Xe(de())),Me(function(h){var g=this;return a(c,function(_){return Tr(_,g,h)})})})}function k(a,c){var h=(c=c===E?" ":gn(c)).length;if(h<2)return h?ws(c,a):c;var g=ws(c,Bo(a/hs(c)));return Vt(c)?Rr(Ln(g),0,a).join(""):g.slice(0,a)}function St(a){return function(c,h,g){return g&&"number"!=typeof g&&mn(c,h,g)&&(h=g=E),c=wi(c),h===E?(h=c,c=0):h=wi(h),function Xo(a,c,h,g){for(var _=-1,w=sn(Bo((c-a)/(h||1)),0),T=N(w);w--;)T[g?w:++_]=a,a+=h;return T}(c,h,g=g===E?c<h?1:-1:wi(g),a)}}function oa(a){return function(c,h){return"string"==typeof c&&"string"==typeof h||(c=Kr(c),h=Kr(h)),a(c,h)}}function aa(a,c,h,g,_,w,T,M,P,j){var q=8&c;c|=q?32:64,4&(c&=~(q?64:32))||(c&=-4);var xe=[a,c,_,q?w:E,q?T:E,q?E:w,q?E:T,M,P,j],he=h.apply(E,xe);return _l(a)&&Og(he,xe),he.placeholder=g,jc(he,a,c)}function zd(a){var c=Xt[a];return function(h,g){if(h=Kr(h),(g=null==g?0:Jt(Ie(g),292))&&Ov(h)){var _=(et(h)+"e").split("e");return+((_=(et(c(_[0]+"e"+(+_[1]+g)))+"e").split("e"))[0]+"e"+(+_[1]-g))}return c(h)}}var rw=jo&&1/rt(new jo([,-0]))[1]==Ws?function(a){return new jo(a)}:Gh;function Cg(a){return function(c){var h=Mn(c);return h==li?pr(c):h==ci?function Tv(O){var B=-1,N=Array(O.size);return O.forEach(function(te){N[++B]=[te,te]}),N}(c):function fr(O,B){return ct(B,function(N){return[N,O[N]]})}(c,a(c))}}function qr(a,c,h,g,_,w,T,M){var P=2&c;if(!P&&"function"!=typeof a)throw new Hr(kn);var j=g?g.length:0;if(j||(c&=-97,g=_=E),T=T===E?T:sn(Ie(T),0),M=M===E?M:Ie(M),j-=_?_.length:0,64&c){var q=g,z=_;g=_=E}var Y=P?E:Kd(a),ne=[a,c,h,g,_,q,z,w,T,M];if(Y&&function xg(a,c){var h=a[1],g=c[1],_=h|g;if(!(_<131||(128==g&&8==h||128==g&&256==h&&a[7].length<=c[8]||384==g&&c[7].length<=c[8]&&8==h)))return a;1&g&&(a[2]=c[2],_|=1&h?0:4);var M=c[3];if(M){var P=a[3];a[3]=P?Jv(P,M,c[4]):M,a[4]=P?$i(a[3],Ua):c[4]}(M=c[5])&&(a[5]=(P=a[5])?jd(P,M,c[6]):M,a[6]=P?$i(a[5],Ua):c[6]),(M=c[7])&&(a[7]=M),128&g&&(a[8]=null==a[8]?c[8]:Jt(a[8],c[8])),null==a[9]&&(a[9]=c[9]),a[0]=c[0],a[1]=_}(ne,Y),a=ne[0],c=ne[1],h=ne[2],g=ne[3],_=ne[4],!(M=ne[9]=ne[9]===E?P?0:a.length:sn(ne[9]-j,0))&&24&c&&(c&=-25),c&&1!=c)ce=8==c||16==c?function nw(a,c,h){var g=bs(a);return function _(){for(var w=arguments.length,T=N(w),M=w,P=yi(_);M--;)T[M]=arguments[M];var j=w<3&&T[0]!==P&&T[w-1]!==P?[]:$i(T,P);return(w-=j.length)<h?aa(a,c,pl,_.placeholder,E,T,j,E,E,h-w):Tr(this&&this!==Yt&&this instanceof _?g:a,this,T)}}(a,c,M):32!=c&&33!=c||_.length?pl.apply(E,ne):function wg(a,c,h,g){var _=1&c,w=bs(a);return function T(){for(var M=-1,P=arguments.length,j=-1,q=g.length,z=N(q+P),Y=this&&this!==Yt&&this instanceof T?w:a;++j<q;)z[j]=g[j];for(;P--;)z[j++]=arguments[++M];return Tr(Y,_?h:this,z)}}(a,c,h,g);else var ce=function JD(a,c,h){var g=1&c,_=bs(a);return function w(){return(this&&this!==Yt&&this instanceof w?_:a).apply(g?h:this,arguments)}}(a,c,h);return jc((Y?dg:Og)(ce,ne),a,c)}function la(a,c,h,g){return a===E||er(a,el[h])&&!ut.call(g,h)?c:a}function Gd(a,c,h,g,_,w){return Et(a)&&Et(c)&&(w.set(c,a),hl(a,c,E,Gd,w),w.delete(c)),a}function gl(a){return kr(a)?E:a}function bg(a,c,h,g,_,w){var T=1&h,M=a.length,P=c.length;if(M!=P&&!(T&&P>M))return!1;var j=w.get(a),q=w.get(c);if(j&&q)return j==c&&q==a;var z=-1,Y=!0,ne=2&h?new Ui:E;for(w.set(a,c),w.set(c,a);++z<M;){var ce=a[z],xe=c[z];if(g)var he=T?g(xe,ce,z,c,a,w):g(ce,xe,z,a,c,w);if(he!==E){if(he)continue;Y=!1;break}if(ne){if(!vc(c,function(Pe,$e){if(!_t(ne,$e)&&(ce===Pe||_(ce,Pe,h,g,w)))return ne.push($e)})){Y=!1;break}}else if(ce!==xe&&!_(ce,xe,h,g,w)){Y=!1;break}}return w.delete(a),w.delete(c),Y}function Or(a){return Uc(Xd(a,E,Bg),a+"")}function $c(a){return Pd(a,xt,Zd)}function Wd(a){return Pd(a,Nt,Dg)}var Kd=zo?function(a){return zo.get(a)}:Gh;function Gi(a){for(var c=a.name+"",h=fe[c],g=ut.call(fe,c)?h.length:0;g--;){var _=h[g],w=_.func;if(null==w||w==a)return _.name}return c}function yi(a){return(ut.call(m,"placeholder")?m:a).placeholder}function de(){var a=m.iteratee||lu;return a=a===lu?Ld:a,arguments.length?a(arguments[0],arguments[1]):a}function Yd(a,c){var h=a.__data__;return function nS(a){var c=typeof a;return"string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==a:null===a}(c)?h["string"==typeof c?"string":"hash"]:h.map}function Vc(a){for(var c=xt(a),h=c.length;h--;){var g=c[h],_=a[g];c[h]=[g,_,ow(_)]}return c}function no(a,c){var h=function Ys(O,B){return null==O?E:O[B]}(a,c);return ul(h)?h:E}var Zd=tl?function(a){return null==a?[]:(a=yt(a),di(tl(a),function(c){return Dd.call(a,c)}))}:Al,Dg=tl?function(a){for(var c=[];a;)cs(c,Zd(a)),a=bc(a);return c}:Al,Mn=In;function Tg(a,c,h){for(var g=-1,_=(c=qi(c,a)).length,w=!1;++g<_;){var T=zr(c[g]);if(!(w=null!=a&&h(a,T)))break;a=a[T]}return w||++g!=_?w:!!(_=null==a?0:a.length)&&nu(_)&&Wi(T,_)&&(De(a)||oo(a))}function iw(a){return"function"!=typeof a.constructor||Hc(a)?{}:Oe(bc(a))}function sw(a){return De(a)||oo(a)||!!(Hp&&a&&a[Hp])}function Wi(a,c){var h=typeof a;return!!(c=c??ki)&&("number"==h||"symbol"!=h&&av.test(a))&&a>-1&&a%1==0&&a<c}function mn(a,c,h){if(!Et(h))return!1;var g=typeof c;return!!("number"==g?tr(h)&&Wi(c,h.length):"string"==g&&c in h)&&er(h[c],a)}function Mg(a,c){if(De(a))return!1;var h=typeof a;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=a&&!nr(a))||tv.test(a)||!Kn.test(a)||null!=c&&a in yt(c)}function _l(a){var c=Gi(a),h=m[c];if("function"!=typeof h||!(c in le.prototype))return!1;if(a===h)return!0;var g=Kd(h);return!!g&&a===g[0]}($n&&Mn(new $n(new ArrayBuffer(1)))!=Mo||nl&&Mn(new nl)!=li||Uo&&Mn(Uo.resolve())!=lp||jo&&Mn(new jo)!=ci||Ir&&Mn(new Ir)!=uc)&&(Mn=function(a){var c=In(a),h=c==ls?a.constructor:E,g=h?ro(h):"";if(g)switch(g){case Up:return Mo;case zD:return li;case Fv:return lp;case Nv:return ci;case Lv:return uc}return c});var iS=yd?Gr:Qr;function Hc(a){var c=a&&a.constructor;return a===("function"==typeof c&&c.prototype||el)}function ow(a){return a==a&&!Et(a)}function aw(a,c){return function(h){return null!=h&&h[a]===c&&(c!==E||a in yt(h))}}function Xd(a,c,h){return c=sn(c===E?a.length-1:c,0),function(){for(var g=arguments,_=-1,w=sn(g.length-c,0),T=N(w);++_<w;)T[_]=g[c+_];_=-1;for(var M=N(c+1);++_<c;)M[_]=g[_];return M[c]=h(T),Tr(a,this,M)}}function Jd(a,c){return c.length<2?a:gi(a,Ur(c,0,-1))}function Xn(a,c){for(var h=a.length,g=Jt(c.length,h),_=Qn(a);g--;){var w=c[g];a[g]=Wi(w,h)?_[w]:E}return a}function eh(a,c){if(("constructor"!==c||"function"!=typeof a[c])&&"__proto__"!=c)return a[c]}var Og=Pg(dg),yl=Ar||function(a,c){return Yt.setTimeout(a,c)},Uc=Pg(X);function jc(a,c,h){var g=c+"";return Uc(a,function tS(a,c){var h=c.length;if(!h)return a;var g=h-1;return c[g]=(h>1?"& ":"")+c[g],c=c.join(h>2?", ":" "),a.replace(sv,"{\n/* [wrapped with "+c+"] */\n")}(g,function cw(a,c){return Se(gt,function(h){var g="_."+h[0];c&h[1]&&!Qa(a,g)&&a.push(g)}),a.sort()}(function Sg(a){var c=a.match(Fi);return c?c[1].split(ov):[]}(g),h)))}function Pg(a){var c=0,h=0;return function(){var g=mr(),_=16-(g-h);if(h=g,_>0){if(++c>=800)return arguments[0]}else c=0;return a.apply(E,arguments)}}function qc(a,c){var h=-1,g=a.length,_=g-1;for(c=c===E?g:c;++h<c;){var w=vs(h,_),T=a[w];a[w]=a[h],a[h]=T}return a.length=c,a}var kg=function lw(a){var c=Dh(a,function(g){return 500===h.size&&h.clear(),g}),h=c.cache;return c}(function(a){var c=[];return 46===a.charCodeAt(0)&&c.push(""),a.replace(nv,function(h,g,_,w){c.push(_?w.replace(Ni,"$1"):g||h)}),c});function zr(a){if("string"==typeof a||nr(a))return a;var c=a+"";return"0"==c&&1/a==-Ws?"-0":c}function ro(a){if(null!=a){try{return vd.call(a)}catch{}try{return a+""}catch{}}return""}function xn(a){if(a instanceof le)return a.clone();var c=new Je(a.__wrapped__,a.__chain__);return c.__actions__=Qn(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}var Rn=Me(function(a,c){return zt(a)?Mr(a,pn(c,1,zt,!0)):[]}),vl=Me(function(a,c){var h=Jn(c);return zt(h)&&(h=E),zt(a)?Mr(a,pn(c,1,zt,!0),de(h,2)):[]}),Ng=Me(function(a,c){var h=Jn(c);return zt(h)&&(h=E),zt(a)?Mr(a,pn(c,1,zt,!0),E,h):[]});function Vg(a,c,h){var g=null==a?0:a.length;if(!g)return-1;var _=null==h?0:Ie(h);return _<0&&(_=sn(g+_,0)),ie(a,de(c,3),_)}function rh(a,c,h){var g=null==a?0:a.length;if(!g)return-1;var _=g-1;return h!==E&&(_=Ie(h),_=h<0?sn(g+_,0):Jt(_,g-1)),ie(a,de(c,3),_,!0)}function Bg(a){return null!=a&&a.length?pn(a,1):[]}function Hg(a){return a&&a.length?a[0]:E}var wl=Me(function(a){var c=ct(a,Hn);return c.length&&c[0]===a[0]?Yo(c):[]}),gw=Me(function(a){var c=Jn(a),h=ct(a,Hn);return c===Jn(h)?c=E:h.pop(),h.length&&h[0]===a[0]?Yo(h,de(c,2)):[]}),mw=Me(function(a){var c=Jn(a),h=ct(a,Hn);return(c="function"==typeof c?c:E)&&h.pop(),h.length&&h[0]===a[0]?Yo(h,E,c):[]});function Jn(a){var c=null==a?0:a.length;return c?a[c-1]:E}var ca=Me(zc);function zc(a,c){return a&&a.length&&c&&c.length?Oc(a,c):a}var ah=Or(function(a,c){var h=null==a?0:a.length,g=Wo(a,c);return eo(a,ct(c,function(_){return Wi(_,h)?+_:_}).sort(Fc)),g});function lh(a){return null==a?a:Ho.call(a)}var Zg=Me(function(a){return to(pn(a,1,zt,!0))}),Sw=Me(function(a){var c=Jn(a);return zt(c)&&(c=E),to(pn(a,1,zt,!0),de(c,2))}),oS=Me(function(a){var c=Jn(a);return c="function"==typeof c?c:E,to(pn(a,1,zt,!0),E,c)});function Wc(a){if(!a||!a.length)return[];var c=0;return a=di(a,function(h){if(zt(h))return c=sn(h.length,c),!0}),mt(c,function(h){return ct(a,us(h))})}function dh(a,c){if(!a||!a.length)return[];var h=Wc(a);return null==c?h:ct(h,function(g){return Tr(c,E,g)})}var hh=Me(function(a,c){return zt(a)?Mr(a,c):[]}),Xg=Me(function(a){return pg(di(a,zt))}),Kc=Me(function(a){var c=Jn(a);return zt(c)&&(c=E),pg(di(a,zt),de(c,2))}),Yc=Me(function(a){var c=Jn(a);return c="function"==typeof c?c:E,pg(di(a,zt),E,c)}),Jg=Me(Wc),gh=Me(function(a){var c=a.length,h=c>1?a[c-1]:E;return h="function"==typeof h?(a.pop(),h):E,dh(a,h)});function ua(a){var c=m(a);return c.__chain__=!0,c}function Cl(a,c){return c(a)}var Iw=Or(function(a){var c=a.length,h=c?a[0]:0,g=this.__wrapped__,_=function(w){return Wo(w,a)};return!(c>1||this.__actions__.length)&&g instanceof le&&Wi(h)?((g=g.slice(h,+h+(c?1:0))).__actions__.push({func:Cl,args:[_],thisArg:E}),new Je(g,this.__chain__).thru(function(w){return c&&!w.length&&w.push(E),w})):this.thru(_)}),Rw=Nc(function(a,c,h){ut.call(a,h)?++a[h]:ji(a,h,1)}),yh=yg(Vg),Pw=yg(rh);function wh(a,c){return(De(a)?Se:xr)(a,de(c,3))}function Ch(a,c){return(De(a)?_c:rg)(a,de(c,3))}var nm=Nc(function(a,c,h){ut.call(a,h)?a[h].push(c):ji(a,h,[c])}),kw=Me(function(a,c,h){var g=-1,_="function"==typeof c,w=tr(a)?N(a.length):[];return xr(a,function(T){w[++g]=_?Tr(c,T,h):Zo(T,c,h)}),w}),Fw=Nc(function(a,c,h){ji(a,h,c)});function Xc(a,c){return(De(a)?ct:dl)(a,de(c,3))}var Lw=Nc(function(a,c,h){a[h?0:1].push(c)},function(){return[[],[]]}),im=Me(function(a,c){if(null==a)return[];var h=c.length;return h>1&&mn(a,c[0],c[1])?c=[]:h>2&&mn(c[0],c[1],c[2])&&(c=[c[0]]),ug(a,pn(c,1),[])}),Jc=xv||function(){return Yt.Date.now()};function sm(a,c,h){return c=h?E:c,qr(a,128,E,E,E,E,c=a&&null==c?a.length:c)}function om(a,c){var h;if("function"!=typeof c)throw new Hr(kn);return a=Ie(a),function(){return--a>0&&(h=c.apply(this,arguments)),a<=1&&(c=E),h}}var El=Me(function(a,c,h){var g=1;if(h.length){var _=$i(h,yi(El));g|=32}return qr(a,g,c,h,_)}),vi=Me(function(a,c,h){var g=3;if(h.length){var _=$i(h,yi(vi));g|=32}return qr(c,g,a,h,_)});function Eh(a,c,h){var g,_,w,T,M,P,j=0,q=!1,z=!1,Y=!0;if("function"!=typeof a)throw new Hr(kn);function ne(Lt){var Xr=g,Yi=_;return g=_=E,j=Lt,T=a.apply(Yi,Xr)}function ce(Lt){return j=Lt,M=yl(Pe,c),q?ne(Lt):T}function he(Lt){var Xr=Lt-P;return P===E||Xr>=c||Xr<0||z&&Lt-j>=w}function Pe(){var Lt=Jc();if(he(Lt))return $e(Lt);M=yl(Pe,function xe(Lt){var Xh=c-(Lt-P);return z?Jt(Xh,w-(Lt-j)):Xh}(Lt))}function $e(Lt){return M=E,Y&&g?ne(Lt):(g=_=E,T)}function Gt(){var Lt=Jc(),Xr=he(Lt);if(g=arguments,_=this,P=Lt,Xr){if(M===E)return ce(P);if(z)return Hd(M),M=yl(Pe,c),ne(P)}return M===E&&(M=yl(Pe,c)),T}return c=Kr(c)||0,Et(h)&&(q=!!h.leading,w=(z="maxWait"in h)?sn(Kr(h.maxWait)||0,c):w,Y="trailing"in h?!!h.trailing:Y),Gt.cancel=function Un(){M!==E&&Hd(M),j=0,g=P=_=M=E},Gt.flush=function jn(){return M===E?T:$e(Jc())},Gt}var am=Me(function(a,c){return ng(a,1,c)}),fS=Me(function(a,c,h){return ng(a,Kr(c)||0,h)});function Dh(a,c){if("function"!=typeof a||null!=c&&"function"!=typeof c)throw new Hr(kn);var h=function(){var g=arguments,_=c?c.apply(this,g):g[0],w=h.cache;if(w.has(_))return w.get(_);var T=a.apply(this,g);return h.cache=w.set(_,T)||w,T};return h.cache=new(Dh.Cache||fi),h}function ha(a){if("function"!=typeof a)throw new Hr(kn);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}Dh.Cache=fi;var gS=kc(function(a,c){var h=(c=1==c.length&&De(c[0])?ct(c[0],Xe(de())):ct(pn(c,1),Xe(de()))).length;return Me(function(g){for(var _=-1,w=Jt(g.length,h);++_<w;)g[_]=c[_].call(this,g[_]);return Tr(a,this,g)})}),lm=Me(function(a,c){var h=$i(c,yi(lm));return qr(a,32,E,c,h)}),Th=Me(function(a,c){var h=$i(c,yi(Th));return qr(a,64,E,c,h)}),Bw=Or(function(a,c){return qr(a,256,E,E,E,c)});function er(a,c){return a===c||a!=a&&c!=c}var dm=oa(ys),Ww=oa(function(a,c){return a>=c}),oo=Fd(function(){return arguments}())?Fd:function(a){return Mt(a)&&ut.call(a,"callee")&&!Dd.call(a,"callee")},De=N.isArray,Kw=Dr?Xe(Dr):function Kv(a){return Mt(a)&&In(a)==$r};function tr(a){return null!=a&&nu(a.length)&&!Gr(a)}function zt(a){return Mt(a)&&tr(a)}var Pr=Rv||Qr,Ih=bv?Xe(bv):function mi(a){return Mt(a)&&In(a)==Wa};function tu(a){if(!Mt(a))return!1;var c=In(a);return c==To||"[object DOMException]"==c||"string"==typeof a.message&&"string"==typeof a.name&&!kr(a)}function Gr(a){if(!Et(a))return!1;var c=In(a);return c==ed||c==td||"[object AsyncFunction]"==c||"[object Proxy]"==c}function Zw(a){return"number"==typeof a&&a==Ie(a)}function nu(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=ki}function Et(a){var c=typeof a;return null!=a&&("object"==c||"function"==c)}function Mt(a){return null!=a&&"object"==typeof a}var Mh=Ev?Xe(Ev):function Nd(a){return Mt(a)&&Mn(a)==li};function Dl(a){return"number"==typeof a||Mt(a)&&In(a)==lc}function kr(a){if(!Mt(a)||In(a)!=ls)return!1;var c=bc(a);if(null===c)return!0;var h=ut.call(c,"constructor")&&c.constructor;return"function"==typeof h&&h instanceof h&&vd.call(h)==qD}var iu=Sr?Xe(Sr):function Mc(a){return Mt(a)&&In(a)==Ao},mm=ft?Xe(ft):function Yv(a){return Mt(a)&&Mn(a)==ci};function su(a){return"string"==typeof a||!De(a)&&Mt(a)&&In(a)==Io}function nr(a){return"symbol"==typeof a||Mt(a)&&In(a)==cc}var Wr=Dv?Xe(Dv):function og(a){return Mt(a)&&nu(a.length)&&!!Ct[In(a)]},nC=oa($d),Ph=oa(function(a,c){return a<=c});function _m(a){if(!a)return[];if(tr(a))return su(a)?Ln(a):Qn(a);if(Vo&&a[Vo])return function Lo(O){for(var B,N=[];!(B=O.next()).done;)N.push(B.value);return N}(a[Vo]());var c=Mn(a);return(c==li?pr:c==ci?rt:ga)(a)}function wi(a){return a?(a=Kr(a))===Ws||a===-Ws?17976931348623157e292*(a<0?-1:1):a==a?a:0:0===a?a:0}function Ie(a){var c=wi(a),h=c%1;return c==c?h?c-h:c:0}function kh(a){return a?pi(Ie(a),0,ai):0}function Kr(a){if("number"==typeof a)return a;if(nr(a))return NaN;if(Et(a)){var c="function"==typeof a.valueOf?a.valueOf():a;a=Et(c)?c+"":c}if("string"!=typeof a)return 0===a?a:+a;a=ds(a);var h=cd.test(a);return h||Ka.test(a)?Pp(a.slice(2),h?2:8):bp.test(a)?NaN:+a}function ym(a){return _i(a,Nt(a))}function et(a){return null==a?"":gn(a)}var fa=ra(function(a,c){if(Hc(c)||tr(c))_i(c,xt(c),a);else for(var h in c)ut.call(c,h)&&ms(a,h,c[h])}),Ft=ra(function(a,c){_i(c,Nt(c),a)}),ou=ra(function(a,c,h,g){_i(c,Nt(c),a,g)}),_S=ra(function(a,c,h,g){_i(c,xt(c),a,g)}),Sl=Or(Wo),rC=Me(function(a,c){a=yt(a);var h=-1,g=c.length,_=g>2?c[2]:E;for(_&&mn(c[0],c[1],_)&&(g=1);++h<g;)for(var w=c[h],T=Nt(w),M=-1,P=T.length;++M<P;){var j=T[M],q=a[j];(q===E||er(q,el[j])&&!ut.call(a,j))&&(a[j]=w[j])}return a}),iC=Me(function(a){return a.push(E,Gd),Tr(pC,E,a)});function $h(a,c,h){var g=null==a?E:gi(a,c);return g===E?h:g}function Vh(a,c){return null!=a&&Tg(a,c,Ko)}var cC=sa(function(a,c,h){null!=c&&"function"!=typeof c.toString&&(c=wd.call(c)),a[c]=h},jh(rr)),uC=sa(function(a,c,h){null!=c&&"function"!=typeof c.toString&&(c=wd.call(c)),ut.call(a,c)?a[c].push(h):a[c]=[h]},de),dC=Me(Zo);function xt(a){return tr(a)?Jp(a):xc(a)}function Nt(a){return tr(a)?Jp(a,!0):function ag(a){if(!Et(a))return function Qd(a){var c=[];if(null!=a)for(var h in yt(a))c.push(h);return c}(a);var c=Hc(a),h=[];for(var g in a)"constructor"==g&&(c||!ut.call(a,g))||h.push(g);return h}(a)}var yS=ra(function(a,c,h){hl(a,c,h)}),pC=ra(function(a,c,h,g){hl(a,c,h,g)}),vm=Or(function(a,c){var h={};if(null==a)return h;var g=!1;c=ct(c,function(w){return w=qi(w,a),g||(g=w.length>1),w}),_i(a,Wd(a),h),g&&(h=Bn(h,7,gl));for(var _=c.length;_--;)fg(h,c[_]);return h}),wm=Or(function(a,c){return null==a?{}:function on(a,c){return Rc(a,c,function(h,g){return Vh(a,g)})}(a,c)});function gC(a,c){if(null==a)return{};var h=ct(Wd(a),function(g){return[g]});return c=de(c),Rc(a,h,function(g,_){return c(g,_[0])})}var Em=Cg(xt),Dm=Cg(Nt);function ga(a){return null==a?[]:Li(a,xt(a))}var bC=Cs(function(a,c,h){return c=c.toLowerCase(),a+(h?Am(c):c)});function Am(a){return Ds(et(a).toLowerCase())}function ve(a){return(a=et(a))&&a.replace(Dp,wc).replace($D,"")}var EC=Cs(function(a,c,h){return a+(h?"-":"")+c.toLowerCase()}),DC=Cs(function(a,c,h){return a+(h?" ":"")+c.toLowerCase()}),xm=ia("toLowerCase"),Pm=Cs(function(a,c,h){return a+(h?"_":"")+c.toLowerCase()}),IC=Cs(function(a,c,h){return a+(h?" ":"")+Ds(c)}),RC=Cs(function(a,c,h){return a+(h?" ":"")+c.toUpperCase()}),Ds=ia("toUpperCase");function Fm(a,c,h){return a=et(a),(c=h?E:c)===E?function Xa(O){return BD.test(O)}(a)?function Yn(O){return O.match(VD)||[]}(a):function Sv(O){return O.match(nn)||[]}(a):a.match(c)||[]}var Uh=Me(function(a,c){try{return Tr(a,E,c)}catch(h){return tu(h)?h:new Ee(h)}}),au=Or(function(a,c){return Se(c,function(h){h=zr(h),ji(a,h,El(a[h],a))}),a});function jh(a){return function(){return a}}var kC=vg(),FC=vg(!0);function rr(a){return a}function lu(a){return Ld("function"==typeof a?a:Bn(a,1))}var $m=Me(function(a,c){return function(h){return Zo(h,a,c)}}),qh=Me(function(a,c){return function(h){return Zo(a,h,c)}});function Vm(a,c,h){var g=xt(c),_=ol(c,g);null==h&&(!Et(c)||!_.length&&g.length)&&(h=c,c=a,a=this,_=ol(c,xt(c)));var w=!(Et(h)&&"chain"in h&&!h.chain),T=Gr(a);return Se(_,function(M){var P=c[M];a[M]=P,T&&(a.prototype[M]=function(){var j=this.__chain__;if(w||j){var q=a(this.__wrapped__),z=q.__actions__=Qn(this.__actions__);return z.push({func:P,args:arguments,thisArg:a}),q.__chain__=j,q}return P.apply(a,cs([this.value()],arguments))})}),a}function Gh(){}var F=qd(ct),cu=qd(yc),Bm=qd(vc);function Tl(a){return Mg(a)?us(zr(a)):function Zv(a){return function(c){return gi(c,a)}}(a)}var Hm=St(),LC=St(!0);function Al(){return[]}function Qr(){return!1}var uu=zi(function(a,c){return a+c},0),du=zd("ceil"),Yh=zi(function(a,c){return a/c},1),Zh=zd("floor"),qm=zi(function(a,c){return a*c},1),MS=zd("round"),UC=zi(function(a,c){return a-c},0);return m.after=function Vw(a,c){if("function"!=typeof c)throw new Hr(kn);return a=Ie(a),function(){if(--a<1)return c.apply(this,arguments)}},m.ary=sm,m.assign=fa,m.assignIn=Ft,m.assignInWith=ou,m.assignWith=_S,m.at=Sl,m.before=om,m.bind=El,m.bindAll=au,m.bindKey=vi,m.castArray=function qw(){if(!arguments.length)return[];var a=arguments[0];return De(a)?a:[a]},m.chain=ua,m.chunk=function th(a,c,h){c=(h?mn(a,c,h):c===E)?1:sn(Ie(c),0);var g=null==a?0:a.length;if(!g||c<1)return[];for(var _=0,w=0,T=N(Bo(g/c));_<g;)T[w++]=Ur(a,_,_+=c);return T},m.compact=function Fg(a){for(var c=-1,h=null==a?0:a.length,g=0,_=[];++c<h;){var w=a[c];w&&(_[g++]=w)}return _},m.concat=function nh(){var a=arguments.length;if(!a)return[];for(var c=N(a-1),h=arguments[0],g=a;g--;)c[g-1]=arguments[g];return cs(De(h)?Qn(h):[h],pn(c,1))},m.cond=function OC(a){var c=null==a?0:a.length,h=de();return a=c?ct(a,function(g){if("function"!=typeof g[1])throw new Hr(kn);return[h(g[0]),g[1]]}):[],Me(function(g){for(var _=-1;++_<c;){var w=a[_];if(Tr(w[0],this,g))return Tr(w[1],this,g)}})},m.conforms=function Nm(a){return function xd(a){var c=xt(a);return function(h){return Rd(h,a,c)}}(Bn(a,1))},m.constant=jh,m.countBy=Rw,m.create=function Ki(a,c){var h=Oe(a);return null==c?h:tg(h,c)},m.curry=function da(a,c,h){var g=qr(a,8,E,E,E,E,E,c=h?E:c);return g.placeholder=da.placeholder,g},m.curryRight=function bh(a,c,h){var g=qr(a,16,E,E,E,E,E,c=h?E:c);return g.placeholder=bh.placeholder,g},m.debounce=Eh,m.defaults=rC,m.defaultsDeep=iC,m.defer=am,m.delay=fS,m.difference=Rn,m.differenceBy=vl,m.differenceWith=Ng,m.drop=function uw(a,c,h){var g=null==a?0:a.length;return g?Ur(a,(c=h||c===E?1:Ie(c))<0?0:c,g):[]},m.dropRight=function dw(a,c,h){var g=null==a?0:a.length;return g?Ur(a,0,(c=g-(c=h||c===E?1:Ie(c)))<0?0:c):[]},m.dropRightWhile=function Lg(a,c){return a&&a.length?ea(a,de(c,3),!0,!0):[]},m.dropWhile=function hw(a,c){return a&&a.length?ea(a,de(c,3),!0):[]},m.fill=function $g(a,c,h,g){var _=null==a?0:a.length;return _?(h&&"number"!=typeof h&&mn(a,c,h)&&(h=0,g=_),function Od(a,c,h,g){var _=a.length;for((h=Ie(h))<0&&(h=-h>_?0:_+h),(g=g===E||g>_?_:Ie(g))<0&&(g+=_),g=h>g?0:kh(g);h<g;)a[h++]=c;return a}(a,c,h,g)):[]},m.filter=function Ow(a,c){return(De(a)?di:ig)(a,de(c,3))},m.flatMap=function tm(a,c){return pn(Xc(a,c),1)},m.flatMapDeep=function Qc(a,c){return pn(Xc(a,c),Ws)},m.flatMapDepth=function vh(a,c,h){return h=h===E?1:Ie(h),pn(Xc(a,c),h)},m.flatten=Bg,m.flattenDeep=function fw(a){return null!=a&&a.length?pn(a,Ws):[]},m.flattenDepth=function ih(a,c){return null!=a&&a.length?pn(a,c=c===E?1:Ie(c)):[]},m.flip=function pS(a){return qr(a,512)},m.flow=kC,m.flowRight=FC,m.fromPairs=function sh(a){for(var c=-1,h=null==a?0:a.length,g={};++c<h;){var _=a[c];g[_[0]]=_[1]}return g},m.functions=function pa(a){return null==a?[]:ol(a,xt(a))},m.functionsIn=function aC(a){return null==a?[]:ol(a,Nt(a))},m.groupBy=nm,m.initial=function pw(a){return null!=a&&a.length?Ur(a,0,-1):[]},m.intersection=wl,m.intersectionBy=gw,m.intersectionWith=mw,m.invert=cC,m.invertBy=uC,m.invokeMap=kw,m.iteratee=lu,m.keyBy=Fw,m.keys=xt,m.keysIn=Nt,m.map=Xc,m.mapKeys=function hC(a,c){var h={};return c=de(c,3),yr(a,function(g,_,w){ji(h,c(g,_,w),g)}),h},m.mapValues=function fC(a,c){var h={};return c=de(c,3),yr(a,function(g,_,w){ji(h,_,c(g,_,w))}),h},m.matches=function NC(a){return Qo(Bn(a,1))},m.matchesProperty=function Lm(a,c){return lg(a,Bn(c,1))},m.memoize=Dh,m.merge=yS,m.mergeWith=pC,m.method=$m,m.methodOf=qh,m.mixin=Vm,m.negate=ha,m.nthArg=function SS(a){return a=Ie(a),Me(function(c){return Js(c,a)})},m.omit=vm,m.omitBy=function vS(a,c){return gC(a,ha(de(c)))},m.once=function Sh(a){return om(2,a)},m.orderBy=function Nw(a,c,h,g){return null==a?[]:(De(c)||(c=null==c?[]:[c]),De(h=g?E:h)||(h=null==h?[]:[h]),ug(a,c,h))},m.over=F,m.overArgs=gS,m.overEvery=cu,m.overSome=Bm,m.partial=lm,m.partialRight=Th,m.partition=Lw,m.pick=wm,m.pickBy=gC,m.property=Tl,m.propertyOf=function Zr(a){return function(c){return null==a?E:gi(a,c)}},m.pull=ca,m.pullAll=zc,m.pullAllBy=function qg(a,c,h){return a&&a.length&&c&&c.length?Oc(a,c,de(h,2)):a},m.pullAllWith=function _w(a,c,h){return a&&a.length&&c&&c.length?Oc(a,c,E,h):a},m.pullAt=ah,m.range=Hm,m.rangeRight=LC,m.rearg=Bw,m.reject=function $w(a,c){return(De(a)?di:ig)(a,ha(de(c,3)))},m.remove=function yw(a,c){var h=[];if(!a||!a.length)return h;var g=-1,_=[],w=a.length;for(c=de(c,3);++g<w;){var T=a[g];c(T,g,a)&&(h.push(T),_.push(g))}return eo(a,_),h},m.rest=function Hw(a,c){if("function"!=typeof a)throw new Hr(kn);return Me(a,c=c===E?c:Ie(c))},m.reverse=lh,m.sampleSize=function cS(a,c,h){return c=(h?mn(a,c,h):c===E)?1:Ie(c),(De(a)?Vn:Jo)(a,c)},m.set=function mC(a,c,h){return null==a?a:Pc(a,c,h)},m.setWith=function bm(a,c,h,g){return g="function"==typeof g?g:E,null==a?a:Pc(a,c,h,g)},m.shuffle=function uS(a){return(De(a)?gs:YD)(a)},m.slice=function vw(a,c,h){var g=null==a?0:a.length;return g?(h&&"number"!=typeof h&&mn(a,c,h)?(c=0,h=g):(c=null==c?0:Ie(c),h=h===E?g:Ie(h)),Ur(a,c,h)):[]},m.sortBy=im,m.sortedUniq=function uh(a){return a&&a.length?Qv(a):[]},m.sortedUniqBy=function Ew(a,c){return a&&a.length?Qv(a,de(c,2)):[]},m.split=function an(a,c,h){return h&&"number"!=typeof h&&mn(a,c,h)&&(c=h=E),(h=h===E?ai:h>>>0)?(a=et(a))&&("string"==typeof c||null!=c&&!iu(c))&&!(c=gn(c))&&Vt(a)?Rr(Ln(a),0,h):a.split(c,h):[]},m.spread=function Uw(a,c){if("function"!=typeof a)throw new Hr(kn);return c=null==c?0:sn(Ie(c),0),Me(function(h){var g=h[c],_=Rr(h,0,c);return g&&cs(_,g),Tr(a,this,_)})},m.tail=function Dw(a){var c=null==a?0:a.length;return c?Ur(a,1,c):[]},m.take=function Wg(a,c,h){return a&&a.length?Ur(a,0,(c=h||c===E?1:Ie(c))<0?0:c):[]},m.takeRight=function Kg(a,c,h){var g=null==a?0:a.length;return g?Ur(a,(c=g-(c=h||c===E?1:Ie(c)))<0?0:c,g):[]},m.takeRightWhile=function io(a,c){return a&&a.length?ea(a,de(c,3),!1,!0):[]},m.takeWhile=function Yg(a,c){return a&&a.length?ea(a,de(c,3)):[]},m.tap=function Aw(a,c){return c(a),a},m.throttle=function jw(a,c,h){var g=!0,_=!0;if("function"!=typeof a)throw new Hr(kn);return Et(h)&&(g="leading"in h?!!h.leading:g,_="trailing"in h?!!h.trailing:_),Eh(a,c,{leading:g,maxWait:c,trailing:_})},m.thru=Cl,m.toArray=_m,m.toPairs=Em,m.toPairsIn=Dm,m.toPath=function jm(a){return De(a)?ct(a,zr):nr(a)?[a]:Qn(kg(et(a)))},m.toPlainObject=ym,m.transform=function Yr(a,c,h){var g=De(a),_=g||Pr(a)||Wr(a);if(c=de(c,4),null==h){var w=a&&a.constructor;h=_?g?new w:[]:Et(a)&&Gr(w)?Oe(bc(a)):{}}return(_?Se:yr)(a,function(T,M,P){return c(h,T,M,P)}),h},m.unary=function cm(a){return sm(a,1)},m.union=Zg,m.unionBy=Sw,m.unionWith=oS,m.uniq=function Gc(a){return a&&a.length?to(a):[]},m.uniqBy=function Tw(a,c){return a&&a.length?to(a,de(c,2)):[]},m.uniqWith=function Qg(a,c){return c="function"==typeof c?c:E,a&&a.length?to(a,E,c):[]},m.unset=function _C(a,c){return null==a||fg(a,c)},m.unzip=Wc,m.unzipWith=dh,m.update=function Sm(a,c,h){return null==a?a:jt(a,c,jr(h))},m.updateWith=function yC(a,c,h,g){return g="function"==typeof g?g:E,null==a?a:jt(a,c,jr(h),g)},m.values=ga,m.valuesIn=function vC(a){return null==a?[]:Li(a,Nt(a))},m.without=hh,m.words=Fm,m.wrap=function eu(a,c){return lm(jr(c),a)},m.xor=Xg,m.xorBy=Kc,m.xorWith=Yc,m.zip=Jg,m.zipObject=function fh(a,c){return gg(a||[],c||[],ms)},m.zipObjectDeep=function ph(a,c){return gg(a||[],c||[],Pc)},m.zipWith=gh,m.entries=Em,m.entriesIn=Dm,m.extend=Ft,m.extendWith=ou,Vm(m,m),m.add=uu,m.attempt=Uh,m.camelCase=bC,m.capitalize=Am,m.ceil=du,m.clamp=function wC(a,c,h){return h===E&&(h=c,c=E),h!==E&&(h=(h=Kr(h))==h?h:0),c!==E&&(c=(c=Kr(c))==c?c:0),pi(Kr(a),c,h)},m.clone=function Ah(a){return Bn(a,4)},m.cloneDeep=function qt(a){return Bn(a,5)},m.cloneDeepWith=function um(a,c){return Bn(a,5,c="function"==typeof c?c:E)},m.cloneWith=function zw(a,c){return Bn(a,4,c="function"==typeof c?c:E)},m.conformsTo=function Gw(a,c){return null==c||Rd(a,c,xt(c))},m.deburr=ve,m.defaultTo=function PC(a,c){return null==a||a!=a?c:a},m.divide=Yh,m.endsWith=function Ne(a,c,h){a=et(a),c=gn(c);var g=a.length,_=h=h===E?g:pi(Ie(h),0,g);return(h-=c.length)>=0&&a.slice(h,_)==c},m.eq=er,m.escape=function Im(a){return(a=et(a))&&yp.test(a)?a.replace(od,No):a},m.escapeRegExp=function Mm(a){return(a=et(a))&&rv.test(a)?a.replace(ld,"\\$&"):a},m.every=function aS(a,c,h){var g=De(a)?yc:zv;return h&&mn(a,c,h)&&(c=E),g(a,de(c,3))},m.find=yh,m.findIndex=Vg,m.findKey=function co(a,c){return gd(a,de(c,3),yr)},m.findLast=Pw,m.findLastIndex=rh,m.findLastKey=function sC(a,c){return gd(a,de(c,3),Ic)},m.floor=Zh,m.forEach=wh,m.forEachRight=Ch,m.forIn=function Fh(a,c){return null==a?a:sg(a,de(c,3),Nt)},m.forInRight=function Nh(a,c){return null==a?a:Gv(a,de(c,3),Nt)},m.forOwn=function oC(a,c){return a&&yr(a,de(c,3))},m.forOwnRight=function Lh(a,c){return a&&Ic(a,de(c,3))},m.get=$h,m.gt=dm,m.gte=Ww,m.has=function lC(a,c){return null!=a&&Tg(a,c,Wv)},m.hasIn=Vh,m.head=Hg,m.identity=rr,m.includes=function rm(a,c,h,g){a=tr(a)?a:ga(a),h=h&&!g?Ie(h):0;var _=a.length;return h<0&&(h=sn(_+h,0)),su(a)?h<=_&&a.indexOf(c,h)>-1:!!_&&Qt(a,c,h)>-1},m.indexOf=function Ug(a,c,h){var g=null==a?0:a.length;if(!g)return-1;var _=null==h?0:Ie(h);return _<0&&(_=sn(g+_,0)),Qt(a,c,_)},m.inRange=function Tm(a,c,h){return c=wi(c),h===E?(h=c,c=0):h=wi(h),function kd(a,c,h){return a>=Jt(c,h)&&a<sn(c,h)}(a=Kr(a),c,h)},m.invoke=dC,m.isArguments=oo,m.isArray=De,m.isArrayBuffer=Kw,m.isArrayLike=tr,m.isArrayLikeObject=zt,m.isBoolean=function mS(a){return!0===a||!1===a||Mt(a)&&In(a)==st},m.isBuffer=Pr,m.isDate=Ih,m.isElement=function hm(a){return Mt(a)&&1===a.nodeType&&!kr(a)},m.isEmpty=function fm(a){if(null==a)return!0;if(tr(a)&&(De(a)||"string"==typeof a||"function"==typeof a.splice||Pr(a)||Wr(a)||oo(a)))return!a.length;var c=Mn(a);if(c==li||c==ci)return!a.size;if(Hc(a))return!xc(a).length;for(var h in a)if(ut.call(a,h))return!1;return!0},m.isEqual=function pm(a,c){return al(a,c)},m.isEqualWith=function Yw(a,c,h){var g=(h="function"==typeof h?h:E)?h(a,c):E;return g===E?al(a,c,E,h):!!g},m.isError=tu,m.isFinite=function gm(a){return"number"==typeof a&&Ov(a)},m.isFunction=Gr,m.isInteger=Zw,m.isLength=nu,m.isMap=Mh,m.isMatch=function ao(a,c){return a===c||cl(a,c,Vc(c))},m.isMatchWith=function Qw(a,c,h){return h="function"==typeof h?h:E,cl(a,c,Vc(c),h)},m.isNaN=function xh(a){return Dl(a)&&a!=+a},m.isNative=function ru(a){if(iS(a))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ul(a)},m.isNil=function Rh(a){return null==a},m.isNull=function Xw(a){return null===a},m.isNumber=Dl,m.isObject=Et,m.isObjectLike=Mt,m.isPlainObject=kr,m.isRegExp=iu,m.isSafeInteger=function Oh(a){return Zw(a)&&a>=-ki&&a<=ki},m.isSet=mm,m.isString=su,m.isSymbol=nr,m.isTypedArray=Wr,m.isUndefined=function Jw(a){return a===E},m.isWeakMap=function eC(a){return Mt(a)&&Mn(a)==uc},m.isWeakSet=function tC(a){return Mt(a)&&"[object WeakSet]"==In(a)},m.join=function oh(a,c){return null==a?"":Ut.call(a,c)},m.kebabCase=EC,m.last=Jn,m.lastIndexOf=function jg(a,c,h){var g=null==a?0:a.length;if(!g)return-1;var _=g;return h!==E&&(_=(_=Ie(h))<0?sn(g+_,0):Jt(_,g-1)),c==c?function Cc(O,B,N){for(var te=N+1;te--;)if(O[te]===B)return te;return te}(a,c,_):ie(a,Sn,_,!0)},m.lowerCase=DC,m.lowerFirst=xm,m.lt=nC,m.lte=Ph,m.max=function Qh(a){return a&&a.length?_s(a,rr,ys):E},m.maxBy=function IS(a,c){return a&&a.length?_s(a,de(c,2),ys):E},m.mean=function $C(a){return Tn(a,rr)},m.meanBy=function VC(a,c){return Tn(a,de(c,2))},m.min=function BC(a){return a&&a.length?_s(a,rr,$d):E},m.minBy=function HC(a,c){return a&&a.length?_s(a,de(c,2),$d):E},m.stubArray=Al,m.stubFalse=Qr,m.stubObject=function Wh(){return{}},m.stubString=function Um(){return""},m.stubTrue=function Kh(){return!0},m.multiply=qm,m.nth=function sS(a,c){return a&&a.length?Js(a,Ie(c)):E},m.noConflict=function zh(){return Yt._===this&&(Yt._=Bp),this},m.noop=Gh,m.now=Jc,m.pad=function SC(a,c,h){a=et(a);var g=(c=Ie(c))?hs(a):0;if(!c||g>=c)return a;var _=(c-g)/2;return k(Sc(_),h)+a+k(Bo(_),h)},m.padEnd=function Rm(a,c,h){a=et(a);var g=(c=Ie(c))?hs(a):0;return c&&g<c?a+k(c-g,h):a},m.padStart=function TC(a,c,h){a=et(a);var g=(c=Ie(c))?hs(a):0;return c&&g<c?k(c-g,h)+a:a},m.parseInt=function AC(a,c,h){return h||null==c?c=0:c&&(c=+c),kv(et(a).replace(dc,""),c||0)},m.random=function CC(a,c,h){if(h&&"boolean"!=typeof h&&mn(a,c,h)&&(c=h=E),h===E&&("boolean"==typeof c?(h=c,c=E):"boolean"==typeof a&&(h=a,a=E)),a===E&&c===E?(a=0,c=1):(a=wi(a),c===E?(c=a,a=0):c=wi(c)),a>c){var g=a;a=c,c=g}if(h||a%1||c%1){var _=Tc();return Jt(a+_*(c-a+fd("1e-"+((_+"").length-1))),c)}return vs(a,c)},m.reduce=function Es(a,c,h){var g=De(a)?Fn:hr,_=arguments.length<3;return g(a,de(c,4),h,_,xr)},m.reduceRight=function bl(a,c,h){var g=De(a)?Lp:hr,_=arguments.length<3;return g(a,de(c,4),h,_,rg)},m.repeat=function wS(a,c,h){return c=(h?mn(a,c,h):c===E)?1:Ie(c),ws(et(a),c)},m.replace=function Om(){var a=arguments,c=et(a[0]);return a.length<3?c:c.replace(a[1],a[2])},m.result=function Cm(a,c,h){var g=-1,_=(c=qi(c,a)).length;for(_||(_=1,a=E);++g<_;){var w=null==a?E:a[zr(c[g])];w===E&&(g=_,w=h),a=Gr(w)?w.call(a):w}return a},m.round=MS,m.runInContext=O,m.sample=function lS(a){return(De(a)?eg:Vd)(a)},m.size=function dS(a){if(null==a)return 0;if(tr(a))return su(a)?hs(a):a.length;var c=Mn(a);return c==li||c==ci?a.size:xc(a).length},m.snakeCase=Pm,m.some=function hS(a,c,h){var g=De(a)?vc:ZD;return h&&mn(a,c,h)&&(c=E),g(a,de(c,3))},m.sortedIndex=function ww(a,c){return Bd(a,c)},m.sortedIndexBy=function Cw(a,c,h){return hg(a,c,de(h,2))},m.sortedIndexOf=function bw(a,c){var h=null==a?0:a.length;if(h){var g=Bd(a,c);if(g<h&&er(a[g],c))return g}return-1},m.sortedLastIndex=function zg(a,c){return Bd(a,c,!0)},m.sortedLastIndexBy=function ch(a,c,h){return hg(a,c,de(h,2),!0)},m.sortedLastIndexOf=function Gg(a,c){if(null!=a&&a.length){var g=Bd(a,c,!0)-1;if(er(a[g],c))return g}return-1},m.startCase=IC,m.startsWith=function Bh(a,c,h){return a=et(a),h=null==h?0:pi(Ie(h),0,a.length),c=gn(c),a.slice(h,h+c.length)==c},m.subtract=UC,m.sum=function xS(a){return a&&a.length?Ce(a,rr):0},m.sumBy=function zm(a,c){return a&&a.length?Ce(a,de(c,2)):0},m.template=function Hh(a,c,h){var g=m.templateSettings;h&&mn(a,c,h)&&(c=E),a=et(a),c=ou({},c,g,la);var M,P,_=ou({},c.imports,g.imports,la),w=xt(_),T=Li(_,w),j=0,q=c.interpolate||Ya,z="__p += '",Y=Vp((c.escape||Ya).source+"|"+q.source+"|"+(q===ad?PD:Ya).source+"|"+(c.evaluate||Ya).source+"|$","g"),ne="//# sourceURL="+(ut.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++gc+"]")+"\n";a.replace(Y,function(he,Pe,$e,Un,jn,Gt){return $e||($e=Un),z+=a.slice(j,Gt).replace(lv,md),Pe&&(M=!0,z+="' +\n__e("+Pe+") +\n'"),jn&&(P=!0,z+="';\n"+jn+";\n__p += '"),$e&&(z+="' +\n((__t = ("+$e+")) == null ? '' : __t) +\n'"),j=Gt+he.length,he}),z+="';\n";var ce=ut.call(c,"variable")&&c.variable;if(ce){if(xo.test(ce))throw new Ee("Invalid `variable` option passed into `_.template`")}else z="with (obj) {\n"+z+"\n}\n";z=(P?z.replace(id,""):z).replace(mp,"$1").replace(_p,"$1;"),z="function("+(ce||"obj")+") {\n"+(ce?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(M?", __e = _.escape":"")+(P?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+z+"return __p\n}";var xe=Uh(function(){return Ke(w,ne+"return "+z).apply(E,T)});if(xe.source=z,tu(xe))throw xe;return xe},m.times=function TS(a,c){if((a=Ie(a))<1||a>ki)return[];var h=ai,g=Jt(a,ai);c=de(c),a-=ai;for(var _=mt(g,c);++h<a;)c(h);return _},m.toFinite=wi,m.toInteger=Ie,m.toLength=kh,m.toLower=function MC(a){return et(a).toLowerCase()},m.toNumber=Kr,m.toSafeInteger=function lo(a){return a?pi(Ie(a),-ki,ki):0===a?a:0},m.toString=et,m.toUpper=function CS(a){return et(a).toUpperCase()},m.trim=function bS(a,c,h){if((a=et(a))&&(h||c===E))return ds(a);if(!a||!(c=gn(c)))return a;var g=Ln(a),_=Ln(c);return Rr(g,ko(g,_),Fo(g,_)+1).join("")},m.trimEnd=function ES(a,c,h){if((a=et(a))&&(h||c===E))return a.slice(0,Ja(a)+1);if(!a||!(c=gn(c)))return a;var g=Ln(a);return Rr(g,0,Fo(g,Ln(c))+1).join("")},m.trimStart=function xC(a,c,h){if((a=et(a))&&(h||c===E))return a.replace(dc,"");if(!a||!(c=gn(c)))return a;var g=Ln(a);return Rr(g,ko(g,Ln(c))).join("")},m.truncate=function km(a,c){var h=30,g="...";if(Et(c)){var _="separator"in c?c.separator:_;h="length"in c?Ie(c.length):h,g="omission"in c?gn(c.omission):g}var w=(a=et(a)).length;if(Vt(a)){var T=Ln(a);w=T.length}if(h>=w)return a;var M=h-hs(g);if(M<1)return g;var P=T?Rr(T,0,M).join(""):a.slice(0,M);if(_===E)return P+g;if(T&&(M+=P.length-M),iu(_)){if(a.slice(M).search(_)){var j,q=P;for(_.global||(_=Vp(_.source,et(Cp.exec(_))+"g")),_.lastIndex=0;j=_.exec(q);)var z=j.index;P=P.slice(0,z===E?M:z)}}else if(a.indexOf(gn(_),M)!=M){var Y=P.lastIndexOf(_);Y>-1&&(P=P.slice(0,Y))}return P+g},m.unescape=function DS(a){return(a=et(a))&&ev.test(a)?a.replace(sd,Qs):a},m.uniqueId=function AS(a){var c=++jD;return et(a)+c},m.upperCase=RC,m.upperFirst=Ds,m.each=wh,m.eachRight=Ch,m.first=Hg,Vm(m,function(){var a={};return yr(m,function(c,h){ut.call(m.prototype,h)||(a[h]=c)}),a}(),{chain:!1}),m.VERSION="4.17.21",Se(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){m[a].placeholder=m}),Se(["drop","take"],function(a,c){le.prototype[a]=function(h){h=h===E?1:sn(Ie(h),0);var g=this.__filtered__&&!c?new le(this):this.clone();return g.__filtered__?g.__takeCount__=Jt(h,g.__takeCount__):g.__views__.push({size:Jt(h,ai),type:a+(g.__dir__<0?"Right":"")}),g},le.prototype[a+"Right"]=function(h){return this.reverse()[a](h).reverse()}}),Se(["filter","map","takeWhile"],function(a,c){var h=c+1,g=1==h||3==h;le.prototype[a]=function(_){var w=this.clone();return w.__iteratees__.push({iteratee:de(_,3),type:h}),w.__filtered__=w.__filtered__||g,w}}),Se(["head","last"],function(a,c){var h="take"+(c?"Right":"");le.prototype[a]=function(){return this[h](1).value()[0]}}),Se(["initial","tail"],function(a,c){var h="drop"+(c?"":"Right");le.prototype[a]=function(){return this.__filtered__?new le(this):this[h](1)}}),le.prototype.compact=function(){return this.filter(rr)},le.prototype.find=function(a){return this.filter(a).head()},le.prototype.findLast=function(a){return this.reverse().find(a)},le.prototype.invokeMap=Me(function(a,c){return"function"==typeof a?new le(this):this.map(function(h){return Zo(h,a,c)})}),le.prototype.reject=function(a){return this.filter(ha(de(a)))},le.prototype.slice=function(a,c){a=Ie(a);var h=this;return h.__filtered__&&(a>0||c<0)?new le(h):(a<0?h=h.takeRight(-a):a&&(h=h.drop(a)),c!==E&&(h=(c=Ie(c))<0?h.dropRight(-c):h.take(c-a)),h)},le.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},le.prototype.toArray=function(){return this.take(ai)},yr(le.prototype,function(a,c){var h=/^(?:filter|find|map|reject)|While$/.test(c),g=/^(?:head|last)$/.test(c),_=m[g?"take"+("last"==c?"Right":""):c],w=g||/^find/.test(c);_&&(m.prototype[c]=function(){var T=this.__wrapped__,M=g?[1]:arguments,P=T instanceof le,j=M[0],q=P||De(T),z=function(Pe){var $e=_.apply(m,cs([Pe],M));return g&&Y?$e[0]:$e};q&&h&&"function"==typeof j&&1!=j.length&&(P=q=!1);var Y=this.__chain__,ne=!!this.__actions__.length,ce=w&&!Y,xe=P&&!ne;if(!w&&q){T=xe?T:new le(this);var he=a.apply(T,M);return he.__actions__.push({func:Cl,args:[z],thisArg:E}),new Je(he,Y)}return ce&&xe?a.apply(this,M):(he=this.thru(z),ce?g?he.value()[0]:he.value():he)})}),Se(["pop","push","shift","sort","splice","unshift"],function(a){var c=_d[a],h=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",g=/^(?:pop|shift)$/.test(a);m.prototype[a]=function(){var _=arguments;if(g&&!this.__chain__){var w=this.value();return c.apply(De(w)?w:[],_)}return this[h](function(T){return c.apply(De(T)?T:[],_)})}}),yr(le.prototype,function(a,c){var h=m[c];if(h){var g=h.name+"";ut.call(fe,g)||(fe[g]=[]),fe[g].push({name:c,func:h})}}),fe[pl(E,2).name]=[{name:"wrapper",func:E}],le.prototype.clone=function qp(){var a=new le(this.__wrapped__);return a.__actions__=Qn(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Qn(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Qn(this.__views__),a},le.prototype.reverse=function sl(){if(this.__filtered__){var a=new le(this);a.__dir__=-1,a.__filtered__=!0}else(a=this.clone()).__dir__*=-1;return a},le.prototype.value=function hi(){var a=this.__wrapped__.value(),c=this.__dir__,h=De(a),g=c<0,_=h?a.length:0,w=function Bc(a,c,h){for(var g=-1,_=h.length;++g<_;){var w=h[g],T=w.size;switch(w.type){case"drop":a+=T;break;case"dropRight":c-=T;break;case"take":c=Jt(c,a+T);break;case"takeRight":a=sn(a,c-T)}}return{start:a,end:c}}(0,_,this.__views__),T=w.start,M=w.end,P=M-T,j=g?M:T-1,q=this.__iteratees__,z=q.length,Y=0,ne=Jt(P,this.__takeCount__);if(!h||!g&&_==P&&ne==P)return ta(a,this.__actions__);var ce=[];e:for(;P--&&Y<ne;){for(var xe=-1,he=a[j+=c];++xe<z;){var Pe=q[xe],Un=Pe.type,jn=(0,Pe.iteratee)(he);if(2==Un)he=jn;else if(!jn){if(1==Un)continue e;break e}}ce[Y++]=he}return ce},m.prototype.at=Iw,m.prototype.chain=function Mw(){return ua(this)},m.prototype.commit=function em(){return new Je(this.value(),this.__chain__)},m.prototype.next=function mh(){this.__values__===E&&(this.__values__=_m(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?E:this.__values__[this.__index__++]}},m.prototype.plant=function _h(a){for(var c,h=this;h instanceof kt;){var g=xn(h);g.__index__=0,g.__values__=E,c?_.__wrapped__=g:c=g;var _=g;h=h.__wrapped__}return _.__wrapped__=a,c},m.prototype.reverse=function so(){var a=this.__wrapped__;if(a instanceof le){var c=a;return this.__actions__.length&&(c=new le(this)),(c=c.reverse()).__actions__.push({func:Cl,args:[lh],thisArg:E}),new Je(c,this.__chain__)}return this.thru(lh)},m.prototype.toJSON=m.prototype.valueOf=m.prototype.value=function xw(){return ta(this.__wrapped__,this.__actions__)},m.prototype.first=m.prototype.head,Vo&&(m.prototype[Vo]=function Zc(){return this}),m}();Yt._=$o,(So=function(){return $o}.call(js,rc,js,Ri))!==E&&(Ri.exports=So)}.call(this)}},Ri=>{Ri(Ri.s=984)}]);